<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.segy - SEG Y and SU read and write support for ObsPy &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="index.html" accesskey="U">ObsPy Library Reference</a></li> 
    </ol>
  
  <span class="target" id="module-obspy.io.segy"></span><div class="section" id="obspy-io-segy-seg-y-and-su-read-and-write-support-for-obspy">
<h1>obspy.io.segy - SEG Y and SU read and write support for ObsPy<a class="headerlink" href="#obspy-io-segy-seg-y-and-su-read-and-write-support-for-obspy" title="Permalink to this headline">¶</a></h1>
<p>The obspy.io.segy package contains methods in order to read and write files
in the
<a class="reference external" href="https://www.seg.org/documents/10161/77915/seg_y_rev1.pdf">SEG Y (rev. 1)</a>
and SU (Seismic Unix) format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body">The ObsPy Development Team (<a class="reference external" href="mailto:devs&#37;&#52;&#48;obspy&#46;org">devs<span>&#64;</span>obspy<span>&#46;</span>org</a>)</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">GNU Lesser General Public License, Version 3
(<a class="reference external" href="https://www.gnu.org/copyleft/lesser.html">https://www.gnu.org/copyleft/lesser.html</a>)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The module can currently read files that are in accordance to the SEG Y
rev. 1 specification but has been designed to be able to handle custom
headers as well. This functionality is not yet exposed because the
developers have no files to test it with. If you have access to some files
with custom headers please consider sending them to <code class="docutils literal"><span class="pre">devs&#64;obspy.org</span></code>.</p>
</div>
<div class="section" id="reading">
<h2>Reading<a class="headerlink" href="#reading" title="Permalink to this headline">¶</a></h2>
<p>The SEG Y and Seismic Unix (SU) file formats are quite different from the
file formats usually used in observatories (GSE2, MiniSEED, …). The
<a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a>/<a class="reference internal" href="autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="obspy.core.trace.Trace"><code class="xref py py-class docutils literal"><span class="pre">Trace</span></code></a> structures
of ObsPy are therefore not fully suited to handle them. Nonetheless they work
well enough if some potential problems are kept in mind.</p>
<p>SEG Y files can be read in three different ways that have different
advantages/disadvantages. Most of the following also applies to SU files with
some changes (keep in mind that SU files have no file wide headers).</p>
<ol class="arabic simple">
<li>Using the standard <a class="reference internal" href="autogen/obspy.core.stream.read.html#obspy.core.stream.read" title="obspy.core.stream.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a> function.</li>
<li>Using the <a class="reference internal" href="#module-obspy.io.segy" title="obspy.io.segy"><code class="xref py py-mod docutils literal"><span class="pre">obspy.io.segy</span></code></a> specific
<a class="reference internal" href="autogen/obspy.io.segy.core._read_segy.html#obspy.io.segy.core._read_segy" title="obspy.io.segy.core._read_segy"><code class="xref py py-func docutils literal"><span class="pre">obspy.io.segy.core._read_segy()</span></code></a> function.</li>
<li>Using the internal <a class="reference internal" href="autogen/obspy.io.segy.segy._read_segy.html#obspy.io.segy.segy._read_segy" title="obspy.io.segy.segy._read_segy"><code class="xref py py-func docutils literal"><span class="pre">obspy.io.segy.segy._read_segy()</span></code></a> function.</li>
</ol>
<div class="section" id="reading-using-methods-1-and-2">
<h3>Reading using methods 1 and 2<a class="headerlink" href="#reading-using-methods-1-and-2" title="Permalink to this headline">¶</a></h3>
<p>The first two methods will return a <a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> object
and they are identical except that the file wide SEGY headers are only
accessible if method 2 is used. These headers are stored in Stream.stats.</p>
<p>The obvious advantage of these methods is that the returned
<a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> object interfaces very well with other
functionality provided by ObsPy (file format conversion, filtering, …).</p>
<p>Due to the fact that a single SEG Y file can contain several tens of thousands
of traces and each trace will be a <a class="reference internal" href="autogen/obspy.core.trace.Trace.html#obspy.core.trace.Trace" title="obspy.core.trace.Trace"><code class="xref py py-class docutils literal"><span class="pre">Trace</span></code></a> instance
which in turn will contain other objects these methods are quite slow and
memory intensive.</p>
<p>To somewhat rectify this issue all SEG Y specific trace header attributes are
only unpacked on demand by default.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy.io.segy.core</span> <span class="k">import</span> <span class="n">_read_segy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy.core.util</span> <span class="k">import</span> <span class="n">get_example_file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># or &#39;from obspy import read&#39; if file wide headers are of no interest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">get_example_file</span><span class="p">(</span><span class="s2">&quot;00001034.sgy_first_trace&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st</span> 
<span class="go">&lt;obspy.core.stream.Stream object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">)</span> 
<span class="go">1 Trace(s) in Stream:</span>
<span class="go">Seq. No. in line:    1 | 2009-06-22T14:47:37.000000Z - 2009-06-22T14:47:41...</span>
</pre></div>
</div>
<p>SEG Y files contain a large amount of additional trace header fields which are
not unpacked by default. However these values can be accessed by calling the
header key directly or by using the <code class="docutils literal"><span class="pre">unpack_trace_headers</span></code> keyword with the
<a class="reference internal" href="autogen/obspy.core.stream.read.html#obspy.core.stream.read" title="obspy.core.stream.read"><code class="xref py py-func docutils literal"><span class="pre">read()</span></code></a>/ <a class="reference internal" href="autogen/obspy.io.segy.core._read_segy.html#obspy.io.segy.core._read_segy" title="obspy.io.segy.core._read_segy"><code class="xref py py-func docutils literal"><span class="pre">_read_segy()</span></code></a>
functions to unpack all header fields.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st1</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">st1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="p">)</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="o">.</span><span class="n">data_use</span> <span class="c1"># Unpacking a value on the fly.</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">st1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="p">)</span> <span class="c1"># This value will remain unpacked.</span>
<span class="go">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">st2</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">unpack_trace_headers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">st2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="p">)</span>
<span class="go">92</span>
</pre></div>
</div>
<p>Reading SEG Y files with <code class="docutils literal"><span class="pre">unpack_trace_headers=True</span></code> will be very slow and
memory intensive for a large number of traces due to the huge number of objects
created.</p>
</div>
<div class="section" id="reading-using-method-3">
<h3>Reading using method 3<a class="headerlink" href="#reading-using-method-3" title="Permalink to this headline">¶</a></h3>
<p>The internal reading method is much faster and less of a memory hog but does
not return a <a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> object. Instead it returns a
<a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYFile.html#obspy.io.segy.segy.SEGYFile" title="obspy.io.segy.segy.SEGYFile"><code class="xref py py-class docutils literal"><span class="pre">SEGYFile</span></code></a> object which is somewhat similar to the
<a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> object used in ObsPy but specific to
<a class="reference internal" href="#module-obspy.io.segy" title="obspy.io.segy"><code class="xref py py-mod docutils literal"><span class="pre">segy</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy.io.segy.segy</span> <span class="k">import</span> <span class="n">_read_segy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segy</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segy</span> 
<span class="go">&lt;obspy.io.segy.segy.SEGYFile object at 0x...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">segy</span><span class="p">)</span>
<span class="go">1 traces in the SEG Y structure.</span>
</pre></div>
</div>
<p>The traces are a list of <a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYTrace.html#obspy.io.segy.segy.SEGYTrace" title="obspy.io.segy.segy.SEGYTrace"><code class="xref py py-class docutils literal"><span class="pre">SEGYTrace</span></code></a> objects
stored in <code class="docutils literal"><span class="pre">segy.traces</span></code>. The trace header values are stored in
<code class="docutils literal"><span class="pre">trace.header</span></code> as a <a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYTraceHeader.html#obspy.io.segy.segy.SEGYTraceHeader" title="obspy.io.segy.segy.SEGYTraceHeader"><code class="xref py py-class docutils literal"><span class="pre">SEGYTraceHeader</span></code></a> object.</p>
<p>By default these header values will not be unpacked and thus will not show up
in ipython’s tab completion. See
<code class="xref py py-const docutils literal"><span class="pre">obspy.io.segy.header.TRACE_HEADER_FORMAT</span></code>
<a class="reference external" href="https://github.com/obspy/obspy/blob/master/obspy/io/segy/header.py#L53">(source)</a>
for a list of all available trace header attributes. They will be unpacked
on the fly if they are accessed as class attributes.</p>
<p>By default trace data are read into memory, but this may be impractical for
very large datasets. To skip loading data into memory, read SEG Y files with
<code class="docutils literal"><span class="pre">headonly=True</span></code>.  The <code class="docutils literal"><span class="pre">data</span></code> class attribute will not show up in ipython’s
tab completion, but data are read directly from the disk when it is accessed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">obspy.io.segy.segy</span> <span class="k">import</span> <span class="n">_read_segy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">segy</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">headonly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">segy</span><span class="o">.</span><span class="n">traces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>
<span class="go">2001</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing">
<h2>Writing<a class="headerlink" href="#writing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writing-obspy-stream-objects">
<h3>Writing ObsPy <a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> objects<a class="headerlink" href="#writing-obspy-stream-objects" title="Permalink to this headline">¶</a></h3>
<p>Writing <a class="reference internal" href="autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="obspy.core.stream.Stream"><code class="xref py py-class docutils literal"><span class="pre">Stream</span></code></a> objects is done in the usual way.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;file.segy&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;SEGY&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;file.su&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;SU&#39;</span><span class="p">)</span> 
</pre></div>
</div>
<p>It is possible to control the data encoding, the byte order and the textual
header encoding of the final file either via the file wide stats object (see
sample code below) or directly via the write method. Possible values and their
meaning are documented here: <a class="reference internal" href="autogen/obspy.io.segy.core._write_segy.html#obspy.io.segy.core._write_segy" title="obspy.io.segy.core._write_segy"><code class="xref py py-func docutils literal"><span class="pre">_write_segy()</span></code></a></p>
</div>
<div class="section" id="writing-segyfile-objects">
<h3>Writing <a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYFile.html#obspy.io.segy.segy.SEGYFile" title="obspy.io.segy.segy.SEGYFile"><code class="xref py py-class docutils literal"><span class="pre">SEGYFile</span></code></a> objects<a class="headerlink" href="#writing-segyfile-objects" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYFile.html#obspy.io.segy.segy.SEGYFile" title="obspy.io.segy.segy.SEGYFile"><code class="xref py py-class docutils literal"><span class="pre">SEGYFile</span></code></a> objects are written using its
<a class="reference internal" href="autogen/obspy.io.segy.segy.SEGYFile.write.html#obspy.io.segy.segy.SEGYFile.write" title="obspy.io.segy.segy.SEGYFile.write"><code class="xref py py-func docutils literal"><span class="pre">write()</span></code></a> method. Optional kwargs are able to
enforce the data encoding and the byte order.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">segy</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;file.segy&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="section" id="converting-other-file-formats-to-seg-y">
<h3>Converting other file formats to SEG Y<a class="headerlink" href="#converting-other-file-formats-to-seg-y" title="Permalink to this headline">¶</a></h3>
<p>SEGY files are sensitive to their headers and wrong headers might break them.</p>
<p>If some or all headers are missing, obspy.io.segy will attempt to autogenerate
them and fill them with somehow meaningful values. It is a wise idea to
manually check the headers because some other programs might use them and
misinterpret the data. Most header values will be 0 nonetheless.</p>
<p>One possibility to get valid headers for files to be converted is to read one
correct SEG Y file and use its headers.</p>
<p>The other possibility is to autogenerate the headers with the help of ObsPy and
a potential manual review of them which is demonstrated in the following
script:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">obspy</span> <span class="k">import</span> <span class="n">read</span><span class="p">,</span> <span class="n">Trace</span><span class="p">,</span> <span class="n">Stream</span><span class="p">,</span> <span class="n">UTCDateTime</span>
<span class="kn">from</span> <span class="nn">obspy.core</span> <span class="k">import</span> <span class="n">AttribDict</span>
<span class="kn">from</span> <span class="nn">obspy.io.segy.segy</span> <span class="k">import</span> <span class="n">SEGYTraceHeader</span><span class="p">,</span> <span class="n">SEGYBinaryFileHeader</span>
<span class="kn">from</span> <span class="nn">obspy.io.segy.core</span> <span class="k">import</span> <span class="n">_read_segy</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>

<span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="c1"># Create some random data.</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">ranf</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">trace</span> <span class="o">=</span> <span class="n">Trace</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Attributes in trace.stats will overwrite everything in</span>
    <span class="c1"># trace.stats.segy.trace_header</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="c1"># SEGY does not support microsecond precision! Any microseconds will</span>
    <span class="c1"># be discarded.</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>

    <span class="c1"># If you want to set some additional attributes in the trace header,</span>
    <span class="c1"># add one and only set the attributes you want to be set. Otherwise the</span>
    <span class="c1"># header will be created for you with default values.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="p">,</span> <span class="s1">&#39;segy.trace_header&#39;</span><span class="p">):</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span> <span class="o">=</span> <span class="n">SEGYTraceHeader</span><span class="p">()</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="o">.</span><span class="n">trace_sequence_number_within_line</span> <span class="o">=</span> <span class="n">_i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="o">.</span><span class="n">receiver_group_elevation</span> <span class="o">=</span> <span class="mi">444</span>

    <span class="c1"># Add trace to stream</span>
    <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace</span><span class="p">)</span>

<span class="c1"># A SEGY file has file wide headers. This can be attached to the stream</span>
<span class="c1"># object.  If these are not set, they will be autocreated with default</span>
<span class="c1"># values.</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">textual_file_header</span> <span class="o">=</span> <span class="s1">&#39;Textual Header!&#39;</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binary_file_header</span> <span class="o">=</span> <span class="n">SEGYBinaryFileHeader</span><span class="p">()</span>
<span class="n">stream</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binary_file_header</span><span class="o">.</span><span class="n">trace_sorting_code</span> <span class="o">=</span> <span class="mi">5</span>

<span class="nb">print</span> <span class="s2">&quot;Stream object before writing...&quot;</span>
<span class="nb">print</span> <span class="n">stream</span>

<span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;TEST.sgy&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;SEGY&quot;</span><span class="p">,</span> <span class="n">data_encoding</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
             <span class="n">byteorder</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">byteorder</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;Stream object after writing. Will have some segy attributes...&quot;</span>
<span class="nb">print</span> <span class="n">stream</span>

<span class="nb">print</span> <span class="s2">&quot;Reading using obspy.io.segy...&quot;</span>
<span class="n">st1</span> <span class="o">=</span> <span class="n">_read_segy</span><span class="p">(</span><span class="s2">&quot;TEST.sgy&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">st1</span>

<span class="nb">print</span> <span class="s2">&quot;Reading using obspy.core...&quot;</span>
<span class="n">st2</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s2">&quot;TEST.sgy&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">st2</span>

<span class="nb">print</span> <span class="s2">&quot;Just to show that the values are written...&quot;</span>
<span class="nb">print</span> <span class="p">[</span><span class="n">tr</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="o">.</span><span class="n">receiver_group_elevation</span>
       <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">]</span>
<span class="nb">print</span> <span class="p">[</span><span class="n">tr</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">segy</span><span class="o">.</span><span class="n">trace_header</span><span class="o">.</span><span class="n">receiver_group_elevation</span> <span class="k">for</span> <span class="n">tr</span> <span class="ow">in</span> <span class="n">st2</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">stream</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binary_file_header</span><span class="o">.</span><span class="n">trace_sorting_code</span>
<span class="nb">print</span> <span class="n">st1</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">binary_file_header</span><span class="o">.</span><span class="n">trace_sorting_code</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="autogen/obspy.io.segy.core.html#module-obspy.io.segy.core" title="obspy.io.segy.core"><code class="xref py py-obj docutils literal"><span class="pre">core</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/obspy.io.segy.segy.html#module-obspy.io.segy.segy" title="obspy.io.segy.segy"><code class="xref py py-obj docutils literal"><span class="pre">segy</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/obspy.io.segy.util.html#module-obspy.io.segy.util" title="obspy.io.segy.util"><code class="xref py py-obj docutils literal"><span class="pre">util</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/obspy.io.segy.header.html#module-obspy.io.segy.header" title="obspy.io.segy.header"><code class="xref py py-obj docutils literal"><span class="pre">header</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="autogen/obspy.io.segy.pack.html#module-obspy.io.segy.pack" title="obspy.io.segy.pack"><code class="xref py py-obj docutils literal"><span class="pre">pack</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="autogen/obspy.io.segy.unpack.html#module-obspy.io.segy.unpack" title="obspy.io.segy.unpack"><code class="xref py py-obj docutils literal"><span class="pre">unpack</span></code></a></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>


</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>