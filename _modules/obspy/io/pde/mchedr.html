<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.pde.mchedr &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.io.pde.mchedr</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">NEIC PDE mchedr (machine-readable Earthquake Data Report) read support.</span>

<span class="sd">Only supports file format revision of February 24, 2004.</span>

<span class="sd">.. seealso:: http://earthquake.usgs.gov/data/pde.php</span>

<span class="sd">:copyright:</span>
<span class="sd">    The ObsPy Development Team (devs@obspy.org), Claudio Satriano</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="kn">from</span> <span class="nn">future.utils</span> <span class="k">import</span> <span class="n">native_str</span>

<span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">timedelta</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">string</span> <span class="k">as</span> <span class="nn">s</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">obspy.core.event</span> <span class="k">import</span> <span class="p">(</span><span class="n">Amplitude</span><span class="p">,</span> <span class="n">Arrival</span><span class="p">,</span> <span class="n">Axis</span><span class="p">,</span> <span class="n">Catalog</span><span class="p">,</span> <span class="n">Comment</span><span class="p">,</span>
                              <span class="n">ConfidenceEllipsoid</span><span class="p">,</span> <span class="n">CreationInfo</span><span class="p">,</span> <span class="n">DataUsed</span><span class="p">,</span>
                              <span class="n">Event</span><span class="p">,</span> <span class="n">EventDescription</span><span class="p">,</span> <span class="n">FocalMechanism</span><span class="p">,</span>
                              <span class="n">Magnitude</span><span class="p">,</span> <span class="n">MomentTensor</span><span class="p">,</span> <span class="n">NodalPlane</span><span class="p">,</span> <span class="n">NodalPlanes</span><span class="p">,</span>
                              <span class="n">Origin</span><span class="p">,</span> <span class="n">OriginQuality</span><span class="p">,</span> <span class="n">OriginUncertainty</span><span class="p">,</span> <span class="n">Pick</span><span class="p">,</span>
                              <span class="n">PrincipalAxes</span><span class="p">,</span> <span class="n">QuantityError</span><span class="p">,</span> <span class="n">ResourceIdentifier</span><span class="p">,</span>
                              <span class="n">StationMagnitude</span><span class="p">,</span> <span class="n">Tensor</span><span class="p">,</span> <span class="n">WaveformStreamID</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">obspy.core.utcdatetime</span> <span class="k">import</span> <span class="n">UTCDateTime</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.decorator</span> <span class="k">import</span> <span class="n">map_example_filename</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.deprecation_helpers</span> <span class="k">import</span> \
    <span class="n">DynamicAttributeImportRerouteModule</span>
<span class="kn">from</span> <span class="nn">obspy.geodetics</span> <span class="k">import</span> <span class="n">FlinnEngdahl</span>


<span class="c1"># ResourceIdentifier prefix used throughout this code</span>
<span class="n">res_id_prefix</span> <span class="o">=</span> <span class="s1">&#39;quakeml:us.anss.org&#39;</span>


<div class="viewcode-block" id="_is_mchedr"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr._is_mchedr.html#obspy.io.pde.mchedr._is_mchedr">[docs]</a><span class="nd">@map_example_filename</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_is_mchedr</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether a file format is mchedr</span>
<span class="sd">    (machine-readable Earthquake Data Report).</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the mchedr file to be checked.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    :return: ``True`` if mchedr file.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; _is_mchedr(&#39;/path/to/mchedr.dat&#39;)  # doctest: +SKIP</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">native_str</span><span class="p">)):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="c1"># skip blank lines at beginning, if any</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># first record has to be &#39;HY&#39;:</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;HY&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Unpickler"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler.html#obspy.io.pde.mchedr.Unpickler">[docs]</a><span class="k">class</span> <span class="nc">Unpickler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    De-serializes a mchedr string into an ObsPy Catalog object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Unpickler.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler.__init__.html#obspy.io.pde.mchedr.Unpickler.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flinn_engdahl</span> <span class="o">=</span> <span class="n">FlinnEngdahl</span><span class="p">()</span></div>

<div class="viewcode-block" id="Unpickler.load"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler.load.html#obspy.io.pde.mchedr.Unpickler.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads mchedr file into ObsPy catalog object.</span>

<span class="sd">        :type file: str</span>
<span class="sd">        :param file: File name to read.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.Catalog`</span>
<span class="sd">        :returns: ObsPy Catalog object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">native_str</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;File name must be a string.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize</span><span class="p">()</span></div>

<div class="viewcode-block" id="Unpickler.loads"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler.loads.html#obspy.io.pde.mchedr.Unpickler.loads">[docs]</a>    <span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses mchedr string into ObsPy catalog object.</span>

<span class="sd">        :type string: str</span>
<span class="sd">        :param string: QuakeML string to parse.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.Catalog`</span>
<span class="sd">        :returns: ObsPy Catalog object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fh</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize</span><span class="p">()</span></div>

<div class="viewcode-block" id="Unpickler._int"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._int.html#obspy.io.pde.mchedr.Unpickler._int">[docs]</a>    <span class="k">def</span> <span class="nf">_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Unpickler._int_unused"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._int_unused.html#obspy.io.pde.mchedr.Unpickler._int_unused">[docs]</a>    <span class="k">def</span> <span class="nf">_int_unused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="Unpickler._int_zero"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._int_zero.html#obspy.io.pde.mchedr.Unpickler._int_zero">[docs]</a>    <span class="k">def</span> <span class="nf">_int_zero</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="Unpickler._float"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._float.html#obspy.io.pde.mchedr.Unpickler._float">[docs]</a>    <span class="k">def</span> <span class="nf">_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Unpickler._float_unused"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._float_unused.html#obspy.io.pde.mchedr.Unpickler._float_unused">[docs]</a>    <span class="k">def</span> <span class="nf">_float_unused</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">string</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="Unpickler._float_with_format"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._float_with_format.html#obspy.io.pde.mchedr.Unpickler._float_with_format">[docs]</a>    <span class="k">def</span> <span class="nf">_float_with_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">format_string</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">ndigits</span><span class="p">,</span> <span class="n">ndec</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">format_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">))</span>
        <span class="n">nint</span> <span class="o">=</span> <span class="n">ndigits</span> <span class="o">-</span> <span class="n">ndec</span>
        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">string</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">nint</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">string</span><span class="p">[</span><span class="n">nint</span><span class="p">:</span><span class="n">nint</span> <span class="o">+</span> <span class="n">ndec</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">*=</span> <span class="n">scale</span>
        <span class="k">return</span> <span class="n">val</span></div>

<div class="viewcode-block" id="Unpickler._store_uncertainty"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._store_uncertainty.html#obspy.io.pde.mchedr.Unpickler._store_uncertainty">[docs]</a>    <span class="k">def</span> <span class="nf">_store_uncertainty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">QuantityError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;error&#39; is not a &#39;QuantityError&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">error</span><span class="p">[</span><span class="s1">&#39;uncertainty&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="n">scale</span></div>

<div class="viewcode-block" id="Unpickler._coordinate_sign"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._coordinate_sign.html#obspy.io.pde.mchedr.Unpickler._coordinate_sign">[docs]</a>    <span class="k">def</span> <span class="nf">_coordinate_sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span> <span class="ow">or</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Unpickler._tensor_code_sign"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._tensor_code_sign.html#obspy.io.pde.mchedr.Unpickler._tensor_code_sign">[docs]</a>    <span class="k">def</span> <span class="nf">_tensor_code_sign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts tensor from &#39;x,y,z&#39; system to &#39;r,t,p&#39;</span>
<span class="sd">        and translates &#39;f&#39; code to &#39;p&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">system</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;xx&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tt&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;yy&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;pp&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;zz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;rr&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                  <span class="s1">&#39;xy&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tp&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;xz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;yz&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;rp&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                  <span class="s1">&#39;ff&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;pp&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;rf&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;rp&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;tf&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;tp&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">system</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span></div>

<div class="viewcode-block" id="Unpickler._tensor_store"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._tensor_store.html#obspy.io.pde.mchedr.Unpickler._tensor_store">[docs]</a>    <span class="k">def</span> <span class="nf">_tensor_store</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tensor</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
        <span class="n">code</span><span class="p">,</span> <span class="n">sign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tensor_code_sign</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;rr&#39;</span><span class="p">,</span> <span class="s1">&#39;tt&#39;</span><span class="p">,</span> <span class="s1">&#39;pp&#39;</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">,</span> <span class="s1">&#39;rp&#39;</span><span class="p">,</span> <span class="s1">&#39;tp&#39;</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">tensor</span><span class="p">,</span> <span class="s2">&quot;m_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">code</span><span class="p">,</span> <span class="n">value</span> <span class="o">*</span> <span class="n">sign</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">tensor</span><span class="p">,</span> <span class="s2">&quot;m_</span><span class="si">%s</span><span class="s2">_errors&quot;</span> <span class="o">%</span> <span class="n">code</span><span class="p">),</span>
                                    <span class="n">error</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._decode_fe_region_number"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._decode_fe_region_number.html#obspy.io.pde.mchedr.Unpickler._decode_fe_region_number">[docs]</a>    <span class="k">def</span> <span class="nf">_decode_fe_region_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts Flinn-Engdahl region number to string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">flinn_engdahl</span><span class="o">.</span><span class="n">get_region_by_number</span><span class="p">(</span><span class="n">number</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._to_rad"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._to_rad.html#obspy.io.pde.mchedr.Unpickler._to_rad">[docs]</a>    <span class="k">def</span> <span class="nf">_to_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">degrees</span><span class="p">):</span>
        <span class="n">radians</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">degrees</span> <span class="o">/</span> <span class="mi">180</span>
        <span class="k">return</span> <span class="n">radians</span></div>

<div class="viewcode-block" id="Unpickler._to_deg"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._to_deg.html#obspy.io.pde.mchedr.Unpickler._to_deg">[docs]</a>    <span class="k">def</span> <span class="nf">_to_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radians</span><span class="p">):</span>
        <span class="n">degrees</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">*</span> <span class="n">radians</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="k">return</span> <span class="n">degrees</span></div>

<div class="viewcode-block" id="Unpickler._spherical_to_cartesian"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._spherical_to_cartesian.html#obspy.io.pde.mchedr.Unpickler._spherical_to_cartesian">[docs]</a>    <span class="k">def</span> <span class="nf">_spherical_to_cartesian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spherical_coords</span><span class="p">):</span>
        <span class="n">length</span><span class="p">,</span> <span class="n">azimuth</span><span class="p">,</span> <span class="n">plunge</span> <span class="o">=</span> <span class="n">spherical_coords</span>
        <span class="n">plunge_rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_rad</span><span class="p">(</span><span class="n">plunge</span><span class="p">)</span>
        <span class="n">azimuth_rad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_rad</span><span class="p">(</span><span class="n">azimuth</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">plunge_rad</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">azimuth_rad</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">plunge_rad</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">azimuth_rad</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">length</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">plunge_rad</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._angle_between"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._angle_between.html#obspy.io.pde.mchedr.Unpickler._angle_between">[docs]</a>    <span class="k">def</span> <span class="nf">_angle_between</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the angle in degrees between unit vectors &#39;u1&#39; and &#39;u2&#39;:</span>
<span class="sd">        Source: https://stackoverflow.com/q/2827393</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">angle</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">u1</span> <span class="o">==</span> <span class="n">u2</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_deg</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._lat_err_to_deg"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._lat_err_to_deg.html#obspy.io.pde.mchedr.Unpickler._lat_err_to_deg">[docs]</a>    <span class="k">def</span> <span class="nf">_lat_err_to_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">latitude_stderr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert latitude error from km to degrees</span>
<span class="sd">        using a simple formula</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">latitude_stderr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">latitude_stderr</span> <span class="o">/</span> <span class="mf">111.1949</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Unpickler._lon_err_to_deg"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._lon_err_to_deg.html#obspy.io.pde.mchedr.Unpickler._lon_err_to_deg">[docs]</a>    <span class="k">def</span> <span class="nf">_lon_err_to_deg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">longitude_stderr</span><span class="p">,</span> <span class="n">latitude</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert longitude error from km to degrees</span>
<span class="sd">        using a simple formula</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">longitude_stderr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">latitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">round</span><span class="p">(</span><span class="n">longitude_stderr</span> <span class="o">/</span>
                         <span class="p">(</span><span class="mf">111.1949</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_rad</span><span class="p">(</span><span class="n">latitude</span><span class="p">))),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_hy"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_hy.html#obspy.io.pde.mchedr.Unpickler._parse_record_hy">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_hy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;hypocenter&#39; record HY</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">11</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span>
        <span class="c1"># unused: location_quality = line[20]</span>
        <span class="n">latitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">21</span><span class="p">:</span><span class="mi">27</span><span class="p">])</span>
        <span class="n">lat_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">27</span><span class="p">]</span>
        <span class="n">longitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">29</span><span class="p">:</span><span class="mi">36</span><span class="p">])</span>
        <span class="n">lon_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">36</span><span class="p">]</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">38</span><span class="p">:</span><span class="mi">43</span><span class="p">])</span>
        <span class="c1"># unused: depth_quality = line[43]</span>
        <span class="n">standard_dev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">44</span><span class="p">:</span><span class="mi">48</span><span class="p">])</span>
        <span class="n">station_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">51</span><span class="p">])</span>
        <span class="c1"># unused: version_flag = line[51]</span>
        <span class="n">fe_region_number</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">]</span>
        <span class="n">fe_region_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_decode_fe_region_number</span><span class="p">(</span><span class="n">fe_region_number</span><span class="p">)</span>
        <span class="n">source_code</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">55</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>
        <span class="c1"># FIXME: a smarter way to define evid?</span>
        <span class="n">evid</span> <span class="o">=</span> <span class="n">date</span> <span class="o">+</span> <span class="n">time</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">))</span>
        <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">EventDescription</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;region name&#39;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">fe_region_name</span><span class="p">)</span>
        <span class="n">event</span><span class="o">.</span><span class="n">event_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">EventDescription</span><span class="p">(</span>
            <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;Flinn-Engdahl region&#39;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">fe_region_number</span><span class="p">)</span>
        <span class="n">event</span><span class="o">.</span><span class="n">event_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">description</span><span class="p">)</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Origin</span><span class="p">()</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">))</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">source_code</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span> <span class="o">=</span> <span class="n">source_code</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span> <span class="o">=</span> <span class="s1">&#39;USGS-NEIC&#39;</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;earthmodel/ak135&#39;</span><span class="p">))</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">earth_model_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">time</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lat_type</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lon_type</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">depth</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;from location&#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="n">OriginQuality</span><span class="p">()</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_station_count</span> <span class="o">=</span> <span class="n">station_number</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">standard_error</span> <span class="o">=</span> <span class="n">standard_dev</span>
        <span class="c1"># associated_phase_count can be incremented in records &#39;P &#39; and &#39;S &#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_phase_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># depth_phase_count can be incremented in record &#39;S &#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">depth_phase_count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;hypocenter&#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">region</span> <span class="o">=</span> <span class="n">fe_region_name</span>
        <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">event</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_e"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_e.html#obspy.io.pde.mchedr.Unpickler._parse_record_e">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_e</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;error and magnitude&#39; record E</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">orig_time_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">latitude_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">14</span><span class="p">])</span>
        <span class="n">longitude_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">21</span><span class="p">])</span>
        <span class="n">depth_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">22</span><span class="p">:</span><span class="mi">27</span><span class="p">])</span>
        <span class="n">mb_mag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">28</span><span class="p">:</span><span class="mi">31</span><span class="p">])</span>
        <span class="n">mb_nsta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">32</span><span class="p">:</span><span class="mi">35</span><span class="p">])</span>
        <span class="n">ms_mag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">36</span><span class="p">:</span><span class="mi">39</span><span class="p">])</span>
        <span class="n">ms_nsta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">39</span><span class="p">:</span><span class="mi">42</span><span class="p">])</span>
        <span class="n">mag1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">42</span><span class="p">:</span><span class="mi">45</span><span class="p">])</span>
        <span class="n">mag1_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">45</span><span class="p">:</span><span class="mi">47</span><span class="p">]</span>
        <span class="n">mag1_source_code</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">47</span><span class="p">:</span><span class="mi">51</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">mag2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">54</span><span class="p">])</span>
        <span class="n">mag2_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">54</span><span class="p">:</span><span class="mi">56</span><span class="p">]</span>
        <span class="n">mag2_source_code</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">56</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">time_errors</span><span class="p">,</span> <span class="n">orig_time_stderr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">latitude_errors</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_lat_err_to_deg</span><span class="p">(</span><span class="n">latitude_stderr</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">longitude_errors</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_lon_err_to_deg</span><span class="p">(</span><span class="n">longitude_stderr</span><span class="p">,</span>
                                                     <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">depth_errors</span><span class="p">,</span> <span class="n">depth_stderr</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mb_mag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="s1">&#39;mb&#39;</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="s1">&#39;USGS-NEIC&#39;</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mb_mag</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="s1">&#39;Mb&#39;</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">station_count</span> <span class="o">=</span> <span class="n">mb_nsta</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ms_mag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="s1">&#39;ms&#39;</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="s1">&#39;USGS-NEIC&#39;</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">ms_mag</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="s1">&#39;Ms&#39;</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">station_count</span> <span class="o">=</span> <span class="n">ms_nsta</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mag1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">mag1_id</span> <span class="o">=</span> <span class="n">mag1_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">mag1_id</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="n">mag1_source_code</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mag1</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="n">mag1_type</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mag2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">mag2_id</span> <span class="o">=</span> <span class="n">mag2_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">mag2_id</span> <span class="o">==</span> <span class="n">mag1_id</span><span class="p">:</span>
                <span class="n">mag2_id</span> <span class="o">+=</span> <span class="s1">&#39;2&#39;</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">mag2_id</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="n">mag2_source_code</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mag2</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="n">mag2_type</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_l"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_l.html#obspy.io.pde.mchedr.Unpickler._parse_record_l">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_l</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;90 percent error ellipse&#39; record L</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">semi_major_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">8</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">semi_major_axis_azimuth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">semi_major_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">13</span><span class="p">])</span>
        <span class="n">semi_major_axis_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">])</span>
        <span class="n">intermediate_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">21</span><span class="p">:</span><span class="mi">27</span><span class="p">])</span>
        <span class="n">intermediate_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">27</span><span class="p">:</span><span class="mi">32</span><span class="p">])</span>
        <span class="c1"># This is called &quot;intermediate_axis_length&quot;,</span>
        <span class="c1"># but it is definitively a &quot;semi_intermediate_axis_length&quot;,</span>
        <span class="c1"># since in most cases:</span>
        <span class="c1">#   (intermediate_axis_length / 2) &lt; semi_minor_axis_length</span>
        <span class="n">intermediate_axis_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">32</span><span class="p">:</span><span class="mi">40</span><span class="p">])</span>
        <span class="n">semi_minor_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">46</span><span class="p">])</span>
        <span class="n">semi_minor_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">46</span><span class="p">:</span><span class="mi">51</span><span class="p">])</span>
        <span class="n">semi_minor_axis_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">59</span><span class="p">])</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">semi_minor_axis_azimuth</span> <span class="o">==</span>
           <span class="n">semi_minor_axis_plunge</span> <span class="o">==</span>
           <span class="n">semi_minor_axis_length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>
            <span class="n">semi_minor_axis_azimuth</span> <span class="o">=</span> <span class="n">intermediate_axis_azimuth</span>
            <span class="n">semi_minor_axis_plunge</span> <span class="o">=</span> <span class="n">intermediate_axis_plunge</span>
            <span class="n">semi_minor_axis_length</span> <span class="o">=</span> <span class="n">intermediate_axis_length</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;operator assigned&#39;</span>

        <span class="c1"># FIXME: The following code needs to be double-checked!</span>
        <span class="n">semi_major_axis_unit_vect</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_spherical_to_cartesian</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span>
                                          <span class="n">semi_major_axis_azimuth</span><span class="p">,</span>
                                          <span class="n">semi_major_axis_plunge</span><span class="p">))</span>
        <span class="n">semi_minor_axis_unit_vect</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_spherical_to_cartesian</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span>
                                          <span class="n">semi_minor_axis_azimuth</span><span class="p">,</span>
                                          <span class="n">semi_minor_axis_plunge</span><span class="p">))</span>
        <span class="n">major_axis_rotation</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_angle_between</span><span class="p">(</span><span class="n">semi_major_axis_unit_vect</span><span class="p">,</span>
                                <span class="n">semi_minor_axis_unit_vect</span><span class="p">)</span>

        <span class="n">origin</span><span class="o">.</span><span class="n">origin_uncertainty</span> <span class="o">=</span> <span class="n">OriginUncertainty</span><span class="p">()</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">origin_uncertainty</span><span class="o">.</span><span class="n">preferred_description</span> <span class="o">=</span> \
            <span class="s1">&#39;confidence ellipsoid&#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">origin_uncertainty</span><span class="o">.</span><span class="n">confidence_level</span> <span class="o">=</span> <span class="mi">90</span>
        <span class="n">confidence_ellipsoid</span> <span class="o">=</span> <span class="n">ConfidenceEllipsoid</span><span class="p">()</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">semi_major_axis_length</span> <span class="o">=</span> \
            <span class="n">semi_major_axis_length</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">semi_minor_axis_length</span> <span class="o">=</span> \
            <span class="n">semi_minor_axis_length</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">semi_intermediate_axis_length</span> <span class="o">=</span> \
            <span class="n">intermediate_axis_length</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">major_axis_plunge</span> <span class="o">=</span> <span class="n">semi_major_axis_plunge</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">major_axis_azimuth</span> <span class="o">=</span> <span class="n">semi_major_axis_azimuth</span>
        <span class="c1"># We need to add 90 to match NEIC QuakeML format,</span>
        <span class="c1"># but I don&#39;t understand why...</span>
        <span class="n">confidence_ellipsoid</span><span class="o">.</span><span class="n">major_axis_rotation</span> <span class="o">=</span> \
            <span class="n">major_axis_rotation</span> <span class="o">+</span> <span class="mi">90</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">origin_uncertainty</span><span class="o">.</span><span class="n">confidence_ellipsoid</span> <span class="o">=</span> <span class="n">confidence_ellipsoid</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_a"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_a.html#obspy.io.pde.mchedr.Unpickler._parse_record_a">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_a</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;additional parameters&#39; record A</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">phase_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">])</span>
        <span class="n">station_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">15</span><span class="p">])</span>
        <span class="c1"># unused: official_mag = line[16:19]</span>
        <span class="c1"># unused: official_mag_type = line[19:21]</span>
        <span class="c1"># unused: official_mag_source_code = line[21:26]</span>
        <span class="c1"># unused: deaths_field_descriptor = line[27]</span>
        <span class="c1"># unused: dead_people = line[28:35]</span>
        <span class="c1"># unused: injuries_field_descriptor = line[35]</span>
        <span class="c1"># unused: injured_people = line[36:43]</span>
        <span class="c1"># unused: damaged_buildings_descriptor = line[43]</span>
        <span class="c1"># unused: damaged_buildings = line[44:51]</span>
        <span class="c1"># unused: event_quality_flag = line[51]</span>

        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_phase_count</span> <span class="o">=</span> <span class="n">phase_number</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_station_count</span> <span class="o">=</span> <span class="n">station_number</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">azimuthal_gap</span> <span class="o">=</span> <span class="n">gap</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_c"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_c.html#obspy.io.pde.mchedr.Unpickler._parse_record_c">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_c</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;general comment&#39; record C</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">()</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">res_id_prefix</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
        <span class="c1"># strip non printable-characters</span>
        <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">printable</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_ah"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_ah.html#obspy.io.pde.mchedr.Unpickler._parse_record_ah">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_ah</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;additional hypocenter&#39; record AH</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">11</span><span class="p">:</span><span class="mi">20</span><span class="p">]</span>
        <span class="c1"># unused: hypocenter_quality = line[20]</span>
        <span class="n">latitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">21</span><span class="p">:</span><span class="mi">27</span><span class="p">])</span>
        <span class="n">lat_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">27</span><span class="p">]</span>
        <span class="n">longitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">29</span><span class="p">:</span><span class="mi">36</span><span class="p">])</span>
        <span class="n">lon_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">36</span><span class="p">]</span>
        <span class="c1"># unused: preliminary_flag = line[37]</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">38</span><span class="p">:</span><span class="mi">43</span><span class="p">])</span>
        <span class="c1"># unused: depth_quality = line[43]</span>
        <span class="n">standard_dev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">44</span><span class="p">:</span><span class="mi">48</span><span class="p">])</span>
        <span class="n">station_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">51</span><span class="p">])</span>
        <span class="n">phase_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">55</span><span class="p">])</span>
        <span class="n">source_code</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">56</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">Origin</span><span class="p">()</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">source_code</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="n">source_code</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">time</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">latitude</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lat_type</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">longitude</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lon_type</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">depth</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;from location&#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="n">OriginQuality</span><span class="p">()</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">standard_error</span> <span class="o">=</span> <span class="n">standard_dev</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_station_count</span> <span class="o">=</span> <span class="n">station_number</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_phase_count</span> <span class="o">=</span> <span class="n">phase_number</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;hypocenter&#39;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_ae"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_ae.html#obspy.io.pde.mchedr.Unpickler._parse_record_ae">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_ae</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;additional hypocenter error and magnitude record&#39; AE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">orig_time_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">latitude_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">14</span><span class="p">])</span>
        <span class="n">longitude_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">21</span><span class="p">])</span>
        <span class="n">depth_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">22</span><span class="p">:</span><span class="mi">27</span><span class="p">])</span>
        <span class="n">gap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_unused</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">28</span><span class="p">:</span><span class="mi">33</span><span class="p">])</span>
        <span class="n">mag1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">33</span><span class="p">:</span><span class="mi">36</span><span class="p">])</span>
        <span class="n">mag1_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">36</span><span class="p">:</span><span class="mi">38</span><span class="p">]</span>
        <span class="n">mag2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">43</span><span class="p">:</span><span class="mi">46</span><span class="p">])</span>
        <span class="n">mag2_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">46</span><span class="p">:</span><span class="mi">48</span><span class="p">]</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># this record is to be associated to the latest origin</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">time_errors</span><span class="p">,</span> <span class="n">orig_time_stderr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">latitude_errors</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_lat_err_to_deg</span><span class="p">(</span><span class="n">latitude_stderr</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">longitude_errors</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_lon_err_to_deg</span><span class="p">(</span><span class="n">longitude_stderr</span><span class="p">,</span>
                                                     <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">depth_errors</span><span class="p">,</span> <span class="n">depth_stderr</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">azimuthal_gap</span> <span class="o">=</span> <span class="n">gap</span>
        <span class="k">if</span> <span class="n">mag1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">mag1_id</span> <span class="o">=</span> <span class="n">mag1_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">mag1_id</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span>
                <span class="n">agency_id</span><span class="o">=</span><span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mag1</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="n">mag1_type</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mag2</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mag</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
            <span class="n">mag2_id</span> <span class="o">=</span> <span class="n">mag2_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">mag2_id</span> <span class="o">==</span> <span class="n">mag1_id</span><span class="p">:</span>
                <span class="n">mag2_id</span> <span class="o">+=</span> <span class="s1">&#39;2&#39;</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">mag2_id</span><span class="p">))</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span>
                <span class="n">agency_id</span><span class="o">=</span><span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span><span class="p">)</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mag2</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="n">mag2_type</span>
            <span class="n">mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_dp"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_dp.html#obspy.io.pde.mchedr.Unpickler._parse_record_dp">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_dp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;source parameter data - primary&#39; record Dp</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">source_contributor</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">computation_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">exponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
        <span class="n">centroid_origin_time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">14</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="mi">14</span><span class="p">]</span>
        <span class="n">orig_time_stderr</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">17</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">orig_time_stderr</span> <span class="o">==</span> <span class="s1">&#39;FX&#39;</span><span class="p">:</span>
            <span class="n">orig_time_stderr</span> <span class="o">=</span> <span class="s1">&#39;Fixed&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">orig_time_stderr</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">orig_time_stderr</span><span class="p">,</span> <span class="s1">&#39;2.1&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">centroid_latitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;4.2&#39;</span><span class="p">)</span>
        <span class="n">lat_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">21</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">centroid_latitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">centroid_latitude</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lat_type</span><span class="p">)</span>
        <span class="n">lat_stderr</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">22</span><span class="p">:</span><span class="mi">25</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lat_stderr</span> <span class="o">==</span> <span class="s1">&#39;FX&#39;</span><span class="p">:</span>
            <span class="n">lat_stderr</span> <span class="o">=</span> <span class="s1">&#39;Fixed&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lat_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">lat_stderr</span><span class="p">,</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">centroid_longitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">25</span><span class="p">:</span><span class="mi">30</span><span class="p">],</span> <span class="s1">&#39;5.2&#39;</span><span class="p">)</span>
        <span class="n">lon_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">30</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">centroid_longitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">centroid_longitude</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coordinate_sign</span><span class="p">(</span><span class="n">lon_type</span><span class="p">)</span>
        <span class="n">lon_stderr</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">31</span><span class="p">:</span><span class="mi">34</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">lon_stderr</span> <span class="o">==</span> <span class="s1">&#39;FX&#39;</span><span class="p">:</span>
            <span class="n">lon_stderr</span> <span class="o">=</span> <span class="s1">&#39;Fixed&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lon_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">lon_stderr</span><span class="p">,</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">centroid_depth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">34</span><span class="p">:</span><span class="mi">38</span><span class="p">],</span> <span class="s1">&#39;4.1&#39;</span><span class="p">)</span>
        <span class="n">depth_stderr</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">38</span><span class="p">:</span><span class="mi">40</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">depth_stderr</span> <span class="o">==</span> <span class="s1">&#39;FX&#39;</span> <span class="ow">or</span> <span class="n">depth_stderr</span> <span class="o">==</span> <span class="s1">&#39;BD&#39;</span><span class="p">:</span>
            <span class="n">depth_stderr</span> <span class="o">=</span> <span class="s1">&#39;Fixed&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">depth_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">depth_stderr</span><span class="p">,</span> <span class="s1">&#39;2.1&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">station_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">40</span><span class="p">:</span><span class="mi">43</span><span class="p">])</span>
        <span class="n">component_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">43</span><span class="p">:</span><span class="mi">46</span><span class="p">])</span>
        <span class="n">station_number2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">46</span><span class="p">:</span><span class="mi">48</span><span class="p">])</span>
        <span class="n">component_number2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">51</span><span class="p">])</span>
        <span class="c1"># unused: half_duration = self._float_with_format(line[51:54], &#39;3.1&#39;)</span>
        <span class="n">moment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">54</span><span class="p">:</span><span class="mi">56</span><span class="p">],</span> <span class="s1">&#39;2.1&#39;</span><span class="p">)</span>
        <span class="n">moment_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">56</span><span class="p">:</span><span class="mi">58</span><span class="p">],</span> <span class="s1">&#39;2.1&#39;</span><span class="p">)</span>
        <span class="n">moment_exponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">58</span><span class="p">:</span><span class="mi">60</span><span class="p">])</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">moment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">moment_exponent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">moment</span> <span class="o">*=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">moment_exponent</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">moment_stderr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">moment_exponent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">moment_stderr</span> <span class="o">*=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">moment_exponent</span><span class="p">)</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># Create a new origin only if centroid time is defined:</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">centroid_origin_time</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
            <span class="n">origin</span> <span class="o">=</span> <span class="n">Origin</span><span class="p">()</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">,</span>
                               <span class="n">evid</span><span class="p">,</span> <span class="n">source_contributor</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                               <span class="s1">&#39;mw&#39;</span> <span class="o">+</span> <span class="n">computation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> \
                <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="n">source_contributor</span><span class="p">)</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">centroid_origin_time</span><span class="p">)</span>
            <span class="c1"># Check if centroid time is on the next day:</span>
            <span class="k">if</span> <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">time</span><span class="p">:</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">time_errors</span><span class="p">,</span> <span class="n">orig_time_stderr</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">centroid_latitude</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">centroid_longitude</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">centroid_depth</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="k">if</span> <span class="n">lat_stderr</span> <span class="o">==</span> <span class="s1">&#39;Fixed&#39;</span> <span class="ow">and</span> <span class="n">lon_stderr</span> <span class="o">==</span> <span class="s1">&#39;Fixed&#39;</span><span class="p">:</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">epicenter_fixed</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">latitude_errors</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_lat_err_to_deg</span><span class="p">(</span><span class="n">lat_stderr</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">longitude_errors</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">_lon_err_to_deg</span><span class="p">(</span><span class="n">lon_stderr</span><span class="p">,</span>
                                                             <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">depth_stderr</span> <span class="o">==</span> <span class="s1">&#39;Fixed&#39;</span><span class="p">:</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;operator assigned&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;from location&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">depth_errors</span><span class="p">,</span>
                                        <span class="n">depth_stderr</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
            <span class="n">quality</span> <span class="o">=</span> <span class="n">OriginQuality</span><span class="p">()</span>
            <span class="n">quality</span><span class="o">.</span><span class="n">used_station_count</span> <span class="o">=</span> \
                <span class="n">station_number</span> <span class="o">+</span> <span class="n">station_number2</span>
            <span class="n">quality</span><span class="o">.</span><span class="n">used_phase_count</span> <span class="o">=</span> \
                <span class="n">component_number</span> <span class="o">+</span> <span class="n">component_number2</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="n">quality</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;centroid&#39;</span>
            <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span>
        <span class="n">focal_mechanism</span> <span class="o">=</span> <span class="n">FocalMechanism</span><span class="p">()</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;focalmechanism&#39;</span><span class="p">,</span>
                           <span class="n">evid</span><span class="p">,</span> <span class="n">source_contributor</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                           <span class="s1">&#39;mw&#39;</span> <span class="o">+</span> <span class="n">computation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> \
            <span class="n">CreationInfo</span><span class="p">(</span><span class="n">agency_id</span><span class="o">=</span><span class="n">source_contributor</span><span class="p">)</span>
        <span class="n">moment_tensor</span> <span class="o">=</span> <span class="n">MomentTensor</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">origin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">moment_tensor</span><span class="o">.</span><span class="n">derived_origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># this is required for QuakeML validation:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;no-origin&#39;</span><span class="p">))</span>
            <span class="n">moment_tensor</span><span class="o">.</span><span class="n">derived_origin_id</span> <span class="o">=</span> \
                <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">mag</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mag</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span> <span class="o">==</span> <span class="n">source_contributor</span><span class="p">:</span>
                <span class="n">moment_tensor</span><span class="o">.</span><span class="n">moment_magnitude_id</span> <span class="o">=</span> <span class="n">mag</span><span class="o">.</span><span class="n">resource_id</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;momenttensor&#39;</span><span class="p">,</span>
                           <span class="n">evid</span><span class="p">,</span> <span class="n">source_contributor</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                           <span class="s1">&#39;mw&#39;</span> <span class="o">+</span> <span class="n">computation_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span>
        <span class="n">moment_tensor</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">moment_tensor</span><span class="o">.</span><span class="n">scalar_moment</span> <span class="o">=</span> <span class="n">moment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">moment_tensor</span><span class="o">.</span><span class="n">scalar_moment_errors</span><span class="p">,</span>
                                <span class="n">moment_stderr</span><span class="p">)</span>
        <span class="n">data_used</span> <span class="o">=</span> <span class="n">DataUsed</span><span class="p">()</span>
        <span class="n">data_used</span><span class="o">.</span><span class="n">station_count</span> <span class="o">=</span> <span class="n">station_number</span> <span class="o">+</span> <span class="n">station_number2</span>
        <span class="n">data_used</span><span class="o">.</span><span class="n">component_count</span> <span class="o">=</span> <span class="n">component_number</span> <span class="o">+</span> <span class="n">component_number2</span>
        <span class="k">if</span> <span class="n">computation_type</span> <span class="o">==</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;methodID=CMT&#39;</span><span class="p">))</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="c1"># CMT algorithm uses long-period body waves,</span>
            <span class="c1"># very-long-period surface waves and</span>
            <span class="c1"># intermediate period surface waves (since 2004</span>
            <span class="c1"># for shallow and intermediate-depth earthquakes</span>
            <span class="c1"># --Ekstrom et al., 2012)</span>
            <span class="n">data_used</span><span class="o">.</span><span class="n">wave_type</span> <span class="o">=</span> <span class="s1">&#39;combined&#39;</span>
        <span class="k">if</span> <span class="n">computation_type</span> <span class="o">==</span> <span class="s1">&#39;M&#39;</span><span class="p">:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;methodID=moment_tensor&#39;</span><span class="p">))</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="c1"># FIXME: not sure which kind of data is used by</span>
            <span class="c1"># &quot;moment tensor&quot; algorithm.</span>
            <span class="n">data_used</span><span class="o">.</span><span class="n">wave_type</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
        <span class="k">elif</span> <span class="n">computation_type</span> <span class="o">==</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;methodID=broadband_data&#39;</span><span class="p">))</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="c1"># FIXME: is &#39;combined&#39; correct here?</span>
            <span class="n">data_used</span><span class="o">.</span><span class="n">wave_type</span> <span class="o">=</span> <span class="s1">&#39;combined&#39;</span>
        <span class="k">elif</span> <span class="n">computation_type</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;methodID=P-wave_first_motion&#39;</span><span class="p">))</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">data_used</span><span class="o">.</span><span class="n">wave_type</span> <span class="o">=</span> <span class="s1">&#39;P waves&#39;</span>
        <span class="k">elif</span> <span class="n">computation_type</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;methodID=scalar_moment&#39;</span><span class="p">))</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="c1"># FIXME: not sure which kind of data is used</span>
            <span class="c1"># for scalar moment determination.</span>
            <span class="n">data_used</span><span class="o">.</span><span class="n">wave_type</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
        <span class="n">moment_tensor</span><span class="o">.</span><span class="n">data_used</span> <span class="o">=</span> <span class="p">[</span><span class="n">data_used</span><span class="p">]</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">moment_tensor</span> <span class="o">=</span> <span class="n">moment_tensor</span>
        <span class="n">event</span><span class="o">.</span><span class="n">focal_mechanisms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">focal_mechanism</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">focal_mechanism</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_dt"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_dt.html#obspy.io.pde.mchedr.Unpickler._parse_record_dt">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;source parameter data - tensor&#39; record Dt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tensor</span> <span class="o">=</span> <span class="n">Tensor</span><span class="p">()</span>
        <span class="n">exponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">51</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">6</span><span class="p">],</span> <span class="s1">&#39;4.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
            <span class="n">error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">6</span><span class="p">:</span><span class="n">i</span> <span class="o">+</span> <span class="mi">9</span><span class="p">],</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tensor_store</span><span class="p">(</span><span class="n">tensor</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">moment_tensor</span><span class="o">.</span><span class="n">tensor</span> <span class="o">=</span> <span class="n">tensor</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_da"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_da.html#obspy.io.pde.mchedr.Unpickler._parse_record_da">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_da</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;source parameter data - principal axes and</span>
<span class="sd">        nodal planes&#39; record Da</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">exponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int_zero</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">exponent</span><span class="p">)</span>
        <span class="n">t_axis_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">9</span><span class="p">],</span> <span class="s1">&#39;4.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">t_axis_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">12</span><span class="p">],</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">t_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">14</span><span class="p">])</span>
        <span class="n">t_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">14</span><span class="p">:</span><span class="mi">17</span><span class="p">])</span>
        <span class="n">n_axis_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span><span class="p">],</span> <span class="s1">&#39;4.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">n_axis_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">21</span><span class="p">:</span><span class="mi">24</span><span class="p">],</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">n_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">24</span><span class="p">:</span><span class="mi">26</span><span class="p">])</span>
        <span class="n">n_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">26</span><span class="p">:</span><span class="mi">29</span><span class="p">])</span>
        <span class="n">p_axis_len</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">29</span><span class="p">:</span><span class="mi">33</span><span class="p">],</span> <span class="s1">&#39;4.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">p_axis_stderr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float_with_format</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">33</span><span class="p">:</span><span class="mi">36</span><span class="p">],</span> <span class="s1">&#39;3.2&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
        <span class="n">p_axis_plunge</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">36</span><span class="p">:</span><span class="mi">38</span><span class="p">])</span>
        <span class="n">p_axis_azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">38</span><span class="p">:</span><span class="mi">41</span><span class="p">])</span>
        <span class="n">np1_strike</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">42</span><span class="p">:</span><span class="mi">45</span><span class="p">])</span>
        <span class="n">np1_dip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">45</span><span class="p">:</span><span class="mi">47</span><span class="p">])</span>
        <span class="n">np1_slip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">47</span><span class="p">:</span><span class="mi">51</span><span class="p">])</span>
        <span class="n">np2_strike</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">54</span><span class="p">])</span>
        <span class="n">np2_dip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">54</span><span class="p">:</span><span class="mi">56</span><span class="p">])</span>
        <span class="n">np2_slip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">56</span><span class="p">:</span><span class="mi">60</span><span class="p">])</span>

        <span class="n">t_axis</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">()</span>
        <span class="n">t_axis</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">t_axis_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">t_axis</span><span class="o">.</span><span class="n">length_errors</span><span class="p">,</span> <span class="n">t_axis_stderr</span><span class="p">)</span>
        <span class="n">t_axis</span><span class="o">.</span><span class="n">plunge</span> <span class="o">=</span> <span class="n">t_axis_plunge</span>
        <span class="n">t_axis</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">t_axis_azimuth</span>
        <span class="n">n_axis</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">()</span>
        <span class="n">n_axis</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">n_axis_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">n_axis</span><span class="o">.</span><span class="n">length_errors</span><span class="p">,</span> <span class="n">n_axis_stderr</span><span class="p">)</span>
        <span class="n">n_axis</span><span class="o">.</span><span class="n">plunge</span> <span class="o">=</span> <span class="n">n_axis_plunge</span>
        <span class="n">n_axis</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">n_axis_azimuth</span>
        <span class="n">p_axis</span> <span class="o">=</span> <span class="n">Axis</span><span class="p">()</span>
        <span class="n">p_axis</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">p_axis_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_store_uncertainty</span><span class="p">(</span><span class="n">p_axis</span><span class="o">.</span><span class="n">length_errors</span><span class="p">,</span> <span class="n">p_axis_stderr</span><span class="p">)</span>
        <span class="n">p_axis</span><span class="o">.</span><span class="n">plunge</span> <span class="o">=</span> <span class="n">p_axis_plunge</span>
        <span class="n">p_axis</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">p_axis_azimuth</span>
        <span class="n">principal_axes</span> <span class="o">=</span> <span class="n">PrincipalAxes</span><span class="p">()</span>
        <span class="n">principal_axes</span><span class="o">.</span><span class="n">t_axis</span> <span class="o">=</span> <span class="n">t_axis</span>
        <span class="n">principal_axes</span><span class="o">.</span><span class="n">n_axis</span> <span class="o">=</span> <span class="n">n_axis</span>
        <span class="n">principal_axes</span><span class="o">.</span><span class="n">p_axis</span> <span class="o">=</span> <span class="n">p_axis</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">principal_axes</span> <span class="o">=</span> <span class="n">principal_axes</span>
        <span class="n">nodal_plane_1</span> <span class="o">=</span> <span class="n">NodalPlane</span><span class="p">()</span>
        <span class="n">nodal_plane_1</span><span class="o">.</span><span class="n">strike</span> <span class="o">=</span> <span class="n">np1_strike</span>
        <span class="n">nodal_plane_1</span><span class="o">.</span><span class="n">dip</span> <span class="o">=</span> <span class="n">np1_dip</span>
        <span class="n">nodal_plane_1</span><span class="o">.</span><span class="n">rake</span> <span class="o">=</span> <span class="n">np1_slip</span>
        <span class="n">nodal_plane_2</span> <span class="o">=</span> <span class="n">NodalPlane</span><span class="p">()</span>
        <span class="n">nodal_plane_2</span><span class="o">.</span><span class="n">strike</span> <span class="o">=</span> <span class="n">np2_strike</span>
        <span class="n">nodal_plane_2</span><span class="o">.</span><span class="n">dip</span> <span class="o">=</span> <span class="n">np2_dip</span>
        <span class="n">nodal_plane_2</span><span class="o">.</span><span class="n">rake</span> <span class="o">=</span> <span class="n">np2_slip</span>
        <span class="n">nodal_planes</span> <span class="o">=</span> <span class="n">NodalPlanes</span><span class="p">()</span>
        <span class="n">nodal_planes</span><span class="o">.</span><span class="n">nodal_plane_1</span> <span class="o">=</span> <span class="n">nodal_plane_1</span>
        <span class="n">nodal_planes</span><span class="o">.</span><span class="n">nodal_plane_2</span> <span class="o">=</span> <span class="n">nodal_plane_2</span>
        <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">nodal_planes</span> <span class="o">=</span> <span class="n">nodal_planes</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_dc"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_dc.html#obspy.io.pde.mchedr.Unpickler._parse_record_dc">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_dc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;source parameter data - comment&#39; record Dc</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">comments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">()</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">res_id_prefix</span><span class="p">)</span>
            <span class="n">focal_mechanism</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
            <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_p"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_p.html#obspy.io.pde.mchedr.Unpickler._parse_record_p">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_p</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;primary phase record&#39; P</span>

<span class="sd">        The primary phase is the first phase of the reading,</span>
<span class="sd">        regardless its type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">station</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">15</span><span class="p">]</span>
        <span class="n">arrival_time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">24</span><span class="p">]</span>
        <span class="n">residual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">25</span><span class="p">:</span><span class="mi">30</span><span class="p">])</span>
        <span class="c1"># unused: residual_flag = line[30]</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">32</span><span class="p">:</span><span class="mi">38</span><span class="p">])</span>  <span class="c1"># degrees</span>
        <span class="n">azimuth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">39</span><span class="p">:</span><span class="mi">44</span><span class="p">])</span>
        <span class="n">backazimuth</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">azimuth</span> <span class="o">%</span> <span class="o">-</span><span class="mi">360</span> <span class="o">+</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">mb_period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">44</span><span class="p">:</span><span class="mi">48</span><span class="p">])</span>
        <span class="n">mb_amplitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">55</span><span class="p">])</span>  <span class="c1"># nanometers</span>
        <span class="n">mb_magnitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">56</span><span class="p">:</span><span class="mi">59</span><span class="p">])</span>
        <span class="c1"># unused: mb_usage_flag = line[59]</span>

        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">waveform_id</span> <span class="o">=</span> <span class="n">WaveformStreamID</span><span class="p">()</span>
        <span class="n">waveform_id</span><span class="o">.</span><span class="n">station_code</span> <span class="o">=</span> <span class="n">station</span>
        <span class="c1"># network_code is required for QuakeML validation</span>
        <span class="n">waveform_id</span><span class="o">.</span><span class="n">network_code</span> <span class="o">=</span> <span class="s1">&#39;  &#39;</span>
        <span class="n">station_string</span> <span class="o">=</span> \
            <span class="n">waveform_id</span><span class="o">.</span><span class="n">get_seed_string</span><span class="p">()</span>\
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;waveformstream&#39;</span><span class="p">,</span>
                           <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
        <span class="n">waveform_id</span><span class="o">.</span><span class="n">resource_uri</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
        <span class="n">pick</span> <span class="o">=</span> <span class="n">Pick</span><span class="p">()</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;pick&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">arrival_time</span><span class="p">)</span>
        <span class="c1"># Check if pick is on the next day:</span>
        <span class="k">if</span> <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">origin</span><span class="o">.</span><span class="n">time</span><span class="p">:</span>
            <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">waveform_id</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">backazimuth</span> <span class="o">=</span> <span class="n">backazimuth</span>
        <span class="n">onset</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span>
            <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;emergent&#39;</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;i&#39;</span><span class="p">:</span>
            <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;impulsive&#39;</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">elif</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
            <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;questionable&#39;</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">pick</span><span class="o">.</span><span class="n">phase_hint</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">event</span><span class="o">.</span><span class="n">picks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pick</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mb_amplitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">amplitude</span> <span class="o">=</span> <span class="n">Amplitude</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">generic_amplitude</span> <span class="o">=</span> <span class="n">mb_amplitude</span> <span class="o">*</span> <span class="mf">1E-9</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">mb_period</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;AB&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">magnitude_hint</span> <span class="o">=</span> <span class="s1">&#39;Mb&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">amplitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">amplitude</span><span class="p">)</span>
            <span class="n">station_magnitude</span> <span class="o">=</span> <span class="n">StationMagnitude</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;stationmagntiude&#39;</span><span class="p">,</span>
                               <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">mb_magnitude</span>
            <span class="c1"># station_magnitude.mag_errors[&#39;uncertainty&#39;] = 0.0</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">station_magnitude_type</span> <span class="o">=</span> <span class="s1">&#39;Mb&#39;</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">amplitude_id</span> <span class="o">=</span> <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span>
            <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">(</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;magnitude/generic/body_wave_magnitude&#39;</span><span class="p">))</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> \
                <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">station_magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">station_magnitude</span><span class="p">)</span>
        <span class="n">arrival</span> <span class="o">=</span> <span class="n">Arrival</span><span class="p">()</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;arrival&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">phase_hint</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">azimuth</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="n">distance</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">time_residual</span> <span class="o">=</span> <span class="n">residual</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;earthmodel/ak135&#39;</span><span class="p">))</span>
        <span class="n">arrival</span><span class="o">.</span><span class="n">earth_model_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrival</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">minimum_distance</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
            <span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">(</span><span class="n">arrival</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">minimum_distance</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">d</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">maximum_distance</span> <span class="o">=</span> \
            <span class="nb">max</span><span class="p">(</span><span class="n">arrival</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span> <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">minimum_distance</span><span class="p">)</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_phase_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">pick</span><span class="p">,</span> <span class="n">arrival</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_m"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_m.html#obspy.io.pde.mchedr.Unpickler._parse_record_m">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">pick</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;surface wave record&#39; M</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># unused: Z_comp = line[7]</span>
        <span class="n">z_period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">9</span><span class="p">:</span><span class="mi">13</span><span class="p">])</span>
        <span class="c1"># note: according to the format documentation,</span>
        <span class="c1"># column 20 should be blank. However, it seems that</span>
        <span class="c1"># z_amplitude includes that column</span>
        <span class="n">z_amplitude</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">13</span><span class="p">:</span><span class="mi">21</span><span class="p">])</span>  <span class="c1"># micrometers</span>
        <span class="c1"># TODO: N_comp and E_comp seems to be never there</span>
        <span class="n">msz_mag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">49</span><span class="p">:</span><span class="mi">52</span><span class="p">]</span>
        <span class="n">ms_mag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_float</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">53</span><span class="p">:</span><span class="mi">56</span><span class="p">])</span>
        <span class="c1"># unused: Ms_usage_flag = line[56]</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">station_string</span> <span class="o">=</span> \
            <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">get_seed_string</span><span class="p">()</span>\
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">amplitude</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">z_amplitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">amplitude</span> <span class="o">=</span> <span class="n">Amplitude</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;amp&#39;</span><span class="p">,</span> <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">generic_amplitude</span> <span class="o">=</span> <span class="n">z_amplitude</span> <span class="o">*</span> <span class="mf">1E-6</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">z_period</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;AS&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">magnitude_hint</span> <span class="o">=</span> <span class="s1">&#39;Ms&#39;</span>
            <span class="n">amplitude</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">amplitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">amplitude</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">msz_mag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">station_magnitude</span> <span class="o">=</span> <span class="n">StationMagnitude</span><span class="p">()</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;stationmagntiude&#39;</span><span class="p">,</span>
                               <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">ms_mag</span>
            <span class="n">station_magnitude</span><span class="o">.</span><span class="n">station_magnitude_type</span> <span class="o">=</span> <span class="s1">&#39;Ms&#39;</span>
            <span class="k">if</span> <span class="n">amplitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">station_magnitude</span><span class="o">.</span><span class="n">amplitude_id</span> <span class="o">=</span> <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span>
            <span class="n">event</span><span class="o">.</span><span class="n">station_magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">station_magnitude</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_record_s"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._parse_record_s.html#obspy.io.pde.mchedr.Unpickler._parse_record_s">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_record_s</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">p_pick</span><span class="p">,</span> <span class="n">p_arrival</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parses the &#39;secondary phases&#39; record S</span>

<span class="sd">        Secondary phases are following phases of the reading,</span>
<span class="sd">        and can be P-type or S-type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">arrivals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">15</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">arrival_time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">15</span><span class="p">:</span><span class="mi">24</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">phase</span><span class="p">:</span>
            <span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">phase</span><span class="p">,</span> <span class="n">arrival_time</span><span class="p">))</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">25</span><span class="p">:</span><span class="mi">33</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">arrival_time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">33</span><span class="p">:</span><span class="mi">42</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">phase</span><span class="p">:</span>
            <span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">phase</span><span class="p">,</span> <span class="n">arrival_time</span><span class="p">))</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">43</span><span class="p">:</span><span class="mi">51</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">arrival_time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">51</span><span class="p">:</span><span class="mi">60</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">phase</span><span class="p">:</span>
            <span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">phase</span><span class="p">,</span> <span class="n">arrival_time</span><span class="p">))</span>

        <span class="n">evid</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">station_string</span> <span class="o">=</span> \
            <span class="n">p_pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">get_seed_string</span><span class="p">()</span>\
            <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">phase</span><span class="p">,</span> <span class="n">arrival_time</span> <span class="ow">in</span> <span class="n">arrivals</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">phase</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;D=&#39;</span><span class="p">:</span>
                <span class="c1"># unused: depth = self._float(phase[2:7])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">depth_usage_flag</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="c1"># usage flag is not defined</span>
                    <span class="n">depth_usage_flag</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># FIXME: I&#39;m not sure that &#39;X&#39; actually</span>
                <span class="c1"># means &#39;used&#39;</span>
                <span class="k">if</span> <span class="n">depth_usage_flag</span> <span class="o">==</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span>
                    <span class="c1"># FIXME: is this enough to say that</span>
                    <span class="c1"># the event is constrained by depth phases?</span>
                    <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="s1">&#39;constrained by depth phases&#39;</span>
                    <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">depth_phase_count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pick</span> <span class="o">=</span> <span class="n">Pick</span><span class="p">()</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;pick&#39;</span><span class="p">,</span>
                                   <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">date</span> <span class="o">+</span> <span class="n">arrival_time</span><span class="p">)</span>
                <span class="c1"># Check if pick is on the next day:</span>
                <span class="k">if</span> <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">origin</span><span class="o">.</span><span class="n">time</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">+=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">p_pick</span><span class="o">.</span><span class="n">waveform_id</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">backazimuth</span> <span class="o">=</span> <span class="n">p_pick</span><span class="o">.</span><span class="n">backazimuth</span>
                <span class="n">onset</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;e&#39;</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;emergent&#39;</span>
                    <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;i&#39;</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;impulsive&#39;</span>
                    <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="n">onset</span> <span class="o">==</span> <span class="s1">&#39;q&#39;</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="s1">&#39;questionable&#39;</span>
                    <span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">phase_hint</span> <span class="o">=</span> <span class="n">phase</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">event</span><span class="o">.</span><span class="n">picks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pick</span><span class="p">)</span>
                <span class="n">arrival</span> <span class="o">=</span> <span class="n">Arrival</span><span class="p">()</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="s1">&#39;arrival&#39;</span><span class="p">,</span>
                                   <span class="n">evid</span><span class="p">,</span> <span class="n">station_string</span><span class="p">))</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">phase_hint</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">p_arrival</span><span class="o">.</span><span class="n">azimuth</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="n">p_arrival</span><span class="o">.</span><span class="n">distance</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_phase_count</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrival</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._deserialize"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr.Unpickler._deserialize.html#obspy.io.pde.mchedr.Unpickler._deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">_deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
        <span class="n">res_id</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">res_id_prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">res_id</span><span class="p">)</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Created from NEIC PDE mchedr format&#39;</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">creation_time</span><span class="o">=</span><span class="n">UTCDateTime</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fh</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="c1"># XXX: ugly, probably we should do everything in byte strings</span>
            <span class="c1"># here? Is the pde / mchedr format unicode aware?</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="n">record_id</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;HY&#39;</span><span class="p">:</span>
                <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_hy</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">catalog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;P &#39;</span><span class="p">:</span>
                <span class="n">pick</span><span class="p">,</span> <span class="n">arrival</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_p</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;E &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_e</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;L &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_l</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;A &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_a</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;C &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_c</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;AH&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_ah</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;AE&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_ae</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;Dp&#39;</span><span class="p">:</span>
                <span class="n">focal_mechanism</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_dp</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;Dt&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_dt</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;Da&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_da</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;Dc&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_dc</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">focal_mechanism</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;M &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_m</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">pick</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">record_id</span> <span class="o">==</span> <span class="s1">&#39;S &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_parse_record_s</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">pick</span><span class="p">,</span> <span class="n">arrival</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># strip extra whitespaces from event comments</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">catalog</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">comments</span><span class="p">:</span>
                <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">comment</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">catalog</span></div></div>


<div class="viewcode-block" id="_read_mchedr"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.pde.mchedr._read_mchedr.html#obspy.io.pde.mchedr._read_mchedr">[docs]</a><span class="nd">@map_example_filename</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_read_mchedr</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads a NEIC PDE mchedr (machine-readable Earthquake Data Report) file</span>
<span class="sd">    and returns a ObsPy Catalog object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        ObsPy :func:`~obspy.core.event.read_events` function, call this</span>
<span class="sd">        instead.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: mchedr file to be read.</span>
<span class="sd">    :rtype: :class:`~obspy.core.event.Catalog`</span>
<span class="sd">    :return: An ObsPy Catalog object.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy.core.event import read_events</span>
<span class="sd">    &gt;&gt;&gt; cat = read_events(&#39;/path/to/mchedr.dat&#39;)</span>
<span class="sd">    &gt;&gt;&gt; print(cat)</span>
<span class="sd">    1 Event(s) in Catalog:</span>
<span class="sd">    2012-01-01T05:27:55.980000Z | +31.456, +138.072 | 6.2 Mb</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Unpickler</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>


<span class="c1"># Remove once 0.11 has been released.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynamicAttributeImportRerouteModule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">,</span> <span class="n">locs</span><span class="o">=</span><span class="nb">locals</span><span class="p">(),</span>
    <span class="n">original_module</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">],</span>
    <span class="n">import_map</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">function_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;isMchedr&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.pde.mchedr._is_mchedr&#39;</span><span class="p">,</span>
        <span class="s1">&#39;readMchedr&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.pde.mchedr._read_mchedr&#39;</span><span class="p">})</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>