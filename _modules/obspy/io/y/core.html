<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.y.core &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.io.y.core</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Y bindings to ObsPy core module.</span>

<span class="sd">:copyright:</span>
<span class="sd">    The ObsPy Development Team (devs@obspy.org)</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">struct</span> <span class="k">import</span> <span class="n">unpack</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">obspy</span> <span class="k">import</span> <span class="n">Stream</span>
<span class="kn">from</span> <span class="nn">obspy.core.compatibility</span> <span class="k">import</span> <span class="n">from_buffer</span>
<span class="kn">from</span> <span class="nn">obspy.core.trace</span> <span class="k">import</span> <span class="n">Trace</span>
<span class="kn">from</span> <span class="nn">obspy.core.utcdatetime</span> <span class="k">import</span> <span class="n">UTCDateTime</span>
<span class="kn">from</span> <span class="nn">obspy.core.util</span> <span class="k">import</span> <span class="n">AttribDict</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.deprecation_helpers</span> <span class="k">import</span> \
    <span class="n">DynamicAttributeImportRerouteModule</span>


<span class="n">INVALID_CHAR_MSG</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Invalid non-ASCII characters in Y file header detected (</span><span class="si">%s</span><span class="s2">). &quot;</span>
    <span class="s2">&quot;These were ignored.&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="_unpack_with_asciiz_and_decode"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.y.core._unpack_with_asciiz_and_decode.html#obspy.io.y.core._unpack_with_asciiz_and_decode">[docs]</a><span class="k">def</span> <span class="nf">_unpack_with_asciiz_and_decode</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unpack binary data and decode ASCII bytestrings, stripping ASCIIZ</span>
<span class="sd">    bytestrings correctly as specified by Y format definition. In addition to</span>
<span class="sd">    format flags defined by :py:func:`struct.unpack`, &quot;z&quot; can be used to denote</span>
<span class="sd">    ASCIIZ fields.</span>

<span class="sd">    :param fmt: see :py:func:`struct.unpack`</span>
<span class="sd">    :param data: see :py:func:`struct.unpack`</span>
<span class="sd">    :returns: see :py:func:`struct.unpack` but with bytestrings being decoded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fmt_list</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;[a-zA-Z]&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>
    <span class="n">z_positions</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">fmt_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fmt_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">fmt_</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;z&quot;</span><span class="p">]</span>
    <span class="n">s_positions</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span> <span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">fmt_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fmt_list</span><span class="p">)</span> <span class="k">if</span> <span class="n">fmt_</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;s&quot;</span><span class="p">]</span>

    <span class="n">parts</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">unpack</span><span class="p">(</span><span class="n">fmt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;s&quot;</span><span class="p">),</span> <span class="n">data</span><span class="p">))</span>

    <span class="c1"># special handling for ASCIIZ fields:</span>
    <span class="c1"># strip everything after first (if any) ASCII NULL character *before*</span>
    <span class="c1"># decoding (those need not be valid encoded ASCII bytes and should be</span>
    <span class="c1"># ignored)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">z_positions</span><span class="p">:</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">terminal_index</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">terminal_index</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">part</span><span class="p">[:</span><span class="n">terminal_index</span><span class="p">]</span>
    <span class="c1"># decode all bytestrings from ASCII</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">z_positions</span> <span class="o">+</span> <span class="n">s_positions</span><span class="p">:</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;strict&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">UnicodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">INVALID_CHAR_MSG</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span> <span class="ne">UserWarning</span><span class="p">)</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
        <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">part</span>
    <span class="c1"># right-strip all BLANKPADDED fields</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">s_positions</span><span class="p">:</span>
        <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>

    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span></div>


<div class="viewcode-block" id="_parse_tag"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.y.core._parse_tag.html#obspy.io.y.core._parse_tag">[docs]</a><span class="k">def</span> <span class="nf">_parse_tag</span><span class="p">(</span><span class="n">fh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads and parses a single tag.</span>

<span class="sd">    returns endian, tag_type, next_tag, next_same</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
    <span class="c1"># byte order format for this data. Uses letter “I” for Intel format</span>
    <span class="c1"># data (little endian) or letter “M” for Motorola (big endian) format</span>
    <span class="nb">format</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;=c&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;I&#39;</span><span class="p">:</span>
        <span class="n">endian</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&lt;&#39;</span>
    <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;M&#39;</span><span class="p">:</span>
        <span class="n">endian</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&gt;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid tag: missing byte order information&#39;</span><span class="p">)</span>
    <span class="c1"># magic: check for magic number &quot;31&quot;</span>
    <span class="n">magic</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">magic</span> <span class="o">!=</span> <span class="mi">31</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Invalid tag: missing magic number&#39;</span><span class="p">)</span>
    <span class="c1"># tag type: the type of data attached to this tag.</span>
    <span class="n">tag_type</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># NextTag is the offset in bytes from the end of this tag to the start of</span>
    <span class="c1"># the next tag. That means, the offset is the size of the data attached</span>
    <span class="c1"># to this tag.</span>
    <span class="n">next_tag</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># NextSame is the offset in bytes from the end of this tag to the start</span>
    <span class="c1"># of the next tag with the same type. If zero, there is no next tag with</span>
    <span class="c1"># the same type.</span>
    <span class="n">next_same</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">12</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">endian</span><span class="p">,</span> <span class="n">tag_type</span><span class="p">,</span> <span class="n">next_tag</span><span class="p">,</span> <span class="n">next_same</span></div>


<div class="viewcode-block" id="_is_y"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.y.core._is_y.html#obspy.io.y.core._is_y">[docs]</a><span class="k">def</span> <span class="nf">_is_y</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether a file is a Nanometrics Y file or not.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the Nanometrics Y file to be checked.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    :return: ``True`` if a Nanometrics Y file.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; _is_y(&quot;/path/to/YAYT_BHZ_20021223.124800&quot;)  #doctest: +SKIP</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># get first tag (16 bytes)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">tag_type</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">_parse_tag</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># The first tag in a Y-file must be the TAG_Y_FILE tag (tag type 0)</span>
    <span class="k">if</span> <span class="n">tag_type</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="_read_y"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.y.core._read_y.html#obspy.io.y.core._read_y">[docs]</a><span class="k">def</span> <span class="nf">_read_y</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">headonly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># @UnusedVariable</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads a Nanometrics Y file and returns an ObsPy Stream object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        ObsPy :func:`~obspy.core.stream.read` function, call this instead.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Nanometrics Y file to be read.</span>
<span class="sd">    :type headonly: bool, optional</span>
<span class="sd">    :param headonly: If set to True, read only the head. This is most useful</span>
<span class="sd">        for scanning available data in huge (temporary) data sets.</span>
<span class="sd">    :rtype: :class:`~obspy.core.stream.Stream`</span>
<span class="sd">    :return: A ObsPy Stream object.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy import read</span>
<span class="sd">    &gt;&gt;&gt; st = read(&quot;/path/to/YAYT_BHZ_20021223.124800&quot;)</span>
<span class="sd">    &gt;&gt;&gt; st  # doctest: +ELLIPSIS</span>
<span class="sd">    &lt;obspy.core.stream.Stream object at 0x...&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(st)  # doctest: +ELLIPSIS</span>
<span class="sd">    1 Trace(s) in Stream:</span>
<span class="sd">    .AYT..BHZ | 2002-12-23T12:48:00.000100Z - ... | 100.0 Hz, 18000 samples</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The first tag in a Y-file must be the TAG_Y_FILE (0) tag. This must be</span>
    <span class="c1"># followed by the following tags, in any order:</span>
    <span class="c1">#   TAG_STATION_INFO (1)</span>
    <span class="c1">#   TAG_STATION_LOCATION (2)</span>
    <span class="c1">#   TAG_STATION_PARAMETERS (3)</span>
    <span class="c1">#   TAG_STATION_DATABASE (4)</span>
    <span class="c1">#   TAG_SERIES_INFO (5)</span>
    <span class="c1">#   TAG_SERIES_DATABASE (6)</span>
    <span class="c1"># The following tag is optional:</span>
    <span class="c1">#   TAG_STATION_RESPONSE (26)</span>
    <span class="c1"># The last tag in the file must be a TAG_DATA_INT32 (7) tag. This tag must</span>
    <span class="c1"># be followed by an array of LONG&#39;s. The number of entries in the array</span>
    <span class="c1"># must agree with what was described in the TAG_SERIES_INFO data.</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">trace</span> <span class="o">=</span> <span class="n">Trace</span><span class="p">()</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
        <span class="n">count</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">endian</span><span class="p">,</span> <span class="n">tag_type</span><span class="p">,</span> <span class="n">next_tag</span><span class="p">,</span> <span class="n">_next_same</span> <span class="o">=</span> <span class="n">_parse_tag</span><span class="p">(</span><span class="n">fh</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># TAG_STATION_INFO</span>
                <span class="c1"># UCHAR Update[8]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># UCHAR Station[5] (BLANKPAD)</span>
                <span class="c1">#   Station is the five letter SEED format station</span>
                <span class="c1">#   identification.</span>
                <span class="c1"># UCHAR Location[2] (BLANKPAD)</span>
                <span class="c1">#   Location Location is the two letter SEED format location</span>
                <span class="c1">#   identification.</span>
                <span class="c1"># UCHAR Channel[3] (BLANKPAD)</span>
                <span class="c1">#   Channel Channel is the three letter SEED format channel</span>
                <span class="c1">#   identification.</span>
                <span class="c1"># UCHAR NetworkID[51] (ASCIIZ)</span>
                <span class="c1">#   This is some descriptive text identifying the network.</span>
                <span class="c1"># UCHAR SiteName[61] (ASCIIZ)</span>
                <span class="c1">#   SiteName is some text identifying the site.</span>
                <span class="c1"># UCHAR Comment[31] (ASCIIZ)</span>
                <span class="c1">#   Comment is any comment for this station.</span>
                <span class="c1"># UCHAR SensorType[51] (ASCIIZ)</span>
                <span class="c1">#   SensorType is some text describing the type of sensor used</span>
                <span class="c1">#   at the station.</span>
                <span class="c1"># UCHAR DataFormat[7] (ASCIIZ)</span>
                <span class="c1">#   DataFormat is some text describing the data format recorded</span>
                <span class="c1">#   at the station.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="sa">b</span><span class="s1">&#39;5s2s3s51z61z31z51z7z&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:])</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="c1"># extra</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">network_id</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">site_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">sensor_type</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">data_format</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_station_info</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="c1"># TAG_STATION_LOCATION</span>
                <span class="c1"># UCHAR Update[8]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># FLOAT Latitude</span>
                <span class="c1">#   Latitude in degrees of the location of the station. The</span>
                <span class="c1">#   latitude should be between -90 (South) and +90 (North).</span>
                <span class="c1"># FLOAT Longitude</span>
                <span class="c1">#   Longitude in degrees of the location of the station. The</span>
                <span class="c1">#   longitude should be between -180 (West) and +180 (East).</span>
                <span class="c1"># FLOAT Elevation</span>
                <span class="c1">#   Elevation in meters above sea level of the station.</span>
                <span class="c1"># FLOAT Depth</span>
                <span class="c1">#   Depth is the depth in meters of the sensor.</span>
                <span class="c1"># FLOAT Azimuth</span>
                <span class="c1">#   Azimuth of the sensor in degrees clockwise.</span>
                <span class="c1"># FLOAT Dip</span>
                <span class="c1">#   Dip is the dip of the sensor. 90 degrees is defined as</span>
                <span class="c1">#   vertical right way up.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ffffff&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:])</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">elevation</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">dip</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_station_location</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="c1"># TAG_STATION_PARAMETERS</span>
                <span class="c1"># UCHAR Update[16]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># REALTIME StartValidTime</span>
                <span class="c1">#   Time that the information in these records became valid.</span>
                <span class="c1"># REALTIME EndValidTime</span>
                <span class="c1">#   Time that the information in these records became invalid.</span>
                <span class="c1"># FLOAT Sensitivity</span>
                <span class="c1">#   Sensitivity of the sensor in nanometers per bit.</span>
                <span class="c1"># FLOAT SensFreq</span>
                <span class="c1">#   Frequency at which the sensitivity was measured.</span>
                <span class="c1"># FLOAT SampleRate</span>
                <span class="c1">#   This is the number of samples per second. This value can be</span>
                <span class="c1">#   less than 1.0. (i.e. 0.1)</span>
                <span class="c1"># FLOAT MaxClkDrift</span>
                <span class="c1">#   Maximum drift rate of the clock in seconds per sample.</span>
                <span class="c1"># UCHAR SensUnits[24] (ASCIIZ)</span>
                <span class="c1">#   Some text indicating the units in which the sensitivity was</span>
                <span class="c1">#   measured.</span>
                <span class="c1"># UCHAR CalibUnits[24] (ASCIIZ)</span>
                <span class="c1">#   Some text indicating the units in which calibration input</span>
                <span class="c1">#   was measured.</span>
                <span class="c1"># UCHAR ChanFlags[27] (BLANKPAD)</span>
                <span class="c1">#   Text indicating the channel flags according to the SEED</span>
                <span class="c1">#   definition.</span>
                <span class="c1"># UCHAR UpdateFlag</span>
                <span class="c1">#   This flag must be “N” or “U” according to the SEED</span>
                <span class="c1">#   definition.</span>
                <span class="c1"># UCHAR Filler[4]</span>
                <span class="c1">#   Filler Pads out the record to satisfy the alignment</span>
                <span class="c1">#   restrictions for reading data on a SPARC processor.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ddffff24z24z27sc4s&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">16</span><span class="p">:])</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">sampling_rate</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="c1"># extra</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">start_valid_time</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">end_valid_time</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">sensitivity</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">sens_freq</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">sample_rate</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">max_clk_drift</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">sens_units</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">calib_units</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">chan_flags</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">update_flag</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_station_parameters</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="c1"># TAG_STATION_DATABASE</span>
                <span class="c1"># UCHAR Update[8]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># REALTIME LoadDate</span>
                <span class="c1">#   Date the information was loaded into the database.</span>
                <span class="c1"># UCHAR Key[16]</span>
                <span class="c1">#   Unique key that identifies this record in the database.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;d16s&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:])</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">load_date</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_station_database</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="c1"># TAG_SERIES_INFO</span>
                <span class="c1"># UCHAR Update[16]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># REALTIME StartTime</span>
                <span class="c1">#   This is start time of the data in this series.</span>
                <span class="c1"># REALTIME EndTime</span>
                <span class="c1">#   This is end time of the data in this series.</span>
                <span class="c1"># ULONG NumSamples</span>
                <span class="c1">#   This is the number of samples of data in this series.</span>
                <span class="c1"># LONG DCOffset</span>
                <span class="c1">#   DCOffset is the DC offset of the data.</span>
                <span class="c1"># LONG MaxAmplitude</span>
                <span class="c1">#   MaxAmplitude is the maximum amplitude of the data.</span>
                <span class="c1"># LONG MinAmplitude</span>
                <span class="c1">#   MinAmplitude is the minimum amplitude of the data.</span>
                <span class="c1"># UCHAR Format[8] (ASCIIZ)</span>
                <span class="c1">#   This is the format of the data. This should always be</span>
                <span class="c1">#   “YFILE”.</span>
                <span class="c1"># UCHAR FormatVersion[8] (ASCIIZ)</span>
                <span class="c1">#   FormatVersion is the version of the format of the data.</span>
                <span class="c1">#   This should always be “5.0”</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;ddLlll8z8z&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">16</span><span class="p">:])</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">count</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="c1"># extra</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">endtime</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">params</span><span class="o">.</span><span class="n">num_samples</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">dc_offset</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">max_amplitude</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">min_amplitude</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">format_version</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_series_info</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span>
                <span class="c1"># TAG_SERIES_DATABASE</span>
                <span class="c1"># UCHAR Update[8]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># REALTIME LoadDate</span>
                <span class="c1">#   Date the information was loaded into the database.</span>
                <span class="c1"># UCHAR Key[16]</span>
                <span class="c1">#   Unique key that identifies this record in the database.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span>
                    <span class="n">endian</span> <span class="o">+</span> <span class="sa">b</span><span class="s1">&#39;d16s&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:])</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">load_date</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">params</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_series_database</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">26</span><span class="p">:</span>
                <span class="c1"># TAG_STATION_RESPONSE</span>
                <span class="c1"># UCHAR Update[8]</span>
                <span class="c1">#   This field is only used internally for administrative</span>
                <span class="c1">#   purposes.  It should always be set to zeroes.</span>
                <span class="c1"># UCHAR PathName[260]</span>
                <span class="c1">#  PathName is the full name of the file which contains the</span>
                <span class="c1">#  response information for this station.</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">next_tag</span><span class="p">)</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">_unpack_with_asciiz_and_decode</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;260s&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">:])</span>
                <span class="n">params</span> <span class="o">=</span> <span class="n">AttribDict</span><span class="p">()</span>
                <span class="n">params</span><span class="o">.</span><span class="n">path_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">tag_station_response</span> <span class="o">=</span> <span class="n">params</span>
            <span class="k">elif</span> <span class="n">tag_type</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
                <span class="c1"># TAG_DATA_INT32</span>
                <span class="n">trace</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">from_buffer</span><span class="p">(</span>
                    <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">itemsize</span> <span class="o">*</span> <span class="n">count</span><span class="p">),</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
                <span class="c1"># break loop as TAG_DATA_INT32 should be the last tag in file</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fh</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">next_tag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Stream</span><span class="p">([</span><span class="n">trace</span><span class="p">])</span></div>


<span class="c1"># Remove once 0.11 has been released.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynamicAttributeImportRerouteModule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">,</span> <span class="n">locs</span><span class="o">=</span><span class="nb">locals</span><span class="p">(),</span>
    <span class="n">original_module</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">],</span>
    <span class="n">import_map</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">function_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;isY&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.y.core._is_y&#39;</span><span class="p">,</span>
        <span class="s1">&#39;readY&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.y.core._read_y&#39;</span><span class="p">})</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>