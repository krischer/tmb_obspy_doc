<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.sh.core &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.io.sh.core</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SH bindings to ObsPy core module.</span>

<span class="sd">:copyright:</span>
<span class="sd">    The ObsPy Development Team (devs@obspy.org)</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>
<span class="kn">from</span> <span class="nn">future.utils</span> <span class="k">import</span> <span class="n">native_str</span>

<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">obspy</span> <span class="k">import</span> <span class="n">Stream</span><span class="p">,</span> <span class="n">Trace</span><span class="p">,</span> <span class="n">UTCDateTime</span>
<span class="kn">from</span> <span class="nn">obspy.core</span> <span class="k">import</span> <span class="n">Stats</span>
<span class="kn">from</span> <span class="nn">obspy.core.util</span> <span class="k">import</span> <span class="n">loadtxt</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.deprecation_helpers</span> <span class="k">import</span> \
    <span class="n">DynamicAttributeImportRerouteModule</span>


<span class="n">MONTHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;JAN&#39;</span><span class="p">,</span> <span class="s1">&#39;FEB&#39;</span><span class="p">,</span> <span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="s1">&#39;APR&#39;</span><span class="p">,</span> <span class="s1">&#39;MAY&#39;</span><span class="p">,</span> <span class="s1">&#39;JUN&#39;</span><span class="p">,</span> <span class="s1">&#39;JUL&#39;</span><span class="p">,</span> <span class="s1">&#39;AUG&#39;</span><span class="p">,</span> <span class="s1">&#39;SEP&#39;</span><span class="p">,</span>
          <span class="s1">&#39;OCT&#39;</span><span class="p">,</span> <span class="s1">&#39;NOV&#39;</span><span class="p">,</span> <span class="s1">&#39;DEC&#39;</span><span class="p">]</span>

<span class="n">SH_IDX</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;LENGTH&#39;</span><span class="p">:</span> <span class="s1">&#39;L001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SIGN&#39;</span><span class="p">:</span> <span class="s1">&#39;I011&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EVENTNO&#39;</span><span class="p">:</span> <span class="s1">&#39;I012&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MARK&#39;</span><span class="p">:</span> <span class="s1">&#39;I014&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DELTA&#39;</span><span class="p">:</span> <span class="s1">&#39;R000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CALIB&#39;</span><span class="p">:</span> <span class="s1">&#39;R026&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DISTANCE&#39;</span><span class="p">:</span> <span class="s1">&#39;R011&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AZIMUTH&#39;</span><span class="p">:</span> <span class="s1">&#39;R012&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SLOWNESS&#39;</span><span class="p">:</span> <span class="s1">&#39;R018&#39;</span><span class="p">,</span>
    <span class="s1">&#39;INCI&#39;</span><span class="p">:</span> <span class="s1">&#39;R013&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DEPTH&#39;</span><span class="p">:</span> <span class="s1">&#39;R014&#39;</span><span class="p">,</span>
    <span class="s1">&#39;MAGNITUDE&#39;</span><span class="p">:</span> <span class="s1">&#39;R015&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LAT&#39;</span><span class="p">:</span> <span class="s1">&#39;R016&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LON&#39;</span><span class="p">:</span> <span class="s1">&#39;R017&#39;</span><span class="p">,</span>
    <span class="s1">&#39;SIGNOISE&#39;</span><span class="p">:</span> <span class="s1">&#39;R022&#39;</span><span class="p">,</span>
    <span class="s1">&#39;PWDW&#39;</span><span class="p">:</span> <span class="s1">&#39;R023&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DCVREG&#39;</span><span class="p">:</span> <span class="s1">&#39;R024&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DCVINCI&#39;</span><span class="p">:</span> <span class="s1">&#39;R025&#39;</span><span class="p">,</span>
    <span class="s1">&#39;COMMENT&#39;</span><span class="p">:</span> <span class="s1">&#39;S000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;STATION&#39;</span><span class="p">:</span> <span class="s1">&#39;S001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OPINFO&#39;</span><span class="p">:</span> <span class="s1">&#39;S002&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FILTER&#39;</span><span class="p">:</span> <span class="s1">&#39;S011&#39;</span><span class="p">,</span>
    <span class="s1">&#39;QUAL&#39;</span><span class="p">:</span> <span class="s1">&#39;S012&#39;</span><span class="p">,</span>
    <span class="s1">&#39;COMP&#39;</span><span class="p">:</span> <span class="s1">&#39;C000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CHAN1&#39;</span><span class="p">:</span> <span class="s1">&#39;C001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CHAN2&#39;</span><span class="p">:</span> <span class="s1">&#39;C002&#39;</span><span class="p">,</span>
    <span class="s1">&#39;BYTEORDER&#39;</span><span class="p">:</span> <span class="s1">&#39;C003&#39;</span><span class="p">,</span>
    <span class="s1">&#39;START&#39;</span><span class="p">:</span> <span class="s1">&#39;S021&#39;</span><span class="p">,</span>
    <span class="s1">&#39;P-ONSET&#39;</span><span class="p">:</span> <span class="s1">&#39;S022&#39;</span><span class="p">,</span>
    <span class="s1">&#39;S-ONSET&#39;</span><span class="p">:</span> <span class="s1">&#39;S023&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ORIGIN&#39;</span><span class="p">:</span> <span class="s1">&#39;S024&#39;</span>
<span class="p">}</span>

<span class="n">STANDARD_ASC_HEADERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;START&#39;</span><span class="p">,</span> <span class="s1">&#39;COMP&#39;</span><span class="p">,</span> <span class="s1">&#39;CHAN1&#39;</span><span class="p">,</span> <span class="s1">&#39;CHAN2&#39;</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;CALIB&#39;</span><span class="p">]</span>

<span class="n">SH_KEYS_INT</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">SH_IDX</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">)]</span>
<span class="n">SH_KEYS_FLOAT</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">SH_IDX</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">)]</span>
<span class="n">INVERTED_SH_IDX</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">SH_IDX</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>


<div class="viewcode-block" id="_is_asc"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._is_asc.html#obspy.io.sh.core._is_asc">[docs]</a><span class="k">def</span> <span class="nf">_is_asc</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether a file is a Seismic Handler ASCII file or not.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the ASCII file to be checked.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    :return: ``True`` if a Seismic Handler ASCII file.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; _is_asc(&quot;/path/to/QFILE-TEST-ASC.ASC&quot;)  #doctest: +SKIP</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># first six chars should contain &#39;DELTA:&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;DELTA:&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="_read_asc"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._read_asc.html#obspy.io.sh.core._read_asc">[docs]</a><span class="k">def</span> <span class="nf">_read_asc</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">headonly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">skip</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
              <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># @UnusedVariable</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads a Seismic Handler ASCII file and returns an ObsPy Stream object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        ObsPy :func:`~obspy.core.stream.read` function, call this instead.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: ASCII file to be read.</span>
<span class="sd">    :type headonly: bool, optional</span>
<span class="sd">    :param headonly: If set to True, read only the head. This is most useful</span>
<span class="sd">        for scanning available data in huge (temporary) data sets.</span>
<span class="sd">    :type skip: int, optional</span>
<span class="sd">    :param skip: Number of lines to be skipped from top of file. If defined</span>
<span class="sd">        only one trace is read from file.</span>
<span class="sd">    :type delta: float, optional</span>
<span class="sd">    :param delta: If ``skip`` is used, ``delta`` defines sample offset in</span>
<span class="sd">        seconds.</span>
<span class="sd">    :type length: int, optional</span>
<span class="sd">    :param length: If ``skip`` is used, ``length`` defines the number of values</span>
<span class="sd">        to be read.</span>
<span class="sd">    :rtype: :class:`~obspy.core.stream.Stream`</span>
<span class="sd">    :return: A ObsPy Stream object.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy import read</span>
<span class="sd">    &gt;&gt;&gt; st = read(&quot;/path/to/QFILE-TEST-ASC.ASC&quot;)</span>
<span class="sd">    &gt;&gt;&gt; st  # doctest: +ELLIPSIS</span>
<span class="sd">    &lt;obspy.core.stream.Stream object at 0x...&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(st)  # doctest: +ELLIPSIS</span>
<span class="sd">    3 Trace(s) in Stream:</span>
<span class="sd">    .TEST..BHN | 2009-10-01T12:46:01.000000Z - ... | 20.0 Hz, 801 samples</span>
<span class="sd">    .TEST..BHE | 2009-10-01T12:46:01.000000Z - ... | 20.0 Hz, 801 samples</span>
<span class="sd">    .WET..HHZ  | 2010-01-01T01:01:05.999000Z - ... | 100.0 Hz, 4001 samples</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">)</span>
    <span class="c1"># read file and split text into channels</span>
    <span class="n">channels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fh</span><span class="o">.</span><span class="n">readlines</span><span class="p">()[</span><span class="n">skip</span><span class="p">:]:</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
            <span class="c1"># blank line</span>
            <span class="c1"># check if any data fetched yet</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># append current channel</span>
            <span class="n">data</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">channels</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
            <span class="c1"># create new channel</span>
            <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">skip</span><span class="p">:</span>
                <span class="c1"># if skip is set only one trace is read, everything else makes</span>
                <span class="c1"># no sense.</span>
                <span class="k">break</span>
            <span class="k">continue</span>
        <span class="k">elif</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isalpha</span><span class="p">():</span>
            <span class="c1"># header entry</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">headers</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">headonly</span><span class="p">:</span>
            <span class="c1"># data entry - may be written in multiple columns</span>
            <span class="n">data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="c1"># create ObsPy stream object</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
    <span class="c1"># custom header</span>
    <span class="n">custom_header</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">delta</span><span class="p">:</span>
        <span class="n">custom_header</span><span class="p">[</span><span class="s2">&quot;delta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">delta</span>
    <span class="k">if</span> <span class="n">length</span><span class="p">:</span>
        <span class="n">custom_header</span><span class="p">[</span><span class="s2">&quot;npts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">length</span>

    <span class="k">for</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">:</span>
        <span class="c1"># create Stats</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">Stats</span><span class="p">(</span><span class="n">custom_header</span><span class="p">)</span>
        <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">]</span>
        <span class="c1"># generate headers</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;DELTA&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;delta&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;LENGTH&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;npts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;CALIB&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;calib&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;STATION&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;COMP&#39;</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;CHAN1&#39;</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;CHAN2&#39;</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;START&#39;</span><span class="p">:</span>
                <span class="c1"># 01-JAN-2009_01:01:01.0</span>
                <span class="c1"># 1-OCT-2009_12:46:01.000</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;starttime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># everything else gets stored into sh entry</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">SH_KEYS_INT</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">SH_KEYS_FLOAT</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># set channel code</span>
        <span class="n">header</span><span class="p">[</span><span class="s1">&#39;channel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">headonly</span><span class="p">:</span>
            <span class="c1"># skip data</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trace</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># read data</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">loadtxt</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

            <span class="c1"># cut data if requested</span>
            <span class="k">if</span> <span class="n">skip</span> <span class="ow">and</span> <span class="n">length</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="n">length</span><span class="p">]</span>

            <span class="c1"># use correct value in any case</span>
            <span class="n">header</span><span class="p">[</span><span class="s2">&quot;npts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trace</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">stream</span></div>


<div class="viewcode-block" id="_write_asc"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._write_asc.html#obspy.io.sh.core._write_asc">[docs]</a><span class="k">def</span> <span class="nf">_write_asc</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">included_headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">npl</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
               <span class="n">custom_format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%-.6e</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># @UnusedVariable</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes a Seismic Handler ASCII file from given ObsPy Stream object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        the :meth:`~obspy.core.stream.Stream.write` method of an</span>
<span class="sd">        ObsPy :class:`~obspy.core.stream.Stream` object, call this instead.</span>

<span class="sd">    :type stream: :class:`~obspy.core.stream.Stream`</span>
<span class="sd">    :param stream: The ObsPy Stream object to write.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the ASCII file to write.</span>
<span class="sd">    :type npl: int, optional</span>
<span class="sd">    :param npl: Number of data columns in file, default to four.</span>
<span class="sd">    :type included_headers: list or None, optional</span>
<span class="sd">    :param included_headers: If set to a list, only these header entries will</span>
<span class="sd">        be written to file. DELTA and LENGTH are written in any case. If it&#39;s</span>
<span class="sd">        set to None, a basic set will be included.</span>
<span class="sd">    :type custom_format: str, optional</span>
<span class="sd">    :param custom_format: Parameter for number formatting of samples, defaults</span>
<span class="sd">        to &quot;%-.6e&quot;.</span>
<span class="sd">    :type append: bool, optional</span>
<span class="sd">    :param append: If filename exists append all data to file, default False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">included_headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">included_headers</span> <span class="o">=</span> <span class="n">STANDARD_ASC_HEADERS</span>

    <span class="n">sio</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="c1"># write headers</span>
        <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;DELTA: </span><span class="si">%-.6e</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span><span class="p">))</span>
        <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;LENGTH: </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span><span class="p">)</span>
        <span class="c1"># additional headers</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">included_headers</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="c1"># special format for start time</span>
        <span class="k">if</span> <span class="s2">&quot;START&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;START: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">from_utcdatetime</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>
        <span class="c1"># component must be split</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="s2">&quot;COMP&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;COMP: </span><span class="si">%c</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">&quot;CHAN1&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;CHAN1: </span><span class="si">%c</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s2">&quot;CHAN2&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;CHAN2: </span><span class="si">%c</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;STATION&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;STATION: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;CALIB&quot;</span> <span class="ow">in</span> <span class="n">included_headers</span><span class="p">:</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;CALIB: </span><span class="si">%-.6e</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">calib</span><span class="p">))</span>
        <span class="c1"># write data in npl columns</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="p">([</span><span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">npl</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">]</span>
        <span class="n">delimiter</span> <span class="o">=</span> <span class="n">mask</span> <span class="o">*</span> <span class="p">((</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span> <span class="o">//</span> <span class="n">npl</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">delimiter</span> <span class="o">=</span> <span class="n">delimiter</span><span class="p">[:</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">delimiter</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">delim</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">custom_format</span> <span class="o">%</span> <span class="p">(</span><span class="n">sample</span><span class="p">)</span>
            <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">delim</span><span class="p">))</span>
        <span class="n">sio</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">append</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;ab&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;wb&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">sio</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sio</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">))</span></div>


<div class="viewcode-block" id="_is_q"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._is_q.html#obspy.io.sh.core._is_q">[docs]</a><span class="k">def</span> <span class="nf">_is_q</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether a file is a Seismic Handler Q file or not.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the Q file to be checked.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    :return: ``True`` if a Seismic Handler Q file.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; _is_q(&quot;/path/to/QFILE-TEST.QHD&quot;)  #doctest: +SKIP</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># file must start with magic number 43981</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;43981&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="_read_q"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._read_q.html#obspy.io.sh.core._read_q">[docs]</a><span class="k">def</span> <span class="nf">_read_q</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">headonly</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">data_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># @UnusedVariable</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads a Seismic Handler Q file and returns an ObsPy Stream object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        ObsPy :func:`~obspy.core.stream.read` function, call this instead.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Q header file to be read. Must have a `QHD` file</span>
<span class="sd">        extension.</span>
<span class="sd">    :type headonly: bool, optional</span>
<span class="sd">    :param headonly: If set to True, read only the head. This is most useful</span>
<span class="sd">        for scanning available data in huge (temporary) data sets.</span>
<span class="sd">    :type data_directory: str, optional</span>
<span class="sd">    :param data_directory: Data directory where the corresponding QBN file can</span>
<span class="sd">        be found.</span>
<span class="sd">    :type byteorder: str, optional</span>
<span class="sd">    :param byteorder: Enforce byte order for data file. This is important for</span>
<span class="sd">        Q files written in older versions of Seismic Handler, which don&#39;t</span>
<span class="sd">        explicit state the `BYTEORDER` flag within the header file. Can be</span>
<span class="sd">        little endian (``&#39;&lt;&#39;``), big endian (``&#39;&gt;&#39;``), or native byte order</span>
<span class="sd">        (``&#39;=&#39;``). Defaults to ``&#39;=&#39;``.</span>
<span class="sd">    :rtype: :class:`~obspy.core.stream.Stream`</span>
<span class="sd">    :return: A ObsPy Stream object.</span>

<span class="sd">    Q files consists of two files per data set:</span>

<span class="sd">    * a ASCII header file with file extension `QHD` and the</span>
<span class="sd">    * binary data file with file extension `QBN`.</span>

<span class="sd">    The read method only accepts header files for the ``filename`` parameter.</span>
<span class="sd">    ObsPy assumes that the corresponding data file is within the same directory</span>
<span class="sd">    if the ``data_directory`` parameter is not set. Otherwise it will search</span>
<span class="sd">    in the given ``data_directory`` for a file with the `QBN` file extension.</span>
<span class="sd">    This function should NOT be called directly, it registers via the</span>
<span class="sd">    ObsPy :func:`~obspy.core.stream.read` function, call this instead.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy import read</span>
<span class="sd">    &gt;&gt;&gt; st = read(&quot;/path/to/QFILE-TEST.QHD&quot;)</span>
<span class="sd">    &gt;&gt;&gt; st    #doctest: +ELLIPSIS</span>
<span class="sd">    &lt;obspy.core.stream.Stream object at 0x...&gt;</span>
<span class="sd">    &gt;&gt;&gt; print(st)  # doctest: +ELLIPSIS</span>
<span class="sd">    3 Trace(s) in Stream:</span>
<span class="sd">    .TEST..BHN | 2009-10-01T12:46:01.000000Z - ... | 20.0 Hz, 801 samples</span>
<span class="sd">    .TEST..BHE | 2009-10-01T12:46:01.000000Z - ... | 20.0 Hz, 801 samples</span>
<span class="sd">    .WET..HHZ  | 2010-01-01T01:01:05.999000Z - ... | 100.0 Hz, 4001 samples</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">headonly</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data_directory</span><span class="p">:</span>
            <span class="n">data_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.QBN&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">data_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span> <span class="n">data_file</span> <span class="o">+</span> <span class="s1">&#39;.QBN&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">data_file</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Can&#39;t find corresponding QBN file at </span><span class="si">%s</span><span class="s2">.&quot;</span>
            <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="n">data_file</span><span class="p">)</span>
        <span class="n">fh_data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">data_file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
    <span class="c1"># loop through read header file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="c1"># number of comment lines</span>
    <span class="n">cmtlines</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">:</span><span class="mi">7</span><span class="p">])</span>
    <span class="c1"># trace lines</span>
    <span class="n">traces</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="n">cmtlines</span><span class="p">:]:</span>
        <span class="n">cid</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">cid</span> <span class="o">!=</span> <span class="nb">id</span><span class="p">:</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">cid</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">traces</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">traces</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
    <span class="c1"># create stream object</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">Stream</span><span class="p">()</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">traces</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="c1"># fetch headers</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;FROMQ&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;FILE&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="n">npts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">traces</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">):</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()[</span><span class="mi">5</span><span class="p">:]</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;L001&#39;</span><span class="p">:</span>
                <span class="n">npts</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">&#39;npts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;L000&#39;</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;R000&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;delta&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;R026&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;calib&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;S001&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;station&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;C000&#39;</span> <span class="ow">and</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;C001&#39;</span> <span class="ow">and</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;C002&#39;</span> <span class="ow">and</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">channel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;C003&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;&lt;&#39;</span> <span class="ow">or</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">:</span>
                    <span class="n">byteorder</span> <span class="o">=</span> <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="s1">&#39;BYTEORDER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;S021&#39;</span><span class="p">:</span>
                <span class="c1"># 01-JAN-2009_01:01:01.0</span>
                <span class="c1"># 1-OCT-2009_12:46:01.000</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;starttime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;S022&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="s1">&#39;P-ONSET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;S023&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="s1">&#39;S-ONSET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="o">==</span> <span class="s1">&#39;S024&#39;</span><span class="p">:</span>
                <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="s1">&#39;ORIGIN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">INVERTED_SH_IDX</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">SH_KEYS_INT</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">SH_KEYS_FLOAT</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># set channel code</span>
        <span class="n">header</span><span class="p">[</span><span class="s1">&#39;channel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
        <span class="c1"># remember record number</span>
        <span class="n">header</span><span class="p">[</span><span class="s1">&#39;sh&#39;</span><span class="p">][</span><span class="s1">&#39;RECNO&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">headonly</span><span class="p">:</span>
            <span class="c1"># skip data</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trace</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">npts</span><span class="p">:</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trace</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="c1"># read data</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">fh_data</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">npts</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>
            <span class="n">dtype</span> <span class="o">=</span> <span class="n">native_str</span><span class="p">(</span><span class="n">byteorder</span> <span class="o">+</span> <span class="s1">&#39;f4&#39;</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
            <span class="c1"># convert to system byte order</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">native_str</span><span class="p">(</span><span class="s1">&#39;=f4&#39;</span><span class="p">))</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Trace</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">headonly</span><span class="p">:</span>
        <span class="n">fh_data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">stream</span></div>


<div class="viewcode-block" id="_write_q"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core._write_q.html#obspy.io.sh.core._write_q">[docs]</a><span class="k">def</span> <span class="nf">_write_q</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">data_directory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">,</span>
             <span class="n">append</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># @UnusedVariable</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes a Seismic Handler Q file from given ObsPy Stream object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        the :meth:`~obspy.core.stream.Stream.write` method of an</span>
<span class="sd">        ObsPy :class:`~obspy.core.stream.Stream` object, call this instead.</span>

<span class="sd">    :type stream: :class:`~obspy.core.stream.Stream`</span>
<span class="sd">    :param stream: The ObsPy Stream object to write.</span>
<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the Q file to write.</span>
<span class="sd">    :type data_directory: str, optional</span>
<span class="sd">    :param data_directory: Data directory where the corresponding QBN will be</span>
<span class="sd">        written.</span>
<span class="sd">    :type byteorder: str, optional</span>
<span class="sd">    :param byteorder: Enforce byte order for data file. Can be little endian</span>
<span class="sd">        (``&#39;&lt;&#39;``), big endian (``&#39;&gt;&#39;``), or native byte order (``&#39;=&#39;``).</span>
<span class="sd">        Defaults to ``&#39;=&#39;``.</span>
<span class="sd">    :type append: bool, optional</span>
<span class="sd">    :param append: If filename exists append all data to file, default False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.QHD&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.QBN&#39;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">data_directory</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">filename_data</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data_directory</span><span class="p">,</span> <span class="n">temp</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filename_data</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="n">filename_header</span> <span class="o">=</span> <span class="n">filename</span> <span class="o">+</span> <span class="s1">&#39;.QHD&#39;</span>

    <span class="c1"># if the header file exists its assumed that the data is also there</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename_header</span><span class="p">)</span> <span class="ow">and</span> <span class="n">append</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">trcs</span> <span class="o">=</span> <span class="n">_read_q</span><span class="p">(</span><span class="n">filename_header</span><span class="p">,</span> <span class="n">headonly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;ab&#39;</span>
            <span class="n">count_offset</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">trcs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Target filename &#39;</span><span class="si">%s</span><span class="s2">&#39; not readable!&quot;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">append</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s1">&#39;wb&#39;</span>
        <span class="n">count_offset</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename_header</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
    <span class="n">fh_data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename_data</span> <span class="o">+</span> <span class="s1">&#39;.QBN&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

    <span class="c1"># build up header strings</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">minnol</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">cur_npts</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="s2">&quot;L000:</span><span class="si">%d</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">cur_npts</span>
        <span class="n">cur_npts</span> <span class="o">+=</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span>
        <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;L001:</span><span class="si">%d</span><span class="s2">~ R000:</span><span class="si">%f</span><span class="s2">~ R026:</span><span class="si">%f</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">npts</span><span class="p">,</span>
                                                 <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">delta</span><span class="p">,</span>
                                                 <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">calib</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;S001:</span><span class="si">%s</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">station</span>
        <span class="c1"># component must be split</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;C000:</span><span class="si">%c</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;C001:</span><span class="si">%c</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;C002:</span><span class="si">%c</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">channel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># special format for start time</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">starttime</span>
        <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;S021:</span><span class="si">%s</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="n">from_utcdatetime</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">trace</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sh&#39;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># skip unknown keys</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span> <span class="ow">or</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SH_IDX</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="c1"># convert UTCDateTimes into strings</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">UTCDateTime</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">from_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">temp</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">~ &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">SH_IDX</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
        <span class="c1"># get maximal number of trclines</span>
        <span class="n">nol</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="o">//</span> <span class="mi">74</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">nol</span> <span class="o">&gt;</span> <span class="n">minnol</span><span class="p">:</span>
            <span class="n">minnol</span> <span class="o">=</span> <span class="n">nol</span>
    <span class="c1"># first line: magic number, cmtlines, trclines</span>
    <span class="c1"># XXX: comment lines are ignored</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">append</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;43981 1 </span><span class="si">%d</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">minnol</span>
        <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">trace</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stream</span><span class="p">):</span>
        <span class="c1"># write headers</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="p">[</span><span class="n">headers</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">:</span><span class="n">j</span> <span class="o">+</span> <span class="mi">74</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span> <span class="mi">74</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">minnol</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%02d</span><span class="s2">|</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">count_offset</span><span class="p">)</span> <span class="o">%</span> <span class="mi">100</span><span class="p">,</span> <span class="n">temp</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%02d</span><span class="s2">|</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">count_offset</span><span class="p">)</span> <span class="o">%</span> <span class="mi">100</span><span class="p">)</span>
                <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">))</span>
        <span class="c1"># write data in given byte order</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="n">native_str</span><span class="p">(</span><span class="n">byteorder</span> <span class="o">+</span> <span class="s1">&#39;f4&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">require</span><span class="p">(</span><span class="n">trace</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">fh_data</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fh_data</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="to_utcdatetime"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core.to_utcdatetime.html#obspy.io.sh.core.to_utcdatetime">[docs]</a><span class="k">def</span> <span class="nf">to_utcdatetime</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts time string used within Seismic Handler into a UTCDateTime.</span>

<span class="sd">    :type value: str</span>
<span class="sd">    :param value: A Date time string.</span>
<span class="sd">    :return: Converted :class:`~obspy.core.utcdatetime.UTCDateTime` object.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39; 2-JAN-2008_03:04:05.123&#39;)</span>
<span class="sd">    UTCDateTime(2008, 1, 2, 3, 4, 5, 123000)</span>
<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39;2-JAN-2008&#39;)</span>
<span class="sd">    UTCDateTime(2008, 1, 2, 0, 0)</span>
<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39;2-JAN-08&#39;)</span>
<span class="sd">    UTCDateTime(2008, 1, 2, 0, 0)</span>
<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39;2-JAN-99&#39;)</span>
<span class="sd">    UTCDateTime(1999, 1, 2, 0, 0)</span>
<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39;2-JAN-2008_1&#39;)</span>
<span class="sd">    UTCDateTime(2008, 1, 2, 1, 0)</span>
<span class="sd">    &gt;&gt;&gt; to_utcdatetime(&#39;2-JAN-2008_1:1&#39;)</span>
<span class="sd">    UTCDateTime(2008, 1, 2, 1, 1)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">date</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">time</span> <span class="o">=</span> <span class="s2">&quot;0:0:0&quot;</span>
    <span class="n">day</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">year</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">hour</span><span class="p">,</span> <span class="n">mins</span><span class="p">,</span> <span class="n">secs</span> <span class="o">=</span> <span class="n">time</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="n">hour</span> <span class="o">=</span> <span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">mins</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="n">secs</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">mins</span> <span class="o">=</span> <span class="n">time</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
    <span class="n">month</span> <span class="o">=</span> <span class="n">MONTHS</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">month</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">70</span><span class="p">:</span>
            <span class="n">year</span> <span class="o">=</span> <span class="s2">&quot;20&quot;</span> <span class="o">+</span> <span class="n">year</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">year</span> <span class="o">=</span> <span class="s2">&quot;19&quot;</span> <span class="o">+</span> <span class="n">year</span>
    <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
    <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">hour</span><span class="p">)</span>
    <span class="n">mins</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">mins</span><span class="p">)</span>
    <span class="n">secs</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">secs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">mins</span><span class="p">)</span> <span class="o">+</span> <span class="n">secs</span></div>


<div class="viewcode-block" id="from_utcdatetime"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.sh.core.from_utcdatetime.html#obspy.io.sh.core.from_utcdatetime">[docs]</a><span class="k">def</span> <span class="nf">from_utcdatetime</span><span class="p">(</span><span class="n">dt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts UTCDateTime object into a time string used within Seismic Handler.</span>

<span class="sd">    :type dt: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">    :param dt: A UTCDateTime object.</span>
<span class="sd">    :return: Converted date time string usable by Seismic Handler.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy import UTCDateTime</span>
<span class="sd">    &gt;&gt;&gt; dt = UTCDateTime(2008, 1, 2, 3, 4, 5, 123456)</span>
<span class="sd">    &gt;&gt;&gt; print(from_utcdatetime(dt))</span>
<span class="sd">     2-JAN-2008_03:04:05.123</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%2d</span><span class="s2">-</span><span class="si">%3s</span><span class="s2">-</span><span class="si">%4d</span><span class="s2">_</span><span class="si">%02d</span><span class="s2">:</span><span class="si">%02d</span><span class="s2">:</span><span class="si">%02d</span><span class="s2">.</span><span class="si">%03d</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="n">pattern</span> <span class="o">%</span> <span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">MONTHS</span><span class="p">[</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
                      <span class="n">dt</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">second</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span></div>


<span class="c1"># Remove once 0.11 has been released.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynamicAttributeImportRerouteModule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">,</span> <span class="n">locs</span><span class="o">=</span><span class="nb">locals</span><span class="p">(),</span>
    <span class="n">original_module</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">],</span>
    <span class="n">import_map</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">function_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;fromUTCDateTime&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core.from_utcdatetime&#39;</span><span class="p">,</span>
        <span class="s1">&#39;isASC&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._is_asc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;isQ&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._is_q&#39;</span><span class="p">,</span>
        <span class="s1">&#39;readASC&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._read_asc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;readQ&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._read_q&#39;</span><span class="p">,</span>
        <span class="s1">&#39;writeASC&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._write_asc&#39;</span><span class="p">,</span>
        <span class="s1">&#39;writeQ&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.sh.core._write_q&#39;</span><span class="p">})</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a> &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, lafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Kufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaim, Sbastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clment</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Khler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>