<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.stationxml.core &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.io.stationxml.core</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Functions dealing with reading and writing StationXML.</span>

<span class="sd">:copyright:</span>
<span class="sd">    Lion Krischer (krischer@geophysik.uni-muenchen.de), 2013</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>

<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="k">import</span> <span class="n">etree</span>

<span class="kn">import</span> <span class="nn">obspy</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.deprecation_helpers</span> <span class="k">import</span> \
    <span class="n">DynamicAttributeImportRerouteModule</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.obspy_types</span> <span class="k">import</span> <span class="p">(</span><span class="n">ComplexWithUncertainties</span><span class="p">,</span>
                                         <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">obspy.core.inventory</span> <span class="k">import</span> <span class="p">(</span><span class="n">CoefficientsTypeResponseStage</span><span class="p">,</span>
                                  <span class="n">CoefficientWithUncertainties</span><span class="p">,</span>
                                  <span class="n">FilterCoefficient</span><span class="p">,</span> <span class="n">FIRResponseStage</span><span class="p">,</span>
                                  <span class="n">PolesZerosResponseStage</span><span class="p">,</span>
                                  <span class="n">PolynomialResponseStage</span><span class="p">,</span>
                                  <span class="n">ResponseListResponseStage</span><span class="p">,</span> <span class="n">ResponseStage</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">obspy.core.inventory</span> <span class="k">import</span> <span class="p">(</span><span class="n">Angle</span><span class="p">,</span> <span class="n">Azimuth</span><span class="p">,</span> <span class="n">ClockDrift</span><span class="p">,</span> <span class="n">Dip</span><span class="p">,</span> <span class="n">Distance</span><span class="p">,</span>
                                  <span class="n">Frequency</span><span class="p">,</span> <span class="n">Latitude</span><span class="p">,</span> <span class="n">Longitude</span><span class="p">,</span> <span class="n">SampleRate</span><span class="p">)</span>


<span class="c1"># Define some constants for writing StationXML files.</span>
<span class="n">SOFTWARE_MODULE</span> <span class="o">=</span> <span class="s2">&quot;ObsPy </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obspy</span><span class="o">.</span><span class="n">__version__</span>
<span class="n">SOFTWARE_URI</span> <span class="o">=</span> <span class="s2">&quot;https://www.obspy.org&quot;</span>
<span class="n">SCHEMA_VERSION</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>


<div class="viewcode-block" id="_is_stationxml"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._is_stationxml.html#obspy.io.stationxml.core._is_stationxml">[docs]</a><span class="k">def</span> <span class="nf">_is_stationxml</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simple function checking if the passed object contains a valid StationXML</span>
<span class="sd">    1.0 file. Returns True of False.</span>

<span class="sd">    The test is not exhaustive - it only checks the root tag but that should</span>
<span class="sd">    be good enough for most real world use cases. If the schema is used to</span>
<span class="sd">    test for a StationXML file, many real world files are false negatives as</span>
<span class="sd">    they don&#39;t adhere to the standard.</span>

<span class="sd">    :param path_or_file_object: File name or file like object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">,</span> <span class="s2">&quot;tell&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">,</span>
                                                        <span class="s2">&quot;seek&quot;</span><span class="p">):</span>
        <span class="n">current_position</span> <span class="o">=</span> <span class="n">path_or_file_object</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">):</span>
            <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">path_or_file_object</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLSyntaxError</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">xmldoc</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
                <span class="sa">r</span><span class="s1">&#39;{http://www.fdsn.org/xml/station/[0-9]+}FDSNStationXML&#39;</span><span class="p">,</span>
                <span class="n">root</span><span class="o">.</span><span class="n">tag</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">match</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="c1"># Convert schema number to a float to have positive comparisons</span>
        <span class="c1"># between, e.g &quot;1&quot; and &quot;1.0&quot;.</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;schemaVersion&quot;</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">float</span><span class="p">(</span><span class="n">SCHEMA_VERSION</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The StationXML file has version </span><span class="si">%s</span><span class="s2">, ObsPy can &quot;</span>
                          <span class="s2">&quot;deal with version </span><span class="si">%s</span><span class="s2">. Proceed with caution.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                              <span class="n">root</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s2">&quot;schemaVersion&quot;</span><span class="p">],</span> <span class="n">SCHEMA_VERSION</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># Make sure to reset file pointer position.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path_or_file_object</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">current_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div>


<div class="viewcode-block" id="validate_stationxml"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core.validate_stationxml.html#obspy.io.stationxml.core.validate_stationxml">[docs]</a><span class="k">def</span> <span class="nf">validate_stationxml</span><span class="p">(</span><span class="n">path_or_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the given path is a valid StationXML file.</span>

<span class="sd">    Returns a tuple. The first item is a boolean describing if the validation</span>
<span class="sd">    was successful or not. The second item is a list of all found validation</span>
<span class="sd">    errors, if existent.</span>

<span class="sd">    :param path_or_object: File name or file like object. Can also be an etree</span>
<span class="sd">        element.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get the schema location.</span>
    <span class="n">schema_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))</span>
    <span class="n">schema_location</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">schema_location</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span>
                                   <span class="s2">&quot;fdsn-station-1.0.xsd&quot;</span><span class="p">)</span>

    <span class="n">xmlschema</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLSchema</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">schema_location</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path_or_object</span><span class="p">,</span> <span class="n">etree</span><span class="o">.</span><span class="n">_Element</span><span class="p">):</span>
        <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">path_or_object</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">xmldoc</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path_or_object</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">etree</span><span class="o">.</span><span class="n">XMLSyntaxError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;Not a XML file.&quot;</span><span class="p">,))</span>

    <span class="n">valid</span> <span class="o">=</span> <span class="n">xmlschema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">xmldoc</span><span class="p">)</span>

    <span class="c1"># Pretty error printing if the validation fails.</span>
    <span class="k">if</span> <span class="n">valid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">xmlschema</span><span class="o">.</span><span class="n">error_log</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="p">())</span></div>


<div class="viewcode-block" id="_read_stationxml"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_stationxml.html#obspy.io.stationxml.core._read_stationxml">[docs]</a><span class="k">def</span> <span class="nf">_read_stationxml</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function reading a StationXML file.</span>

<span class="sd">    :param path_or_file_object: File name or file like object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path_or_file_object</span><span class="p">)</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>

    <span class="c1"># Fix the namespace as its not always the default namespace. Will need</span>
    <span class="c1"># to be adjusted if the StationXML format gets another revision!</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="s2">&quot;http://www.fdsn.org/xml/station/1&quot;</span>

    <span class="k">def</span> <span class="nf">_ns</span><span class="p">(</span><span class="n">tagname</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">}</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">tagname</span><span class="p">)</span>

    <span class="c1"># Source and Created field must exist in a StationXML.</span>
    <span class="n">source</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Source&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">text</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="n">root</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Created&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># These are optional</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Sender&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">module</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Module&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">module_uri</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ModuleURI&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>

    <span class="n">networks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Network&quot;</span><span class="p">)):</span>
        <span class="n">networks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_network</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>

    <span class="n">inv</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Inventory</span><span class="p">(</span><span class="n">networks</span><span class="o">=</span><span class="n">networks</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
                                         <span class="n">sender</span><span class="o">=</span><span class="n">sender</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="n">created</span><span class="p">,</span>
                                         <span class="n">module</span><span class="o">=</span><span class="n">module</span><span class="p">,</span> <span class="n">module_uri</span><span class="o">=</span><span class="n">module_uri</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inv</span></div>


<div class="viewcode-block" id="_read_base_node"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_base_node.html#obspy.io.stationxml.core._read_base_node">[docs]</a><span class="k">def</span> <span class="nf">_read_base_node</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">object_to_write_to</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads the base node structure from element and saves it in</span>
<span class="sd">    object_to_write_to.</span>

<span class="sd">    Reads everything except the &#39;code&#39; attribute.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">start_date</span> <span class="o">=</span> \
        <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;startDate&quot;</span><span class="p">,</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">end_date</span> <span class="o">=</span> \
        <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;endDate&quot;</span><span class="p">,</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">restricted_status</span> <span class="o">=</span> \
        <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;restrictedStatus&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">alternate_code</span> <span class="o">=</span> \
        <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;alternateCode&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">historical_code</span> <span class="o">=</span> \
        <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;historicalCode&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Comment&quot;</span><span class="p">)):</span>
        <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_comment</span><span class="p">(</span><span class="n">comment</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="c1"># Availability.</span>
    <span class="n">data_availability</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;DataAvailability&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">data_availability</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">object_to_write_to</span><span class="o">.</span><span class="n">data_availability</span> <span class="o">=</span> \
            <span class="n">_read_data_availability</span><span class="p">(</span><span class="n">data_availability</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_network"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_network.html#obspy.io.stationxml.core._read_network">[docs]</a><span class="k">def</span> <span class="nf">_read_network</span><span class="p">(</span><span class="n">net_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">net_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">))</span>
    <span class="n">_read_base_node</span><span class="p">(</span><span class="n">net_element</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">total_number_of_stations</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">net_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;TotalNumberStations&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">network</span><span class="o">.</span><span class="n">selected_number_of_stations</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">net_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;SelectedNumberStations&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">stations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">net_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Station&quot;</span><span class="p">)):</span>
        <span class="n">stations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_station</span><span class="p">(</span><span class="n">station</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="n">network</span><span class="o">.</span><span class="n">stations</span> <span class="o">=</span> <span class="n">stations</span>
    <span class="k">return</span> <span class="n">network</span></div>


<div class="viewcode-block" id="_read_station"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_station.html#obspy.io.stationxml.core._read_station">[docs]</a><span class="k">def</span> <span class="nf">_read_station</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Longitude&quot;</span><span class="p">),</span> <span class="n">Longitude</span><span class="p">,</span>
                                <span class="n">datum</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Latitude&quot;</span><span class="p">),</span> <span class="n">Latitude</span><span class="p">,</span>
                               <span class="n">datum</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">elevation</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Elevation&quot;</span><span class="p">),</span> <span class="n">Distance</span><span class="p">,</span>
                                <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">station</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Station</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="n">sta_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">),</span>
                                           <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span>
                                           <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span>
                                           <span class="n">elevation</span><span class="o">=</span><span class="n">elevation</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">_read_site</span><span class="p">(</span><span class="n">sta_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Site&quot;</span><span class="p">)),</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="n">_read_base_node</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">vault</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Vault&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">geology</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Geology&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">equipment</span> <span class="ow">in</span> <span class="n">sta_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Equipment&quot;</span><span class="p">)):</span>
        <span class="n">station</span><span class="o">.</span><span class="n">equipments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_equipment</span><span class="p">(</span><span class="n">equipment</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">sta_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Operator&quot;</span><span class="p">)):</span>
        <span class="n">station</span><span class="o">.</span><span class="n">operators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_operator</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="n">station</span><span class="o">.</span><span class="n">creation_date</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;CreationDate&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">termination_date</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;TerminationDate&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">selected_number_of_channels</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;SelectedNumberChannels&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">station</span><span class="o">.</span><span class="n">total_number_of_channels</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sta_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;TotalNumberChannels&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">sta_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ExternalReference&quot;</span><span class="p">)):</span>
        <span class="n">station</span><span class="o">.</span><span class="n">external_references</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_external_reference</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="n">channels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">sta_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Channel&quot;</span><span class="p">)):</span>
        <span class="n">channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_channel</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="n">station</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="n">channels</span>
    <span class="k">return</span> <span class="n">station</span></div>


<div class="viewcode-block" id="_read_floattype"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_floattype.html#obspy.io.stationxml.core._read_floattype">[docs]</a><span class="k">def</span> <span class="nf">_read_floattype</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">datum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{}):</span>
    <span class="n">elem</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Catch non convertible numbers.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">convert</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; could not be converted to a float. Will be skipped. Please &quot;</span>
            <span class="s2">&quot;contact to report this issue.&quot;</span> <span class="o">%</span> <span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">elem</span><span class="p">),</span>
            <span class="ne">UserWarning</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Catch NaNs.</span>
    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">convert</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Tag &#39;</span><span class="si">%s</span><span class="s2">&#39; has a value of NaN. It will be skipped.&quot;</span> <span class="o">%</span>
                      <span class="n">tag</span><span class="p">,</span> <span class="ne">UserWarning</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">convert</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">unit</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;unit&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">datum</span><span class="p">:</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;datum&quot;</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">lower_uncertainty</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minusError&quot;</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">upper_uncertainty</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plusError&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">key2</span> <span class="ow">in</span> <span class="n">additional_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key2</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">obj</span></div>


<div class="viewcode-block" id="_read_floattype_list"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_floattype_list.html#obspy.io.stationxml.core._read_floattype_list">[docs]</a><span class="k">def</span> <span class="nf">_read_floattype_list</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="bp">cls</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">datum</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                         <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{}):</span>
    <span class="n">elems</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">objs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">elems</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">unit</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;unit&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">datum</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">datum</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;datum&quot;</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">lower_uncertainty</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;minusError&quot;</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">upper_uncertainty</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;plusError&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">key2</span> <span class="ow">in</span> <span class="n">additional_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">key2</span><span class="p">,</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key1</span><span class="p">))</span>
        <span class="n">objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">objs</span></div>


<div class="viewcode-block" id="_read_channel"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_channel.html#obspy.io.stationxml.core._read_channel">[docs]</a><span class="k">def</span> <span class="nf">_read_channel</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Longitude&quot;</span><span class="p">),</span> <span class="n">Longitude</span><span class="p">,</span>
                                <span class="n">datum</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Latitude&quot;</span><span class="p">),</span> <span class="n">Latitude</span><span class="p">,</span>
                               <span class="n">datum</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">elevation</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Elevation&quot;</span><span class="p">),</span> <span class="n">Distance</span><span class="p">,</span>
                                <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Depth&quot;</span><span class="p">),</span> <span class="n">Distance</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;code&quot;</span><span class="p">)</span>
    <span class="n">location_code</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;locationCode&quot;</span><span class="p">)</span>
    <span class="n">channel</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Channel</span><span class="p">(</span>
        <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">,</span> <span class="n">location_code</span><span class="o">=</span><span class="n">location_code</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">latitude</span><span class="p">,</span>
        <span class="n">longitude</span><span class="o">=</span><span class="n">longitude</span><span class="p">,</span> <span class="n">elevation</span><span class="o">=</span><span class="n">elevation</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
    <span class="n">_read_base_node</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Azimuth&quot;</span><span class="p">),</span> <span class="n">Azimuth</span><span class="p">)</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">dip</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Dip&quot;</span><span class="p">),</span> <span class="n">Dip</span><span class="p">)</span>
    <span class="c1"># Add all types.</span>
    <span class="k">for</span> <span class="n">type_element</span> <span class="ow">in</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">)):</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">type_element</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="c1"># Add all external references.</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">external_references</span> <span class="o">=</span> \
        <span class="p">[</span><span class="n">_read_external_reference</span><span class="p">(</span><span class="n">ext_ref</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">ext_ref</span> <span class="ow">in</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ExternalReference&quot;</span><span class="p">))]</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">sample_rate</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;SampleRate&quot;</span><span class="p">),</span>
                                          <span class="n">SampleRate</span><span class="p">)</span>
    <span class="c1"># Parse the optional sample rate ratio.</span>
    <span class="n">sample_rate_ratio</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;SampleRateRatio&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">sample_rate_ratio</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_samples</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sample_rate_ratio</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;NumberSamples&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_seconds</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sample_rate_ratio</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;NumberSeconds&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">storage_format</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;StorageFormat&quot;</span><span class="p">),</span>
                                      <span class="nb">str</span><span class="p">)</span>
    <span class="c1"># The clock drift is one of the few examples where the attribute name is</span>
    <span class="c1"># different from the tag name. This improves clarity.</span>
    <span class="n">channel</span><span class="o">.</span><span class="n">clock_drift_in_seconds_per_sample</span> <span class="o">=</span> \
        <span class="n">_read_floattype</span><span class="p">(</span><span class="n">cha_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ClockDrift&quot;</span><span class="p">),</span> <span class="n">ClockDrift</span><span class="p">)</span>
    <span class="c1"># The sensor.</span>
    <span class="n">calibunits</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;CalibrationUnits&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">calibunits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">calibration_units</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">calibunits</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">calibration_units_description</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">calibunits</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="c1"># The sensor.</span>
    <span class="n">sensor</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Sensor&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">sensor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">sensor</span> <span class="o">=</span> <span class="n">_read_equipment</span><span class="p">(</span><span class="n">sensor</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="c1"># The pre-amplifier</span>
    <span class="n">pre_amplifier</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;PreAmplifier&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">pre_amplifier</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">pre_amplifier</span> <span class="o">=</span> <span class="n">_read_equipment</span><span class="p">(</span><span class="n">pre_amplifier</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="c1"># The data logger</span>
    <span class="n">data_logger</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;DataLogger&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">data_logger</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">data_logger</span> <span class="o">=</span> <span class="n">_read_equipment</span><span class="p">(</span><span class="n">data_logger</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="c1"># Other equipment</span>
    <span class="n">equipment</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Equipment&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">equipment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">equipment</span> <span class="o">=</span> <span class="n">_read_equipment</span><span class="p">(</span><span class="n">equipment</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="c1"># Finally parse the response.</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">cha_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Response&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">channel</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="n">_read_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">channel</span></div>


<div class="viewcode-block" id="_read_response"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_response.html#obspy.io.stationxml.core._read_response">[docs]</a><span class="k">def</span> <span class="nf">_read_response</span><span class="p">(</span><span class="n">resp_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">Response</span><span class="p">()</span>
    <span class="n">response</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">resp_element</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resourceId&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">resource_id</span><span class="p">)</span>
    <span class="n">instrument_sensitivity</span> <span class="o">=</span> <span class="n">resp_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InstrumentSensitivity&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">instrument_sensitivity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">instrument_sensitivity</span> <span class="o">=</span> \
            <span class="n">_read_instrument_sensitivity</span><span class="p">(</span><span class="n">instrument_sensitivity</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="n">instrument_polynomial</span> <span class="o">=</span> <span class="n">resp_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InstrumentPolynomial&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">instrument_polynomial</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">instrument_polynomial</span> <span class="o">=</span> \
            <span class="n">_read_instrument_polynomial</span><span class="p">(</span><span class="n">instrument_polynomial</span><span class="p">,</span> <span class="n">_ns</span><span class="p">)</span>
    <span class="c1"># Now read all the stages.</span>
    <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="n">resp_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Stage&quot;</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">stage</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">response</span><span class="o">.</span><span class="n">response_stages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_response_stage</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="_read_response_stage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_response_stage.html#obspy.io.stationxml.core._read_response_stage">[docs]</a><span class="k">def</span> <span class="nf">_read_response_stage</span><span class="p">(</span><span class="n">stage_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This parses all ResponseStageTypes. It will return a different object</span>
<span class="sd">    depending on the actual response type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># The stage sequence number is required!</span>
    <span class="n">stage_sequence_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">stage_elem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;number&quot;</span><span class="p">))</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resourceId&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">resource_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_id</span><span class="p">)</span>
    <span class="c1"># All stages contain a stage gain and potentially a decimation.</span>
    <span class="n">gain_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;StageGain&quot;</span><span class="p">))</span>
    <span class="n">stage_gain</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">gain_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">stage_gain_frequency</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">gain_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="c1"># Parse the decimation.</span>
    <span class="n">decim_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Decimation&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">decim_elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">decimation_input_sample_rate</span> <span class="o">=</span> \
            <span class="n">_read_floattype</span><span class="p">(</span><span class="n">decim_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InputSampleRate&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
        <span class="n">decimation_factor</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">decim_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Factor&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">decimation_offset</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">decim_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Offset&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">decimation_delay</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">decim_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Delay&quot;</span><span class="p">),</span>
                                           <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span>
                                           <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">decimation_correction</span> <span class="o">=</span> \
            <span class="n">_read_floattype</span><span class="p">(</span><span class="n">decim_elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Correction&quot;</span><span class="p">),</span>
                            <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">decimation_input_sample_rate</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">decimation_factor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">decimation_offset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">decimation_delay</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">decimation_correction</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Now determine which response type it actually is and return the</span>
    <span class="c1"># corresponding object.</span>
    <span class="n">poles_zeros_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;PolesZeros&quot;</span><span class="p">))</span>
    <span class="n">coefficients_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Coefficients&quot;</span><span class="p">))</span>
    <span class="n">response_list_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ResponseList&quot;</span><span class="p">))</span>
    <span class="n">fir_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FIR&quot;</span><span class="p">))</span>
    <span class="n">polynomial_elem</span> <span class="o">=</span> <span class="n">stage_elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Polynomial&quot;</span><span class="p">))</span>

    <span class="n">type_elems</span> <span class="o">=</span> <span class="p">[</span><span class="n">poles_zeros_elem</span><span class="p">,</span> <span class="n">coefficients_elem</span><span class="p">,</span> <span class="n">response_list_elem</span><span class="p">,</span>
                  <span class="n">fir_elem</span><span class="p">,</span> <span class="n">polynomial_elem</span><span class="p">]</span>

    <span class="c1"># iterate and check for an response element and create alias</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">type_elems</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Nothing more to parse for gain only blockettes, create minimal</span>
        <span class="c1"># ResponseStage and return</span>
        <span class="k">if</span> <span class="n">stage_gain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">stage_gain_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">ResponseStage</span><span class="p">(</span>
                <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
                <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
                <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span>
                <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">input_units</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_units</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="c1"># Raise if none of the previous ones has been found.</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Could not find a valid Response Stage Type.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="c1"># Now parse all elements the different stages share.</span>
    <span class="n">input_units_</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InputUnits&quot;</span><span class="p">))</span>
    <span class="n">input_units</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">input_units_description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span>
                                       <span class="nb">str</span><span class="p">)</span>
    <span class="n">output_units_</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;OutputUnits&quot;</span><span class="p">))</span>
    <span class="n">output_units</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">output_units_description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span>
                                        <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="n">resource_id2</span> <span class="o">=</span> <span class="n">elem</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;resourceId&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">resource_id2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">resource_id2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resource_id2</span><span class="p">)</span>

    <span class="c1"># Now collect all shared kwargs to be able to pass them to the different</span>
    <span class="c1"># constructors..</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;stage_sequence_number&quot;</span><span class="p">:</span> <span class="n">stage_sequence_number</span><span class="p">,</span>
              <span class="s2">&quot;input_units&quot;</span><span class="p">:</span> <span class="n">input_units</span><span class="p">,</span>
              <span class="s2">&quot;output_units&quot;</span><span class="p">:</span> <span class="n">output_units</span><span class="p">,</span>
              <span class="s2">&quot;input_units_description&quot;</span><span class="p">:</span> <span class="n">input_units_description</span><span class="p">,</span>
              <span class="s2">&quot;output_units_description&quot;</span><span class="p">:</span> <span class="n">output_units_description</span><span class="p">,</span>
              <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="n">resource_id</span><span class="p">,</span> <span class="s2">&quot;resource_id2&quot;</span><span class="p">:</span> <span class="n">resource_id2</span><span class="p">,</span>
              <span class="s2">&quot;stage_gain&quot;</span><span class="p">:</span> <span class="n">stage_gain</span><span class="p">,</span>
              <span class="s2">&quot;stage_gain_frequency&quot;</span><span class="p">:</span> <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
              <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
              <span class="s2">&quot;decimation_input_sample_rate&quot;</span><span class="p">:</span> <span class="n">decimation_input_sample_rate</span><span class="p">,</span>
              <span class="s2">&quot;decimation_factor&quot;</span><span class="p">:</span> <span class="n">decimation_factor</span><span class="p">,</span>
              <span class="s2">&quot;decimation_offset&quot;</span><span class="p">:</span> <span class="n">decimation_offset</span><span class="p">,</span>
              <span class="s2">&quot;decimation_delay&quot;</span><span class="p">:</span> <span class="n">decimation_delay</span><span class="p">,</span>
              <span class="s2">&quot;decimation_correction&quot;</span><span class="p">:</span> <span class="n">decimation_correction</span><span class="p">}</span>

    <span class="c1"># Handle Poles and Zeros Response Stage Type.</span>
    <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">poles_zeros_elem</span><span class="p">:</span>
        <span class="n">pz_transfer_function_type</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;PzTransferFunctionType&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">normalization_factor</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;NormalizationFactor&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">normalization_frequency</span> <span class="o">=</span> \
            <span class="n">_read_floattype</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;NormalizationFrequency&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
        <span class="c1"># Read poles and zeros to list of imaginary numbers.</span>

        <span class="k">def</span> <span class="nf">_tag2pole_or_zero</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
            <span class="n">real</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Real&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Imaginary&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">real</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">imag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">real</span> <span class="o">=</span> <span class="n">real</span> <span class="ow">or</span> <span class="mi">0</span>
                <span class="n">imag</span> <span class="o">=</span> <span class="n">imag</span> <span class="ow">or</span> <span class="mi">0</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">ComplexWithUncertainties</span><span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)</span>
            <span class="n">real</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Real&quot;</span><span class="p">)),</span> <span class="s2">&quot;minusError&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Imaginary&quot;</span><span class="p">)),</span> <span class="s2">&quot;minusError&quot;</span><span class="p">,</span>
                             <span class="nb">float</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)]):</span>
                <span class="n">real</span> <span class="o">=</span> <span class="n">real</span> <span class="ow">or</span> <span class="mi">0</span>
                <span class="n">imag</span> <span class="o">=</span> <span class="n">imag</span> <span class="ow">or</span> <span class="mi">0</span>
                <span class="n">x</span><span class="o">.</span><span class="n">lower_uncertainty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)</span>
            <span class="n">real</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Real&quot;</span><span class="p">)),</span> <span class="s2">&quot;plusError&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
            <span class="n">imag</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Imaginary&quot;</span><span class="p">)),</span> <span class="s2">&quot;plusError&quot;</span><span class="p">,</span>
                             <span class="nb">float</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)]):</span>
                <span class="n">real</span> <span class="o">=</span> <span class="n">real</span> <span class="ow">or</span> <span class="mi">0</span>
                <span class="n">imag</span> <span class="o">=</span> <span class="n">imag</span> <span class="ow">or</span> <span class="mi">0</span>
                <span class="n">x</span><span class="o">.</span><span class="n">upper_uncertainty</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="n">real</span><span class="p">,</span> <span class="n">imag</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="n">zeros</span> <span class="o">=</span> <span class="p">[</span><span class="n">_tag2pole_or_zero</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Zero&quot;</span><span class="p">))]</span>
        <span class="n">poles</span> <span class="o">=</span> <span class="p">[</span><span class="n">_tag2pole_or_zero</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Pole&quot;</span><span class="p">))]</span>
        <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">PolesZerosResponseStage</span><span class="p">(</span>
            <span class="n">pz_transfer_function_type</span><span class="o">=</span><span class="n">pz_transfer_function_type</span><span class="p">,</span>
            <span class="n">normalization_frequency</span><span class="o">=</span><span class="n">normalization_frequency</span><span class="p">,</span>
            <span class="n">normalization_factor</span><span class="o">=</span><span class="n">normalization_factor</span><span class="p">,</span> <span class="n">zeros</span><span class="o">=</span><span class="n">zeros</span><span class="p">,</span>
            <span class="n">poles</span><span class="o">=</span><span class="n">poles</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Handle the coefficients Response Stage Type.</span>
    <span class="k">elif</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">coefficients_elem</span><span class="p">:</span>
        <span class="n">cf_transfer_function_type</span> <span class="o">=</span> \
            <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;CfTransferFunctionType&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">numerator</span> <span class="o">=</span> \
            <span class="n">_read_floattype_list</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Numerator&quot;</span><span class="p">),</span>
                                 <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">denominator</span> <span class="o">=</span> \
            <span class="n">_read_floattype_list</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Denominator&quot;</span><span class="p">),</span>
                                 <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">CoefficientsTypeResponseStage</span><span class="p">(</span>
            <span class="n">cf_transfer_function_type</span><span class="o">=</span><span class="n">cf_transfer_function_type</span><span class="p">,</span>
            <span class="n">numerator</span><span class="o">=</span><span class="n">numerator</span><span class="p">,</span> <span class="n">denominator</span><span class="o">=</span><span class="n">denominator</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Handle the response list response stage type.</span>
    <span class="k">elif</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">response_list_elem</span><span class="p">:</span>
        <span class="n">rlist_elems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">elem</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ResponseListElement&quot;</span><span class="p">)):</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
            <span class="n">amp</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Amplitude&quot;</span><span class="p">),</span>
                                  <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Phase&quot;</span><span class="p">),</span> <span class="n">Angle</span><span class="p">)</span>
            <span class="n">rlist_elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">ResponseListElement</span><span class="p">(</span>
                    <span class="n">frequency</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="n">amp</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">ResponseListResponseStage</span><span class="p">(</span>
            <span class="n">response_list_elements</span><span class="o">=</span><span class="n">rlist_elems</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Handle the FIR response stage type.</span>
    <span class="k">elif</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">fir_elem</span><span class="p">:</span>
        <span class="n">symmetry</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Symmetry&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">coeffs</span> <span class="o">=</span> <span class="n">_read_floattype_list</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;NumeratorCoefficient&quot;</span><span class="p">),</span>
                                      <span class="n">FilterCoefficient</span><span class="p">,</span>
                                      <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">FIRResponseStage</span><span class="p">(</span>
            <span class="n">coefficients</span><span class="o">=</span><span class="n">coeffs</span><span class="p">,</span> <span class="n">symmetry</span><span class="o">=</span><span class="n">symmetry</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># Handle polynomial instrument responses.</span>
    <span class="k">elif</span> <span class="n">elem</span> <span class="ow">is</span> <span class="n">polynomial_elem</span><span class="p">:</span>
        <span class="n">appr_type</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationType&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
        <span class="n">f_low</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyLowerBound&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
        <span class="n">f_high</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyUpperBound&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
        <span class="n">appr_low</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationLowerBound&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">appr_high</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationUpperBound&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">max_err</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;MaximumError&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
        <span class="n">coeffs</span> <span class="o">=</span> <span class="n">_read_floattype_list</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Coefficient&quot;</span><span class="p">),</span>
                                      <span class="n">CoefficientWithUncertainties</span><span class="p">,</span>
                                      <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">PolynomialResponseStage</span><span class="p">(</span>
            <span class="n">approximation_type</span><span class="o">=</span><span class="n">appr_type</span><span class="p">,</span> <span class="n">frequency_lower_bound</span><span class="o">=</span><span class="n">f_low</span><span class="p">,</span>
            <span class="n">frequency_upper_bound</span><span class="o">=</span><span class="n">f_high</span><span class="p">,</span> <span class="n">approximation_lower_bound</span><span class="o">=</span><span class="n">appr_low</span><span class="p">,</span>
            <span class="n">approximation_upper_bound</span><span class="o">=</span><span class="n">appr_high</span><span class="p">,</span> <span class="n">maximum_error</span><span class="o">=</span><span class="n">max_err</span><span class="p">,</span>
            <span class="n">coefficients</span><span class="o">=</span><span class="n">coeffs</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_instrument_sensitivity"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_instrument_sensitivity.html#obspy.io.stationxml.core._read_instrument_sensitivity">[docs]</a><span class="k">def</span> <span class="nf">_read_instrument_sensitivity</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">frequency</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Frequency&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">input_units_</span> <span class="o">=</span> <span class="n">sensitivity_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InputUnits&quot;</span><span class="p">))</span>
    <span class="n">output_units_</span> <span class="o">=</span> <span class="n">sensitivity_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;OutputUnits&quot;</span><span class="p">))</span>
    <span class="n">sensitivity</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">InstrumentSensitivity</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">frequency</span><span class="o">=</span><span class="n">frequency</span><span class="p">,</span>
        <span class="n">input_units</span><span class="o">=</span><span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">),</span>
        <span class="n">output_units</span><span class="o">=</span><span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">))</span>
    <span class="n">sensitivity</span><span class="o">.</span><span class="n">input_units_description</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">sensitivity</span><span class="o">.</span><span class="n">output_units_description</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">sensitivity</span><span class="o">.</span><span class="n">frequency_range_start</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyStart&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">sensitivity</span><span class="o">.</span><span class="n">frequency_range_end</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyEnd&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">sensitivity</span><span class="o">.</span><span class="n">frequency_range_db_variation</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">sensitivity_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyDBVariation&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sensitivity</span></div>


<div class="viewcode-block" id="_read_instrument_polynomial"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_instrument_polynomial.html#obspy.io.stationxml.core._read_instrument_polynomial">[docs]</a><span class="k">def</span> <span class="nf">_read_instrument_polynomial</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="c1"># XXX duplicated code, see reading of PolynomialResponseStage</span>
    <span class="n">input_units_</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InputUnits&quot;</span><span class="p">))</span>
    <span class="n">input_units</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">input_units_description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">input_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span>
                                       <span class="nb">str</span><span class="p">)</span>
    <span class="n">output_units_</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;OutputUnits&quot;</span><span class="p">))</span>
    <span class="n">output_units</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">output_units_description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">output_units_</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span>
                                        <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resourceId&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="n">appr_type</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationType&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">f_low</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyLowerBound&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
    <span class="n">f_high</span> <span class="o">=</span> <span class="n">_read_floattype</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;FrequencyUpperBound&quot;</span><span class="p">),</span> <span class="n">Frequency</span><span class="p">)</span>
    <span class="n">appr_low</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationLowerBound&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">appr_high</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;ApproximationUpperBound&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">max_err</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;MaximumError&quot;</span><span class="p">),</span> <span class="nb">float</span><span class="p">)</span>
    <span class="n">coeffs</span> <span class="o">=</span> <span class="n">_read_floattype_list</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Coefficient&quot;</span><span class="p">),</span>
                                  <span class="n">CoefficientWithUncertainties</span><span class="p">,</span>
                                  <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">InstrumentPolynomial</span><span class="p">(</span>
        <span class="n">approximation_type</span><span class="o">=</span><span class="n">appr_type</span><span class="p">,</span> <span class="n">frequency_lower_bound</span><span class="o">=</span><span class="n">f_low</span><span class="p">,</span>
        <span class="n">frequency_upper_bound</span><span class="o">=</span><span class="n">f_high</span><span class="p">,</span> <span class="n">approximation_lower_bound</span><span class="o">=</span><span class="n">appr_low</span><span class="p">,</span>
        <span class="n">approximation_upper_bound</span><span class="o">=</span><span class="n">appr_high</span><span class="p">,</span> <span class="n">maximum_error</span><span class="o">=</span><span class="n">max_err</span><span class="p">,</span>
        <span class="n">coefficients</span><span class="o">=</span><span class="n">coeffs</span><span class="p">,</span> <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
        <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
        <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
        <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_external_reference"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_external_reference.html#obspy.io.stationxml.core._read_external_reference">[docs]</a><span class="k">def</span> <span class="nf">_read_external_reference</span><span class="p">(</span><span class="n">ref_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">ref_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;URI&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">ref_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">ExternalReference</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
                                                  <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_operator"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_operator.html#obspy.io.stationxml.core._read_operator">[docs]</a><span class="k">def</span> <span class="nf">_read_operator</span><span class="p">(</span><span class="n">operator_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">agencies</span> <span class="o">=</span> <span class="p">[</span><span class="n">_i</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="n">operator_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Agency&quot;</span><span class="p">))]</span>
    <span class="n">contacts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">contact</span> <span class="ow">in</span> <span class="n">operator_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Contact&quot;</span><span class="p">)):</span>
        <span class="n">contacts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_person</span><span class="p">(</span><span class="n">contact</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">operator_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;WebSite&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Operator</span><span class="p">(</span><span class="n">agencies</span><span class="o">=</span><span class="n">agencies</span><span class="p">,</span> <span class="n">contacts</span><span class="o">=</span><span class="n">contacts</span><span class="p">,</span>
                                         <span class="n">website</span><span class="o">=</span><span class="n">website</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_data_availability"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_data_availability.html#obspy.io.stationxml.core._read_data_availability">[docs]</a><span class="k">def</span> <span class="nf">_read_data_availability</span><span class="p">(</span><span class="n">avail_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="n">avail_element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Extent&quot;</span><span class="p">))</span>
    <span class="c1"># Recovery from empty Extent tags.</span>
    <span class="k">if</span> <span class="n">extent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">extent</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="n">extent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">))</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="n">extent</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">DataAvailability</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_equipment"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_equipment.html#obspy.io.stationxml.core._read_equipment">[docs]</a><span class="k">def</span> <span class="nf">_read_equipment</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">resource_id</span> <span class="o">=</span> <span class="n">equip_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resourceId&quot;</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Type&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Manufacturer&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">vendor</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Vendor&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Model&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">serial_number</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;SerialNumber&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">installation_date</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;InstallationDate&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">removal_date</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">equip_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;RemovalDate&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">calibration_dates</span> <span class="o">=</span> \
        <span class="p">[</span><span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">(</span><span class="n">_i</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
         <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="n">equip_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;CalibrationDate&quot;</span><span class="p">))]</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Equipment</span><span class="p">(</span>
        <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
        <span class="n">manufacturer</span><span class="o">=</span><span class="n">manufacturer</span><span class="p">,</span> <span class="n">vendor</span><span class="o">=</span><span class="n">vendor</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
        <span class="n">serial_number</span><span class="o">=</span><span class="n">serial_number</span><span class="p">,</span> <span class="n">installation_date</span><span class="o">=</span><span class="n">installation_date</span><span class="p">,</span>
        <span class="n">removal_date</span><span class="o">=</span><span class="n">removal_date</span><span class="p">,</span> <span class="n">calibration_dates</span><span class="o">=</span><span class="n">calibration_dates</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_site"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_site.html#obspy.io.stationxml.core._read_site">[docs]</a><span class="k">def</span> <span class="nf">_read_site</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Description&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">town</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Town&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">county</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;County&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">region</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Region&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">country</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">site_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Country&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Site</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
                                     <span class="n">town</span><span class="o">=</span><span class="n">town</span><span class="p">,</span> <span class="n">county</span><span class="o">=</span><span class="n">county</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                                     <span class="n">country</span><span class="o">=</span><span class="n">country</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_comment"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_comment.html#obspy.io.stationxml.core._read_comment">[docs]</a><span class="k">def</span> <span class="nf">_read_comment</span><span class="p">(</span><span class="n">comment_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">comment_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Value&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">begin_effective_time</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">comment_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;BeginEffectiveTime&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">end_effective_time</span> <span class="o">=</span> \
        <span class="n">_tag2obj</span><span class="p">(</span><span class="n">comment_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;EndEffectiveTime&quot;</span><span class="p">),</span> <span class="n">obspy</span><span class="o">.</span><span class="n">UTCDateTime</span><span class="p">)</span>
    <span class="n">authors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">_attr2obj</span><span class="p">(</span><span class="n">comment_element</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">comment_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Author&quot;</span><span class="p">)):</span>
        <span class="n">authors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_person</span><span class="p">(</span><span class="n">author</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Comment</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">begin_effective_time</span><span class="o">=</span><span class="n">begin_effective_time</span><span class="p">,</span>
        <span class="n">end_effective_time</span><span class="o">=</span><span class="n">end_effective_time</span><span class="p">,</span> <span class="n">authors</span><span class="o">=</span><span class="n">authors</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_person"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_person.html#obspy.io.stationxml.core._read_person">[docs]</a><span class="k">def</span> <span class="nf">_read_person</span><span class="p">(</span><span class="n">person_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">names</span> <span class="o">=</span> <span class="n">_tags2obj</span><span class="p">(</span><span class="n">person_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">agencies</span> <span class="o">=</span> <span class="n">_tags2obj</span><span class="p">(</span><span class="n">person_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Agency&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">emails</span> <span class="o">=</span> <span class="n">_tags2obj</span><span class="p">(</span><span class="n">person_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Email&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">phones</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">person_element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;Phone&quot;</span><span class="p">)):</span>
        <span class="n">phones</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_read_phone</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">_ns</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">Person</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span> <span class="n">agencies</span><span class="o">=</span><span class="n">agencies</span><span class="p">,</span>
                                       <span class="n">emails</span><span class="o">=</span><span class="n">emails</span><span class="p">,</span> <span class="n">phones</span><span class="o">=</span><span class="n">phones</span><span class="p">)</span></div>


<div class="viewcode-block" id="_read_phone"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._read_phone.html#obspy.io.stationxml.core._read_phone">[docs]</a><span class="k">def</span> <span class="nf">_read_phone</span><span class="p">(</span><span class="n">phone_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">):</span>
    <span class="n">country_code</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">phone_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;CountryCode&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">area_code</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">phone_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;AreaCode&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">phone_number</span> <span class="o">=</span> <span class="n">_tag2obj</span><span class="p">(</span><span class="n">phone_element</span><span class="p">,</span> <span class="n">_ns</span><span class="p">(</span><span class="s2">&quot;PhoneNumber&quot;</span><span class="p">),</span> <span class="nb">str</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">phone_element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obspy</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">PhoneNumber</span><span class="p">(</span>
        <span class="n">country_code</span><span class="o">=</span><span class="n">country_code</span><span class="p">,</span> <span class="n">area_code</span><span class="o">=</span><span class="n">area_code</span><span class="p">,</span>
        <span class="n">phone_number</span><span class="o">=</span><span class="n">phone_number</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_stationxml"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_stationxml.html#obspy.io.stationxml.core._write_stationxml">[docs]</a><span class="k">def</span> <span class="nf">_write_stationxml</span><span class="p">(</span><span class="n">inventory</span><span class="p">,</span> <span class="n">file_or_file_object</span><span class="p">,</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Writes an inventory object to a buffer.</span>

<span class="sd">    :type inventory: :class:`~obspy.core.inventory.Inventory`</span>
<span class="sd">    :param inventory: The inventory instance to be written.</span>
<span class="sd">    :param file_or_file_object: The file or file-like object to be written to.</span>
<span class="sd">    :type validate: bool</span>
<span class="sd">    :param validate: If True, the created document will be validated with the</span>
<span class="sd">        StationXML schema before being written. Useful for debugging or if you</span>
<span class="sd">        don&#39;t trust ObsPy. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check if any of the channels has a data availability element. In that</span>
    <span class="c1"># case the namespaces need to be adjusted.</span>
    <span class="n">data_availability</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">net</span> <span class="ow">in</span> <span class="n">inventory</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">sta</span> <span class="ow">in</span> <span class="n">net</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">cha</span> <span class="ow">in</span> <span class="n">sta</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cha</span><span class="o">.</span><span class="n">data_availability</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">data_availability</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">break</span>

    <span class="k">if</span> <span class="n">data_availability</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span>
            <span class="s2">&quot;FDSNStationXML&quot;</span><span class="p">,</span>
            <span class="n">attrib</span><span class="o">=</span><span class="p">{</span>
                <span class="p">(</span><span class="s2">&quot;{http://www.w3.org/2001/XMLSchema-instance}&quot;</span>
                 <span class="s2">&quot;schemaLocation&quot;</span><span class="p">):</span> <span class="s2">&quot;http://www.fdsn.org/xml/station/1 &quot;</span>
                <span class="s2">&quot;http://www.fdsn.org/xml/station/fdsn-station+&quot;</span>
                <span class="s2">&quot;availability-1.0.xsd&quot;</span><span class="p">,</span>
                <span class="s2">&quot;schemaVersion&quot;</span><span class="p">:</span> <span class="n">SCHEMA_VERSION</span><span class="p">},</span>
            <span class="n">nsmap</span><span class="o">=</span><span class="p">{</span><span class="kc">None</span><span class="p">:</span> <span class="s2">&quot;http://www.fdsn.org/xml/station/1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;xsi&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="p">}</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span>
            <span class="s2">&quot;FDSNStationXML&quot;</span><span class="p">,</span>
            <span class="n">attrib</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;xmlns&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.fdsn.org/xml/station/1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;schemaVersion&quot;</span><span class="p">:</span> <span class="n">SCHEMA_VERSION</span><span class="p">}</span>
        <span class="p">)</span>

    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;Source&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">inventory</span><span class="o">.</span><span class="n">source</span>
    <span class="k">if</span> <span class="n">inventory</span><span class="o">.</span><span class="n">sender</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;Sender&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">inventory</span><span class="o">.</span><span class="n">sender</span>

    <span class="c1"># Undocumented flag that does not write the module flags. Useful for</span>
    <span class="c1"># testing. It is undocumented because it should not be used publicly.</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;_suppress_module_tags&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;Module&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">inventory</span><span class="o">.</span><span class="n">module</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;ModuleURI&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">inventory</span><span class="o">.</span><span class="n">module_uri</span>

    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;Created&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">_format_time</span><span class="p">(</span><span class="n">inventory</span><span class="o">.</span><span class="n">created</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">network</span> <span class="ow">in</span> <span class="n">inventory</span><span class="o">.</span><span class="n">networks</span><span class="p">:</span>
        <span class="n">_write_network</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">network</span><span class="p">)</span>

    <span class="n">tree</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">getroottree</span><span class="p">()</span>

    <span class="c1"># The validation has to be done after parsing once again so that the</span>
    <span class="c1"># namespaces are correctly assembled.</span>
    <span class="k">if</span> <span class="n">validate</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">buf</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
        <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">buf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">validates</span><span class="p">,</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">validate_stationxml</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
        <span class="n">buf</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">validates</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The created file fails to validate.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">err</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">err</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">file_or_file_object</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xml_declaration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="_get_base_node_attributes"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._get_base_node_attributes.html#obspy.io.stationxml.core._get_base_node_attributes">[docs]</a><span class="k">def</span> <span class="nf">_get_base_node_attributes</span><span class="p">(</span><span class="n">element</span><span class="p">):</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">element</span><span class="o">.</span><span class="n">code</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">start_date</span><span class="p">:</span>
        <span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;startDate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_format_time</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">start_date</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">end_date</span><span class="p">:</span>
        <span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;endDate&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_format_time</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">end_date</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">restricted_status</span><span class="p">:</span>
        <span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;restrictedStatus&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">restricted_status</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">alternate_code</span><span class="p">:</span>
        <span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;alternateCode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">alternate_code</span>
    <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">historical_code</span><span class="p">:</span>
        <span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;historicalCode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">historical_code</span>
    <span class="k">return</span> <span class="n">attributes</span></div>


<div class="viewcode-block" id="_write_base_node"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_base_node.html#obspy.io.stationxml.core._write_base_node">[docs]</a><span class="k">def</span> <span class="nf">_write_base_node</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">object_to_read_from</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">object_to_read_from</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">object_to_read_from</span><span class="o">.</span><span class="n">description</span>
    <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">object_to_read_from</span><span class="o">.</span><span class="n">comments</span><span class="p">:</span>
        <span class="n">_write_comment</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_network"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_network.html#obspy.io.stationxml.core._write_network">[docs]</a><span class="k">def</span> <span class="nf">_write_network</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">network</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function converting a Network instance to an etree.Element.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="n">_get_base_node_attributes</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
    <span class="n">network_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Network&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
    <span class="n">_write_base_node</span><span class="p">(</span><span class="n">network_elem</span><span class="p">,</span> <span class="n">network</span><span class="p">)</span>

    <span class="c1"># Add the two, network specific fields.</span>
    <span class="k">if</span> <span class="n">network</span><span class="o">.</span><span class="n">total_number_of_stations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">network_elem</span><span class="p">,</span> <span class="s2">&quot;TotalNumberStations&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">total_number_of_stations</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">network</span><span class="o">.</span><span class="n">selected_number_of_stations</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">network_elem</span><span class="p">,</span> <span class="s2">&quot;SelectedNumberStations&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">selected_number_of_stations</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="n">network</span><span class="o">.</span><span class="n">stations</span><span class="p">:</span>
        <span class="n">_write_station</span><span class="p">(</span><span class="n">network_elem</span><span class="p">,</span> <span class="n">station</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_floattype"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_floattype.html#obspy.io.stationxml.core._write_floattype">[docs]</a><span class="k">def</span> <span class="nf">_write_floattype</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{}):</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">obj_</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;datum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;datum&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj_</span><span class="p">,</span> <span class="s2">&quot;unit&quot;</span><span class="p">):</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">unit</span>
    <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;minusError&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">lower_uncertainty</span>
    <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;plusError&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">upper_uncertainty</span>
    <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">key2</span> <span class="ow">in</span> <span class="n">additional_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">attribs</span><span class="p">[</span><span class="n">key1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_</span><span class="p">,</span> <span class="n">key2</span><span class="p">)</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attribs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_floattype_list"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_floattype_list.html#obspy.io.stationxml.core._write_floattype_list">[docs]</a><span class="k">def</span> <span class="nf">_write_floattype_list</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">attr_list_name</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span>
                          <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{}):</span>
    <span class="k">for</span> <span class="n">obj_</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">attr_list_name</span><span class="p">):</span>
        <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;datum&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;datum&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj_</span><span class="p">,</span> <span class="s2">&quot;unit&quot;</span><span class="p">):</span>
            <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;unit&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">unit</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;minusError&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">lower_uncertainty</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;plusError&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_</span><span class="o">.</span><span class="n">upper_uncertainty</span>
        <span class="k">for</span> <span class="n">key1</span><span class="p">,</span> <span class="n">key2</span> <span class="ow">in</span> <span class="n">additional_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">attribs</span><span class="p">[</span><span class="n">key2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj_</span><span class="p">,</span> <span class="n">key1</span><span class="p">)</span>
        <span class="n">attribs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attribs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="p">)</span></div>


<div class="viewcode-block" id="_float_to_str"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._float_to_str.html#obspy.io.stationxml.core._float_to_str">[docs]</a><span class="k">def</span> <span class="nf">_float_to_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a float to str making. For most numbers this results in a</span>
<span class="sd">    decimal representation (for xs:decimal) while for very large or very</span>
<span class="sd">    small numbers this results in an exponential representation suitable for</span>
<span class="sd">    xs:float and xs:double.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">x</span></div>


<div class="viewcode-block" id="_write_polezero_list"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_polezero_list.html#obspy.io.stationxml.core._write_polezero_list">[docs]</a><span class="k">def</span> <span class="nf">_write_polezero_list</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">_polezero2tag</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">obj_</span><span class="p">):</span>
        <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;number&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
        <span class="n">attribs_real</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">attribs_imag</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">obj_</span><span class="o">.</span><span class="n">lower_uncertainty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribs_real</span><span class="p">[</span><span class="s1">&#39;minusError&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">lower_uncertainty</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
            <span class="n">attribs_imag</span><span class="p">[</span><span class="s1">&#39;minusError&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">lower_uncertainty</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj_</span><span class="o">.</span><span class="n">upper_uncertainty</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribs_real</span><span class="p">[</span><span class="s1">&#39;plusError&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">upper_uncertainty</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
            <span class="n">attribs_imag</span><span class="p">[</span><span class="s1">&#39;plusError&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">upper_uncertainty</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Real&quot;</span><span class="p">,</span> <span class="n">attribs_real</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Imaginary&quot;</span><span class="p">,</span> <span class="n">attribs_imag</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_float_to_str</span><span class="p">(</span><span class="n">obj_</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>

    <span class="c1"># Assign numbers if not given - stationxml requires them. Create copies</span>
    <span class="c1"># to not modify the original objects.</span>
    <span class="n">zeros</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">zeros</span><span class="p">)</span>
    <span class="n">poles</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">poles</span><span class="p">)</span>

    <span class="c1"># All or nothing - either all have numbers or we manually assign them</span>
    <span class="c1"># starting with the zeros.</span>
    <span class="c1">#</span>
    <span class="c1"># This is done here to catch all cases - otherwise it would have to be</span>
    <span class="c1"># done at poles + zeros assignment time and that would be pretty nasty</span>
    <span class="c1"># as it would have to work across poles and zeros.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;number&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">number</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">zeros</span> <span class="o">+</span> <span class="n">poles</span><span class="p">]):</span>
        <span class="c1"># Start numbers for both at zero - other variants are out there but</span>
        <span class="c1"># this is what IRIS does.</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">zeros</span><span class="p">):</span>
            <span class="n">v</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">poles</span><span class="p">):</span>
            <span class="n">v</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">i</span>

    <span class="k">for</span> <span class="n">obj_</span> <span class="ow">in</span> <span class="n">zeros</span><span class="p">:</span>
        <span class="n">_polezero2tag</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Zero&quot;</span><span class="p">,</span> <span class="n">obj_</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">obj_</span> <span class="ow">in</span> <span class="n">poles</span><span class="p">:</span>
        <span class="n">_polezero2tag</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Pole&quot;</span><span class="p">,</span> <span class="n">obj_</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_station"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_station.html#obspy.io.stationxml.core._write_station">[docs]</a><span class="k">def</span> <span class="nf">_write_station</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">station</span><span class="p">):</span>
    <span class="c1"># Write the base node type fields.</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="n">_get_base_node_attributes</span><span class="p">(</span><span class="n">station</span><span class="p">)</span>
    <span class="n">station_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Station&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
    <span class="n">_write_base_node</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">station</span><span class="p">)</span>

    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Latitude&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Longitude&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="s2">&quot;elevation&quot;</span><span class="p">,</span> <span class="s2">&quot;Elevation&quot;</span><span class="p">)</span>

    <span class="n">_write_site</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">site</span><span class="p">)</span>

    <span class="c1"># Optional tags.</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;Vault&quot;</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">vault</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;Geology&quot;</span><span class="p">,</span> <span class="n">station</span><span class="o">.</span><span class="n">geology</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">equipment</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">equipments</span><span class="p">:</span>
        <span class="n">_write_equipment</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">equipment</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">operator</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">operators</span><span class="p">:</span>
        <span class="n">operator_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;Operator&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">agency</span> <span class="ow">in</span> <span class="n">operator</span><span class="o">.</span><span class="n">agencies</span><span class="p">:</span>
            <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">operator_elem</span><span class="p">,</span> <span class="s2">&quot;Agency&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">agency</span>
        <span class="k">for</span> <span class="n">contact</span> <span class="ow">in</span> <span class="n">operator</span><span class="o">.</span><span class="n">contacts</span><span class="p">:</span>
            <span class="n">_write_person</span><span class="p">(</span><span class="n">operator_elem</span><span class="p">,</span> <span class="n">contact</span><span class="p">,</span> <span class="s2">&quot;Contact&quot;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">operator_elem</span><span class="p">,</span> <span class="s2">&quot;WebSite&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">operator</span><span class="o">.</span><span class="n">website</span>

    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;CreationDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="n">_format_time</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">creation_date</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">termination_date</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;TerminationDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">termination_date</span><span class="p">)</span>
    <span class="c1"># The next two tags are optional.</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;TotalNumberChannels&quot;</span><span class="p">,</span>
             <span class="n">station</span><span class="o">.</span><span class="n">total_number_of_channels</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="s2">&quot;SelectedNumberChannels&quot;</span><span class="p">,</span>
             <span class="n">station</span><span class="o">.</span><span class="n">selected_number_of_channels</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">external_references</span><span class="p">:</span>
        <span class="n">_write_external_reference</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">station</span><span class="o">.</span><span class="n">channels</span><span class="p">:</span>
        <span class="n">_write_channel</span><span class="p">(</span><span class="n">station_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_channel"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_channel.html#obspy.io.stationxml.core._write_channel">[docs]</a><span class="k">def</span> <span class="nf">_write_channel</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">channel</span><span class="p">):</span>
    <span class="c1"># Write the base node type fields.</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="n">_get_base_node_attributes</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>
    <span class="n">attribs</span><span class="p">[</span><span class="s1">&#39;locationCode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span>
    <span class="n">channel_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Channel&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
    <span class="n">_write_base_node</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">data_availability</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">da</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="s2">&quot;DataAvailability&quot;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">da</span><span class="p">,</span> <span class="s2">&quot;Extent&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s2">&quot;start&quot;</span><span class="p">:</span> <span class="n">_format_time</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">data_availability</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
            <span class="s2">&quot;end&quot;</span><span class="p">:</span> <span class="n">_format_time</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">data_availability</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="p">})</span>

    <span class="k">for</span> <span class="n">ref</span> <span class="ow">in</span> <span class="n">channel</span><span class="o">.</span><span class="n">external_references</span><span class="p">:</span>
        <span class="n">_write_external_reference</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>

    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Latitude&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Longitude&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;elevation&quot;</span><span class="p">,</span> <span class="s2">&quot;Elevation&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="s2">&quot;Depth&quot;</span><span class="p">)</span>

    <span class="c1"># Optional tags.</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;azimuth&quot;</span><span class="p">,</span> <span class="s2">&quot;Azimuth&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;dip&quot;</span><span class="p">,</span> <span class="s2">&quot;Dip&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">type_</span> <span class="ow">in</span> <span class="n">channel</span><span class="o">.</span><span class="n">types</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">type_</span>

    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="s2">&quot;sample_rate&quot;</span><span class="p">,</span> <span class="s2">&quot;SampleRate&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_samples</span> <span class="ow">and</span> \
            <span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_seconds</span><span class="p">:</span>
        <span class="n">srr</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="s2">&quot;SampleRateRatio&quot;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">srr</span><span class="p">,</span> <span class="s2">&quot;NumberSamples&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_samples</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">srr</span><span class="p">,</span> <span class="s2">&quot;NumberSeconds&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">sample_rate_ratio_number_seconds</span><span class="p">)</span>

    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="s2">&quot;StorageFormat&quot;</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">storage_format</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span>
                     <span class="s2">&quot;clock_drift_in_seconds_per_sample&quot;</span><span class="p">,</span> <span class="s2">&quot;ClockDrift&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">calibration_units</span><span class="p">:</span>
        <span class="n">cu</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="s2">&quot;CalibrationUnits&quot;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">cu</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">calibration_units</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">calibration_units_description</span><span class="p">:</span>
            <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">cu</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
                <span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">calibration_units_description</span><span class="p">)</span>
    <span class="n">_write_equipment</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">sensor</span><span class="p">,</span> <span class="s2">&quot;Sensor&quot;</span><span class="p">)</span>
    <span class="n">_write_equipment</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">pre_amplifier</span><span class="p">,</span> <span class="s2">&quot;PreAmplifier&quot;</span><span class="p">)</span>
    <span class="n">_write_equipment</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">data_logger</span><span class="p">,</span> <span class="s2">&quot;DataLogger&quot;</span><span class="p">)</span>
    <span class="n">_write_equipment</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">equipment</span><span class="p">,</span> <span class="s2">&quot;Equipment&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_write_response</span><span class="p">(</span><span class="n">channel_elem</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">response</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_io_units"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_io_units.html#obspy.io.stationxml.core._write_io_units">[docs]</a><span class="k">def</span> <span class="nf">_write_io_units</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;InputUnits&quot;</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">input_units</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">input_units_description</span><span class="p">)</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;OutputUnits&quot;</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">output_units</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">output_units_description</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_polynomial_common_fields"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_polynomial_common_fields.html#obspy.io.stationxml.core._write_polynomial_common_fields">[docs]</a><span class="k">def</span> <span class="nf">_write_polynomial_common_fields</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">polynomial</span><span class="p">):</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;ApproximationType&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="nb">str</span><span class="p">(</span><span class="n">polynomial</span><span class="o">.</span><span class="n">approximation_type</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">polynomial</span><span class="p">,</span>
                     <span class="s2">&quot;frequency_lower_bound&quot;</span><span class="p">,</span> <span class="s2">&quot;FrequencyLowerBound&quot;</span><span class="p">)</span>
    <span class="n">_write_floattype</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">polynomial</span><span class="p">,</span>
                     <span class="s2">&quot;frequency_upper_bound&quot;</span><span class="p">,</span> <span class="s2">&quot;FrequencyUpperBound&quot;</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;ApproximationLowerBound&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="n">_float_to_str</span><span class="p">(</span><span class="n">polynomial</span><span class="o">.</span><span class="n">approximation_lower_bound</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;ApproximationUpperBound&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="n">_float_to_str</span><span class="p">(</span><span class="n">polynomial</span><span class="o">.</span><span class="n">approximation_upper_bound</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="s2">&quot;MaximumError&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
        <span class="n">_float_to_str</span><span class="p">(</span><span class="n">polynomial</span><span class="o">.</span><span class="n">maximum_error</span><span class="p">)</span>
    <span class="n">_write_floattype_list</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">polynomial</span><span class="p">,</span>
                          <span class="s2">&quot;coefficients&quot;</span><span class="p">,</span> <span class="s2">&quot;Coefficient&quot;</span><span class="p">,</span>
                          <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;number&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">})</span></div>


<div class="viewcode-block" id="_write_response"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_response.html#obspy.io.stationxml.core._write_response">[docs]</a><span class="k">def</span> <span class="nf">_write_response</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">resp</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s2">&quot;resourceId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">resource_id</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Response&quot;</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
    <span class="c1"># write instrument sensitivity</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_sensitivity</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
            <span class="nb">any</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
        <span class="n">ins_sens</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_sensitivity</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;InstrumentSensitivity&quot;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_float_to_str</span><span class="p">(</span><span class="n">ins_sens</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Frequency&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_float_to_str</span><span class="p">(</span><span class="n">ins_sens</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
        <span class="n">_write_io_units</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">ins_sens</span><span class="p">)</span>
        <span class="n">freq_range_group</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">ins_sens</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                            <span class="k">else</span> <span class="kc">False</span>
                            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;frequency_range_start&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;frequency_range_end&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;frequency_range_db_variation&#39;</span><span class="p">]]</span>
        <span class="c1"># frequency range group properly described</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">freq_range_group</span><span class="p">):</span>
            <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;FrequencyStart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">ins_sens</span><span class="o">.</span><span class="n">frequency_range_start</span><span class="p">)</span>
            <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;FrequencyEnd&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">ins_sens</span><span class="o">.</span><span class="n">frequency_range_end</span><span class="p">)</span>
            <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;FrequencyDBVariation&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
                <span class="n">_float_to_str</span><span class="p">(</span><span class="n">ins_sens</span><span class="o">.</span><span class="n">frequency_range_db_variation</span><span class="p">)</span>
        <span class="c1"># frequency range group not present</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">freq_range_group</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="c1"># frequency range group only partly present</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Frequency range group of instrument sensitivity &quot;</span>
                   <span class="s2">&quot;specification invalid&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="c1"># write instrument polynomial</span>
    <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="o">.</span><span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">attribs</span><span class="p">[</span><span class="s1">&#39;resourceId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="o">.</span><span class="n">resource_id</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;InstrumentPolynomial&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="n">_write_io_units</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="p">)</span>
        <span class="n">_write_polynomial_common_fields</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">instrument_polynomial</span><span class="p">)</span>
    <span class="c1"># write response stages</span>
    <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="n">resp</span><span class="o">.</span><span class="n">response_stages</span><span class="p">:</span>
        <span class="n">_write_response_stage</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_response_stage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_response_stage.html#obspy.io.stationxml.core._write_response_stage">[docs]</a><span class="k">def</span> <span class="nf">_write_response_stage</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">stage</span><span class="p">):</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">stage_sequence_number</span><span class="p">)}</span>
    <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s2">&quot;resourceId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stage</span><span class="o">.</span><span class="n">resource_id</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Stage&quot;</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
    <span class="c1"># do nothing for gain only response stages</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span> <span class="o">==</span> <span class="n">ResponseStage</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># create tag for stage type</span>
        <span class="n">tagname_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">PolesZerosResponseStage</span><span class="p">:</span> <span class="s2">&quot;PolesZeros&quot;</span><span class="p">,</span>
                       <span class="n">CoefficientsTypeResponseStage</span><span class="p">:</span> <span class="s2">&quot;Coefficients&quot;</span><span class="p">,</span>
                       <span class="n">ResponseListResponseStage</span><span class="p">:</span> <span class="s2">&quot;ResponseList&quot;</span><span class="p">,</span>
                       <span class="n">FIRResponseStage</span><span class="p">:</span> <span class="s2">&quot;FIR&quot;</span><span class="p">,</span>
                       <span class="n">PolynomialResponseStage</span><span class="p">:</span> <span class="s2">&quot;Polynomial&quot;</span><span class="p">}</span>
        <span class="n">subel_attrs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">subel_attrs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">resource_id2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">subel_attrs</span><span class="p">[</span><span class="s2">&quot;resourceId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">stage</span><span class="o">.</span><span class="n">resource_id2</span>
        <span class="n">sub_</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">tagname_map</span><span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="n">stage</span><span class="p">)],</span> <span class="n">subel_attrs</span><span class="p">)</span>
        <span class="c1"># write operations common to all stage types</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="n">sub__</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;InputUnits&quot;</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">input_units</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">input_units_description</span><span class="p">)</span>
        <span class="n">sub__</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;OutputUnits&quot;</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">output_units</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">output_units_description</span><span class="p">)</span>

        <span class="c1"># write custom fields of respective stage type</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span> <span class="o">==</span> <span class="n">ResponseStage</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">PolesZerosResponseStage</span><span class="p">):</span>
            <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;PzTransferFunctionType&quot;</span><span class="p">,</span>
                     <span class="n">stage</span><span class="o">.</span><span class="n">pz_transfer_function_type</span><span class="p">)</span>
            <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;NormalizationFactor&quot;</span><span class="p">,</span>
                     <span class="n">stage</span><span class="o">.</span><span class="n">normalization_factor</span><span class="p">)</span>
            <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="s2">&quot;normalization_frequency&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;NormalizationFrequency&quot;</span><span class="p">)</span>
            <span class="n">_write_polezero_list</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">CoefficientsTypeResponseStage</span><span class="p">):</span>
            <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;CfTransferFunctionType&quot;</span><span class="p">,</span>
                     <span class="n">stage</span><span class="o">.</span><span class="n">cf_transfer_function_type</span><span class="p">)</span>
            <span class="n">_write_floattype_list</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span>
                                  <span class="s2">&quot;numerator&quot;</span><span class="p">,</span> <span class="s2">&quot;Numerator&quot;</span><span class="p">)</span>
            <span class="n">_write_floattype_list</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span>
                                  <span class="s2">&quot;denominator&quot;</span><span class="p">,</span> <span class="s2">&quot;Denominator&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">ResponseListResponseStage</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">rlelem</span> <span class="ow">in</span> <span class="n">stage</span><span class="o">.</span><span class="n">response_list_elements</span><span class="p">:</span>
                <span class="n">sub__</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;ResponseListElement&quot;</span><span class="p">)</span>
                <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="n">rlelem</span><span class="p">,</span> <span class="s2">&quot;frequency&quot;</span><span class="p">,</span> <span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>
                <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="n">rlelem</span><span class="p">,</span> <span class="s2">&quot;amplitude&quot;</span><span class="p">,</span> <span class="s2">&quot;Amplitude&quot;</span><span class="p">)</span>
                <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub__</span><span class="p">,</span> <span class="n">rlelem</span><span class="p">,</span> <span class="s2">&quot;phase&quot;</span><span class="p">,</span> <span class="s2">&quot;Phase&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">FIRResponseStage</span><span class="p">):</span>
            <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Symmetry&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">symmetry</span><span class="p">)</span>
            <span class="n">_write_floattype_list</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="s2">&quot;coefficients&quot;</span><span class="p">,</span>
                                  <span class="s2">&quot;NumeratorCoefficient&quot;</span><span class="p">,</span>
                                  <span class="n">additional_mapping</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;number&#39;</span><span class="p">:</span> <span class="s1">&#39;i&#39;</span><span class="p">})</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">PolynomialResponseStage</span><span class="p">):</span>
            <span class="n">_write_polynomial_common_fields</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">)</span>

    <span class="c1"># write decimation</span>
    <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sub_</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;Decimation&quot;</span><span class="p">)</span>
        <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="s2">&quot;decimation_input_sample_rate&quot;</span><span class="p">,</span>
                         <span class="s2">&quot;InputSampleRate&quot;</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Factor&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">decimation_factor</span><span class="p">)</span>
        <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Offset&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">decimation_offset</span><span class="p">)</span>
        <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="s2">&quot;decimation_delay&quot;</span><span class="p">,</span> <span class="s2">&quot;Delay&quot;</span><span class="p">)</span>
        <span class="n">_write_floattype</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="n">stage</span><span class="p">,</span> <span class="s2">&quot;decimation_correction&quot;</span><span class="p">,</span> <span class="s2">&quot;Correction&quot;</span><span class="p">)</span>
    <span class="c1"># write gain</span>
    <span class="n">sub_</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="s2">&quot;StageGain&quot;</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">stage_gain</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">sub_</span><span class="p">,</span> <span class="s2">&quot;Frequency&quot;</span><span class="p">,</span> <span class="n">stage</span><span class="o">.</span><span class="n">stage_gain_frequency</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_external_reference"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_external_reference.html#obspy.io.stationxml.core._write_external_reference">[docs]</a><span class="k">def</span> <span class="nf">_write_external_reference</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ref</span><span class="p">):</span>
    <span class="n">ref_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;ExternalReference&quot;</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">ref_elem</span><span class="p">,</span> <span class="s2">&quot;URI&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ref</span><span class="o">.</span><span class="n">uri</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">ref_elem</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ref</span><span class="o">.</span><span class="n">description</span></div>


<div class="viewcode-block" id="_write_equipment"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_equipment.html#obspy.io.stationxml.core._write_equipment">[docs]</a><span class="k">def</span> <span class="nf">_write_equipment</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">equipment</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;Equipment&quot;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">equipment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">attr</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">equipment</span><span class="o">.</span><span class="n">resource_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attr</span><span class="p">[</span><span class="s2">&quot;resourceId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">equipment</span><span class="o">.</span><span class="n">resource_id</span>
    <span class="n">equipment_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

    <span class="c1"># All tags are optional.</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;Manufacturer&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">manufacturer</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;Vendor&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">vendor</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;SerialNumber&quot;</span><span class="p">,</span> <span class="n">equipment</span><span class="o">.</span><span class="n">serial_number</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">equipment</span><span class="o">.</span><span class="n">installation_date</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;InstallationDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">equipment</span><span class="o">.</span><span class="n">installation_date</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">equipment</span><span class="o">.</span><span class="n">removal_date</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;RemovalDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">equipment</span><span class="o">.</span><span class="n">removal_date</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">calibration_date</span> <span class="ow">in</span> <span class="n">equipment</span><span class="o">.</span><span class="n">calibration_dates</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">equipment_elem</span><span class="p">,</span> <span class="s2">&quot;CalibrationDate&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">calibration_date</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_site"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_site.html#obspy.io.stationxml.core._write_site">[docs]</a><span class="k">def</span> <span class="nf">_write_site</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">site</span><span class="p">):</span>
    <span class="n">site_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Site&quot;</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">name</span>
    <span class="c1"># Optional tags</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;Town&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">town</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;County&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">county</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;Region&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
    <span class="n">_obj2tag</span><span class="p">(</span><span class="n">site_elem</span><span class="p">,</span> <span class="s2">&quot;Country&quot;</span><span class="p">,</span> <span class="n">site</span><span class="o">.</span><span class="n">country</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_comment"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_comment.html#obspy.io.stationxml.core._write_comment">[docs]</a><span class="k">def</span> <span class="nf">_write_comment</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">comment</span><span class="o">.</span><span class="n">id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">comment</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="n">comment_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Comment&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">comment_elem</span><span class="p">,</span> <span class="s2">&quot;Value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">comment</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">comment</span><span class="o">.</span><span class="n">begin_effective_time</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">comment_elem</span><span class="p">,</span> <span class="s2">&quot;BeginEffectiveTime&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">comment</span><span class="o">.</span><span class="n">begin_effective_time</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">comment</span><span class="o">.</span><span class="n">end_effective_time</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">comment_elem</span><span class="p">,</span> <span class="s2">&quot;EndEffectiveTime&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="n">_format_time</span><span class="p">(</span><span class="n">comment</span><span class="o">.</span><span class="n">end_effective_time</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">comment</span><span class="o">.</span><span class="n">authors</span><span class="p">:</span>
        <span class="n">_write_person</span><span class="p">(</span><span class="n">comment_elem</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="s2">&quot;Author&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_person"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_person.html#obspy.io.stationxml.core._write_person">[docs]</a><span class="k">def</span> <span class="nf">_write_person</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">person</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">):</span>
    <span class="n">person_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">person_elem</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">for</span> <span class="n">agency</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">agencies</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">person_elem</span><span class="p">,</span> <span class="s2">&quot;Agency&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">agency</span>
    <span class="k">for</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">emails</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">person_elem</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">email</span>
    <span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">phones</span><span class="p">:</span>
        <span class="n">_write_phone</span><span class="p">(</span><span class="n">person_elem</span><span class="p">,</span> <span class="n">phone</span><span class="p">)</span></div>


<div class="viewcode-block" id="_write_phone"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._write_phone.html#obspy.io.stationxml.core._write_phone">[docs]</a><span class="k">def</span> <span class="nf">_write_phone</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">phone</span><span class="p">):</span>
    <span class="n">attribs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">phone</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
        <span class="n">attribs</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phone</span><span class="o">.</span><span class="n">description</span>
    <span class="n">phone_elem</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Phone&quot;</span><span class="p">,</span> <span class="n">attribs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">phone</span><span class="o">.</span><span class="n">country_code</span><span class="p">:</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">phone_elem</span><span class="p">,</span> <span class="s2">&quot;CountryCode&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> \
            <span class="nb">str</span><span class="p">(</span><span class="n">phone</span><span class="o">.</span><span class="n">country_code</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">phone_elem</span><span class="p">,</span> <span class="s2">&quot;AreaCode&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">phone</span><span class="o">.</span><span class="n">area_code</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">phone_elem</span><span class="p">,</span> <span class="s2">&quot;PhoneNumber&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">phone</span><span class="o">.</span><span class="n">phone_number</span></div>


<div class="viewcode-block" id="_tag2obj"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._tag2obj.html#obspy.io.stationxml.core._tag2obj">[docs]</a><span class="k">def</span> <span class="nf">_tag2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
    <span class="c1"># we use future.builtins.str and are sure we have unicode here</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="kc">None</span></div>


<div class="viewcode-block" id="_tags2obj"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._tags2obj.html#obspy.io.stationxml.core._tags2obj">[docs]</a><span class="k">def</span> <span class="nf">_tags2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">tag</span><span class="p">):</span>
        <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">convert</span><span class="p">(</span><span class="n">elem</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">values</span></div>


<div class="viewcode-block" id="_attr2obj"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._attr2obj.html#obspy.io.stationxml.core._attr2obj">[docs]</a><span class="k">def</span> <span class="nf">_attr2obj</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">convert</span><span class="p">):</span>
    <span class="n">attribute</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">attribute</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">convert</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="kc">None</span></div>


<div class="viewcode-block" id="_obj2tag"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._obj2tag.html#obspy.io.stationxml.core._obj2tag">[docs]</a><span class="k">def</span> <span class="nf">_obj2tag</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">,</span> <span class="n">tag_value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    If tag_value is not None, append a SubElement to the parent. The text of</span>
<span class="sd">    the tag will be tag_value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tag_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tag_value</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">_float_to_str</span><span class="p">(</span><span class="n">tag_value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">tag_value</span><span class="p">)</span>
    <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">tag_name</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span></div>


<div class="viewcode-block" id="_format_time"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.stationxml.core._format_time.html#obspy.io.stationxml.core._format_time">[docs]</a><span class="k">def</span> <span class="nf">_format_time</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">microsecond</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S+00:00&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">+00:00&quot;</span><span class="p">)</span></div>


<span class="c1"># Remove once 0.11 has been released.</span>
<span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="n">DynamicAttributeImportRerouteModule</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="vm">__doc__</span><span class="p">,</span> <span class="n">locs</span><span class="o">=</span><span class="nb">locals</span><span class="p">(),</span>
    <span class="n">original_module</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">],</span>
    <span class="n">import_map</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">function_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;is_StationXML&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.stationxml.core._is_stationxml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;read_StationXML&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.stationxml.core._read_stationxml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;validate_StationXML&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.stationxml.core.validate_stationxml&#39;</span><span class="p">,</span>
        <span class="s1">&#39;write_StationXML&#39;</span><span class="p">:</span> <span class="s1">&#39;obspy.io.stationxml.core._write_stationxml&#39;</span><span class="p">})</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>