<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.io.gse2.bulletin &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.io.gse2.bulletin</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">GSE2.0 bulletin read support.</span>

<span class="sd">:author:</span>
<span class="sd">    EOST (École et Observatoire des Sciences de la Terre)</span>
<span class="sd">:copyright:</span>
<span class="sd">    The ObsPy Development Team (devs@obspy.org)</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">obspy.core.event</span> <span class="k">import</span> <span class="p">(</span><span class="n">Amplitude</span><span class="p">,</span> <span class="n">Arrival</span><span class="p">,</span> <span class="n">Catalog</span><span class="p">,</span> <span class="n">Comment</span><span class="p">,</span>
                              <span class="n">CreationInfo</span><span class="p">,</span> <span class="n">Event</span><span class="p">,</span> <span class="n">EventDescription</span><span class="p">,</span>
                              <span class="n">Magnitude</span><span class="p">,</span> <span class="n">Origin</span><span class="p">,</span> <span class="n">OriginQuality</span><span class="p">,</span>
                              <span class="n">OriginUncertainty</span><span class="p">,</span> <span class="n">Pick</span><span class="p">,</span> <span class="n">ResourceIdentifier</span><span class="p">,</span>
                              <span class="n">StationMagnitude</span><span class="p">,</span> <span class="n">WaveformStreamID</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">obspy.core.event.header</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">EvaluationMode</span><span class="p">,</span> <span class="n">EventDescriptionType</span><span class="p">,</span> <span class="n">EventType</span><span class="p">,</span> <span class="n">EventTypeCertainty</span><span class="p">,</span>
    <span class="n">OriginDepthType</span><span class="p">,</span> <span class="n">OriginUncertaintyDescription</span><span class="p">,</span> <span class="n">PickOnset</span><span class="p">,</span> <span class="n">PickPolarity</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">obspy.core.utcdatetime</span> <span class="k">import</span> <span class="n">UTCDateTime</span>


<span class="c1"># Convert GSE2 depth flag to ObsPy depth type</span>
<span class="n">DEPTH_TYPES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="n">OriginDepthType</span><span class="p">(</span><span class="s1">&#39;operator assigned&#39;</span><span class="p">),</span>
    <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">OriginDepthType</span><span class="p">(</span><span class="s1">&#39;constrained by depth phases&#39;</span><span class="p">),</span>
<span class="p">}</span>

<span class="c1"># Convert GSE2 analysis type to ObsPy evaluation modes</span>
<span class="n">EVALUATION_MODES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;m&#39;</span><span class="p">:</span> <span class="n">EvaluationMode</span><span class="o">.</span><span class="n">MANUAL</span><span class="p">,</span>
    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">EvaluationMode</span><span class="o">.</span><span class="n">AUTOMATIC</span><span class="p">,</span>
    <span class="s1">&#39;g&#39;</span><span class="p">:</span> <span class="n">EvaluationMode</span><span class="o">.</span><span class="n">MANUAL</span><span class="p">,</span>
<span class="p">}</span>


<span class="c1"># Convert GSE2 to ObsPy location methods</span>
<span class="n">LOCATION_METHODS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="s1">&#39;inversion&#39;</span><span class="p">,</span>
    <span class="s1">&#39;p&#39;</span><span class="p">:</span> <span class="s1">&#39;pattern recognition&#39;</span><span class="p">,</span>
    <span class="s1">&#39;g&#39;</span><span class="p">:</span> <span class="s1">&#39;ground truth&#39;</span><span class="p">,</span>
    <span class="s1">&#39;o&#39;</span><span class="p">:</span> <span class="s1">&#39;other&#39;</span><span class="p">,</span>
<span class="p">}</span>


<span class="c1"># Convert GSE2 to ObsPy event types</span>
<span class="n">EVENT_TYPES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ke&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;earthquake&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;se&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;earthquake&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;kr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;rock burst&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;sr&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;rock burst&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;ki&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;induced or triggered event&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;si&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;induced or triggered event&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;km&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;mining explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;sm&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;mining explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;kx&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;experimental explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;sx&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;experimental explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;kn&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;nuclear explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;sn&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">SUSPECTED</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;nuclear explosion&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;ls&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">EventTypeCertainty</span><span class="o">.</span><span class="n">KNOWN</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;landslide&#39;</span><span class="p">)),</span>
    <span class="s1">&#39;uk&#39;</span><span class="p">:</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span>
           <span class="n">EventType</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">)),</span>
<span class="p">}</span>


<span class="c1"># Convert GSE2 to ObsPy polarity</span>
<span class="n">PICK_POLARITIES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">PickPolarity</span><span class="o">.</span><span class="n">POSITIVE</span><span class="p">,</span>
    <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="n">PickPolarity</span><span class="o">.</span><span class="n">NEGATIVE</span><span class="p">,</span>
<span class="p">}</span>


<span class="c1"># Convert GSE2 to ObsPy pick onset</span>
<span class="n">PICK_ONSETS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="n">PickOnset</span><span class="o">.</span><span class="n">EMERGENT</span><span class="p">,</span>
    <span class="s1">&#39;I&#39;</span><span class="p">:</span> <span class="n">PickOnset</span><span class="o">.</span><span class="n">IMPULSIVE</span><span class="p">,</span>
    <span class="s1">&#39;Q&#39;</span><span class="p">:</span> <span class="n">PickOnset</span><span class="o">.</span><span class="n">QUESTIONABLE</span><span class="p">,</span>
<span class="p">}</span>


<div class="viewcode-block" id="GSE2BulletinSyntaxError"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.GSE2BulletinSyntaxError.html#obspy.io.gse2.bulletin.GSE2BulletinSyntaxError">[docs]</a><span class="k">class</span> <span class="nc">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Raised when the file is not a valid GSE2 file&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="_is_gse2"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin._is_gse2.html#obspy.io.gse2.bulletin._is_gse2">[docs]</a><span class="k">def</span> <span class="nf">_is_gse2</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether a file is GSE2.0 format.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: Name of the GSE2.0 file to be checked.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    :return: ``True`` if GSE2.0 file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">temp</span> <span class="o">!=</span> <span class="sa">b</span><span class="s1">&#39;BEGIN GSE2.0&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="LinesIterator"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.LinesIterator.html#obspy.io.gse2.bulletin.LinesIterator">[docs]</a><span class="k">class</span> <span class="nc">LinesIterator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Iterator to iterate file lines and count lines. Usefull for warning</span>
<span class="sd">    messages.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="LinesIterator.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.LinesIterator.__init__.html#obspy.io.gse2.bulletin.LinesIterator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_nb</span> <span class="o">=</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="LinesIterator.__iter__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.LinesIterator.__iter__.html#obspy.io.gse2.bulletin.LinesIterator.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="LinesIterator.__next__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.LinesIterator.__next__.html#obspy.io.gse2.bulletin.LinesIterator.__next__">[docs]</a>    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_nb</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="Unpickler"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler.html#obspy.io.gse2.bulletin.Unpickler">[docs]</a><span class="k">class</span> <span class="nc">Unpickler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    De-serialize a GSE2.0 string into an ObsPy Catalog object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Unpickler.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler.__init__.html#obspy.io.gse2.bulletin.Unpickler.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inventory</span><span class="p">,</span> <span class="n">default_network_code</span><span class="p">,</span> <span class="n">default_location_code</span><span class="p">,</span>
                 <span class="n">default_channel_code</span><span class="p">,</span> <span class="n">res_id_prefix</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span>
                 <span class="n">event_point_separator</span><span class="p">,</span> <span class="n">agency</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_network_code</span> <span class="o">=</span> <span class="n">default_network_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_location_code</span> <span class="o">=</span> <span class="n">default_location_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_channel_code</span> <span class="o">=</span> <span class="n">default_channel_code</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inventory</span> <span class="o">=</span> <span class="n">inventory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">res_id_prefix</span> <span class="o">=</span> <span class="n">res_id_prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_point_separator</span> <span class="o">=</span> <span class="n">event_point_separator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">agency</span> <span class="o">=</span> <span class="n">agency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;line_1&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>
                <span class="s1">&#39;time_fixf&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">),</span>
                <span class="s1">&#39;lat&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span>
                <span class="s1">&#39;lon&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">43</span><span class="p">),</span>
                <span class="s1">&#39;epicenter_fixf&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">),</span>
                <span class="s1">&#39;depth&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">52</span><span class="p">),</span>
                <span class="s1">&#39;depth_fixf&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">54</span><span class="p">),</span>
                <span class="s1">&#39;n_def&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">56</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span>
                <span class="s1">&#39;n_sta&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="mi">65</span><span class="p">),</span>
                <span class="s1">&#39;gap&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">66</span><span class="p">,</span> <span class="mi">69</span><span class="p">),</span>
                <span class="s1">&#39;mag_type_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">71</span><span class="p">,</span> <span class="mi">73</span><span class="p">),</span>
                <span class="s1">&#39;mag_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">73</span><span class="p">,</span> <span class="mi">77</span><span class="p">),</span>
                <span class="s1">&#39;mag_n_sta_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span>
                <span class="s1">&#39;mag_type_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">82</span><span class="p">,</span> <span class="mi">84</span><span class="p">),</span>
                <span class="s1">&#39;mag_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">88</span><span class="p">),</span>
                <span class="s1">&#39;mag_n_sta_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">89</span><span class="p">,</span> <span class="mi">91</span><span class="p">),</span>
                <span class="s1">&#39;mag_type_3&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">93</span><span class="p">,</span> <span class="mi">95</span><span class="p">),</span>
                <span class="s1">&#39;mag_3&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
                <span class="s1">&#39;mag_n_sta_3&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">102</span><span class="p">),</span>
                <span class="s1">&#39;author&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span> <span class="mi">112</span><span class="p">),</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">114</span><span class="p">,</span> <span class="mi">122</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="s1">&#39;line_2&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;rms&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                <span class="s1">&#39;ot_error&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>
                <span class="s1">&#39;s_major&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">31</span><span class="p">),</span>
                <span class="s1">&#39;s_minor&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">38</span><span class="p">),</span>
                <span class="s1">&#39;az&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">43</span><span class="p">),</span>
                <span class="s1">&#39;depth_err&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">54</span><span class="p">),</span>
                <span class="s1">&#39;min_dist&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">56</span><span class="p">,</span> <span class="mi">62</span><span class="p">),</span>
                <span class="s1">&#39;max_dist&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">63</span><span class="p">,</span> <span class="mi">69</span><span class="p">),</span>
                <span class="s1">&#39;mag_err_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">74</span><span class="p">,</span> <span class="mi">77</span><span class="p">),</span>
                <span class="s1">&#39;mag_err_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">88</span><span class="p">),</span>
                <span class="s1">&#39;mag_err_3&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">96</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
                <span class="s1">&#39;antype&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span> <span class="mi">105</span><span class="p">),</span>
                <span class="s1">&#39;loctype&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">106</span><span class="p">,</span> <span class="mi">107</span><span class="p">),</span>
                <span class="s1">&#39;evtype&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">108</span><span class="p">,</span> <span class="mi">110</span><span class="p">),</span>
            <span class="p">},</span>
            <span class="s1">&#39;arrival&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;sta&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                <span class="s1">&#39;dist&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
                <span class="s1">&#39;ev_az&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
                <span class="s1">&#39;picktype&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
                <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">),</span>
                <span class="s1">&#39;detchar&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
                <span class="s1">&#39;phase&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span>
                <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="mi">52</span><span class="p">),</span>
                <span class="s1">&#39;t_res&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="mi">58</span><span class="p">),</span>
                <span class="s1">&#39;azim&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">59</span><span class="p">,</span> <span class="mi">64</span><span class="p">),</span>
                <span class="s1">&#39;az_res&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">65</span><span class="p">,</span> <span class="mi">71</span><span class="p">),</span>
                <span class="s1">&#39;slow&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">72</span><span class="p">,</span> <span class="mi">77</span><span class="p">),</span>
                <span class="s1">&#39;s_res&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="mi">83</span><span class="p">),</span>
                <span class="s1">&#39;t_def&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">85</span><span class="p">),</span>
                <span class="s1">&#39;a_def&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span> <span class="mi">86</span><span class="p">),</span>
                <span class="s1">&#39;s_def&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">86</span><span class="p">,</span> <span class="mi">87</span><span class="p">),</span>
                <span class="s1">&#39;snr&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">88</span><span class="p">,</span> <span class="mi">93</span><span class="p">),</span>
                <span class="s1">&#39;amp&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">103</span><span class="p">),</span>
                <span class="s1">&#39;per&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">104</span><span class="p">,</span> <span class="mi">109</span><span class="p">),</span>
                <span class="s1">&#39;mag_type_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="mi">112</span><span class="p">),</span>
                <span class="s1">&#39;mag_1&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="mi">116</span><span class="p">),</span>
                <span class="s1">&#39;mag_type_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">117</span><span class="p">,</span> <span class="mi">119</span><span class="p">),</span>
                <span class="s1">&#39;mag_2&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">119</span><span class="p">,</span> <span class="mi">123</span><span class="p">),</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">124</span><span class="p">,</span> <span class="mi">132</span><span class="p">),</span>
            <span class="p">},</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;line_1&#39;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_1&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;line_2&#39;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_2&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;arrival&#39;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;arrival&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;arrival&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Unpickler.load"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler.load.html#obspy.io.gse2.bulletin.Unpickler.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read GSE2.0 file into ObsPy catalog object.</span>

<span class="sd">        :type filename: str</span>
<span class="sd">        :param filename: File name to read.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.Catalog`</span>
<span class="sd">        :return: ObsPy Catalog object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">LinesIterator</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deserialize</span><span class="p">()</span></div>

<div class="viewcode-block" id="Unpickler._add_line_nb"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._add_line_nb.html#obspy.io.gse2.bulletin.Unpickler._add_line_nb">[docs]</a>    <span class="k">def</span> <span class="nf">_add_line_nb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add line number at the end of a str message.</span>

<span class="sd">        :type message: str</span>
<span class="sd">        :param message: Message for warnings or exceptions.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        :return: Message with line number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">, line </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">line_nb</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._warn"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._warn.html#obspy.io.gse2.bulletin.Unpickler._warn">[docs]</a>    <span class="k">def</span> <span class="nf">_warn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display a warning message with the line number.</span>

<span class="sd">        :type message: str</span>
<span class="sd">        :param message: Message to be displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_add_line_nb</span><span class="p">(</span><span class="n">message</span><span class="p">))</span></div>

<div class="viewcode-block" id="Unpickler._skip_empty_lines"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._skip_empty_lines.html#obspy.io.gse2.bulletin.Unpickler._skip_empty_lines">[docs]</a>    <span class="k">def</span> <span class="nf">_skip_empty_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
            <span class="n">line</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">line</span></div>

<div class="viewcode-block" id="Unpickler._get_res_id"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._get_res_id.html#obspy.io.gse2.bulletin.Unpickler._get_res_id">[docs]</a>    <span class="k">def</span> <span class="nf">_get_res_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ident</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent_res_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a :class:`~obspy.core.event.base.ResourceIdentifier` object.</span>

<span class="sd">        :type ident: str</span>
<span class="sd">        :param ident: Id of</span>
<span class="sd">            the :class:`~obspy.core.event.base.ResourceIdentifier`.</span>
<span class="sd">        :type parent: :class:`~obspy.core.event.origin.Origin`,</span>
<span class="sd">            :class:`~obspy.core.event.event.Event` or any other object</span>
<span class="sd">            with a resource_id attribute.</span>
<span class="sd">        :param parent: The resource_id attribute of the parent will be</span>
<span class="sd">            used as a prefix for the new</span>
<span class="sd">            :class:`~obspy.core.event.base.ResourceIdentifier`.</span>
<span class="sd">        :type parent_res_id: :class:`~obspy.core.event.base.ResourceIdentifier`</span>
<span class="sd">            of the parent.</span>
<span class="sd">        :param parent_res_id:</span>
<span class="sd">            :class:`~obspy.core.event.base.ResourceIdentifier`</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.base.ResourceIdentifier`</span>
<span class="sd">        :return: ResourceIdentifier object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_id_prefix</span>
        <span class="c1"># Put the parent id as prefix</span>
        <span class="c1"># Example: smi:local/origin/351412/arrival/6389611</span>
        <span class="c1">#          |        prefix        |     ident    |</span>
        <span class="k">if</span> <span class="n">parent</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span>
        <span class="k">elif</span> <span class="n">parent_res_id</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="n">parent_res_id</span><span class="o">.</span><span class="n">id</span>

        <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">ident</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._comment"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._comment.html#obspy.io.gse2.bulletin.Unpickler._comment">[docs]</a>    <span class="k">def</span> <span class="nf">_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">()</span>
        <span class="n">comment</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="n">comment</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">ResourceIdentifier</span><span class="p">(</span><span class="n">prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">res_id_prefix</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">comment</span></div>

<div class="viewcode-block" id="Unpickler._get_creation_info"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._get_creation_info.html#obspy.io.gse2.bulletin.Unpickler._get_creation_info">[docs]</a>    <span class="k">def</span> <span class="nf">_get_creation_info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">creation_info</span> <span class="o">=</span> <span class="n">CreationInfo</span><span class="p">(</span><span class="n">creation_time</span><span class="o">=</span><span class="n">UTCDateTime</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agency</span><span class="p">:</span>
            <span class="n">creation_info</span><span class="o">.</span><span class="n">agency_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">agency</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">:</span>
            <span class="n">creation_info</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span>
        <span class="k">return</span> <span class="n">creation_info</span></div>

<div class="viewcode-block" id="Unpickler._check_header"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._check_header.html#obspy.io.gse2.bulletin.Unpickler._check_header">[docs]</a>    <span class="k">def</span> <span class="nf">_check_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Just check some stuff in header.</span>

<span class="sd">        :type first_line: str</span>
<span class="sd">        :param first_line: First line of header.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">line_1_pattern</span> <span class="o">=</span> <span class="s1">&#39;BEGIN\sGSE2.0&#39;</span>
        <span class="n">line_2_pattern</span> <span class="o">=</span> <span class="s1">&#39;MSG_TYPE\s(REQUEST|DATA|SUBSCRIPTION|PROBLEM)&#39;</span>
        <span class="n">line_3_pattern</span> <span class="o">=</span> <span class="s1">&#39;MSG_ID\s\w{1,20}\s?\w{1,8}&#39;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line_1_pattern</span><span class="p">,</span> <span class="n">first_line</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="s1">&#39;Wrong GSE2.0 header&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line_2_pattern</span><span class="p">,</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="s1">&#39;Wrong message type in header&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line_3_pattern</span><span class="p">,</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="s1">&#39;Wrong message ID in header&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._get_channel"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._get_channel.html#obspy.io.gse2.bulletin.Unpickler._get_channel">[docs]</a>    <span class="k">def</span> <span class="nf">_get_channel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">time</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use inventory to retrieve channel and location code.</span>

<span class="sd">        :type station: str</span>
<span class="sd">        :param station: Station code</span>
<span class="sd">        :type time: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param time: Only use channel active at given point in time.</span>
<span class="sd">        :rtype: str, :class:`~obspy.core.inventory.channel.Channel`</span>
<span class="sd">        :return: Network code, channel retrieved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inventory</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">sub_inventory</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inventory</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">station</span><span class="o">=</span><span class="n">station</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_inventory</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s2">&quot;Can&#39;t find station </span><span class="si">%s</span><span class="s2"> in inventory&quot;</span> <span class="o">%</span> <span class="n">station</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sub_inventory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Several stations </span><span class="si">%s</span><span class="s1"> have been found with different &#39;</span>
                       <span class="s1">&#39;network code in inventory&#39;</span> <span class="o">%</span>
                       <span class="n">station</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">network</span> <span class="o">=</span> <span class="n">sub_inventory</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">sta</span> <span class="o">=</span> <span class="p">[</span><span class="n">cha</span> <span class="k">for</span> <span class="n">sta</span> <span class="ow">in</span> <span class="n">network</span> <span class="k">for</span> <span class="n">cha</span> <span class="ow">in</span> <span class="n">sta</span><span class="p">]</span>

        <span class="c1"># Select only vertical channels</span>
        <span class="n">channels</span> <span class="o">=</span> <span class="p">[</span><span class="n">cha</span> <span class="k">for</span> <span class="n">cha</span> <span class="ow">in</span> <span class="n">sta</span> <span class="k">if</span> <span class="n">cha</span><span class="o">.</span><span class="n">code</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Z&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s2">&quot;Can&#39;t find channel for station </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">station</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">channels</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># Choose first location code</span>
            <span class="n">location_codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">location_code</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">]</span>
            <span class="n">location_code</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">location_codes</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">channels</span> <span class="o">=</span> <span class="p">[</span><span class="n">channel</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span>
                        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span> <span class="o">==</span> <span class="n">location_code</span><span class="p">]</span>

            <span class="n">codes</span> <span class="o">=</span> <span class="p">[</span><span class="n">channel</span><span class="o">.</span><span class="n">code</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span><span class="p">]</span>
            <span class="n">code</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">code</span> <span class="o">=</span> <span class="n">codes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Choose channel code by priority</span>
                <span class="c1"># HHZ &gt; EHZ &gt; ELZ &gt; BHZ &gt; LHZ &gt; SHZ</span>
                <span class="n">priority</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;HHZ&#39;</span><span class="p">,</span> <span class="s1">&#39;EHZ&#39;</span><span class="p">,</span> <span class="s1">&#39;ELZ&#39;</span><span class="p">,</span> <span class="s1">&#39;BHZ&#39;</span><span class="p">,</span> <span class="s1">&#39;LHZ&#39;</span><span class="p">,</span> <span class="s1">&#39;SHZ&#39;</span><span class="p">]</span>
                <span class="n">code</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">code</span> <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">priority</span> <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">network</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Several stations </span><span class="si">%s</span><span class="s1"> or location code have &#39;</span>
                               <span class="s1">&#39;been found in inventory&#39;</span> <span class="o">%</span> <span class="n">station</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Several channels have been found for &#39;</span>
                               <span class="s1">&#39;station </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">station</span><span class="p">)</span>

                <span class="k">return</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="kc">None</span>

            <span class="n">channel</span> <span class="o">=</span> <span class="nb">next</span><span class="p">((</span><span class="n">channel</span> <span class="k">for</span> <span class="n">channel</span> <span class="ow">in</span> <span class="n">channels</span>
                           <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">code</span><span class="p">))</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Several stations, location codes or channels have &#39;</span>
                       <span class="s1">&#39;been found, choose </span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                       <span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">station</span><span class="p">,</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span><span class="p">,</span>
                        <span class="n">channel</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">channel</span>

        <span class="k">return</span> <span class="n">network</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Unpickler._parse_event"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_event.html#obspy.io.gse2.bulletin.Unpickler._parse_event">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_line</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse an event.</span>

<span class="sd">        :type first_line: str</span>
<span class="sd">        :param first_line: First line of an event block, which contains</span>
<span class="sd">            the event id.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.event.Event`</span>
<span class="sd">        :return: The parsed event or None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_id</span> <span class="o">=</span> <span class="n">first_line</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># Skip event without id</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">event_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Missing event id&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>

        <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_origin</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># Skip event without origin</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">origin</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_empty_lines</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_region_name</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_arrivals</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span><span class="p">)</span>

        <span class="c1"># Origin ResourceIdentifier should be set at the end, when</span>
        <span class="c1"># Arrivals are already set.</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">origin_res_id</span>
        <span class="n">event</span><span class="o">.</span><span class="n">origins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">origin</span><span class="p">)</span>

        <span class="n">event</span><span class="o">.</span><span class="n">preferred_origin_id</span> <span class="o">=</span> <span class="n">origin</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span>

        <span class="c1"># Must be done after the origin parsing</span>
        <span class="n">event</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>

        <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;event/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">event_id</span>
        <span class="n">event</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">event</span></div>

<div class="viewcode-block" id="Unpickler._parse_origin"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_origin.html#obspy.io.gse2.bulletin.Unpickler._parse_origin">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse an origin.</span>

<span class="sd">        :type event: :class:`~obspy.core.event.event.Event`</span>
<span class="sd">        :param event: Event of the origin.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.origin.Origin`,</span>
<span class="sd">            :class:`~obspy.core.event.base.ResourceIdentifier`</span>
<span class="sd">        :returns: Parsed origin or None, resource identifier of the</span>
<span class="sd">            origin.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Store magnitudes in a list to keep their positions.</span>
        <span class="c1"># Needed for the magnitude errors.</span>
        <span class="n">magnitudes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Skip 2 lines of header</span>
        <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
        <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_empty_lines</span><span class="p">()</span>

        <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_first_line_origin</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">)</span>

        <span class="c1"># If some crucial information can&#39;t be parsed, return None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">origin</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_empty_lines</span><span class="p">()</span>

        <span class="c1"># File from ldg can have author on several lines</span>
        <span class="k">while</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;\s{105,}\w+\s*&#39;</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_1&#39;</span><span class="p">]</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span><span class="o">.</span><span class="n">author</span> <span class="o">+=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_empty_lines</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_second_line_origin</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">)</span>

        <span class="c1"># Magnitude resource_id can only be set after that magnitude</span>
        <span class="c1"># errors are set.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">magnitude</span> <span class="o">=</span> <span class="n">magnitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">magnitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;magnitude/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span>
                <span class="n">mag_res_id</span> <span class="o">=</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">,</span> <span class="n">parent_res_id</span><span class="o">=</span><span class="n">origin_res_id</span><span class="p">)</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">mag_res_id</span>

                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">preferred_magnitude_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">preferred_magnitude_id</span> <span class="o">=</span> <span class="n">magnitude</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span>

        <span class="k">return</span> <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span></div>

<div class="viewcode-block" id="Unpickler._parse_first_line_origin"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_first_line_origin.html#obspy.io.gse2.bulletin.Unpickler._parse_first_line_origin">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_first_line_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the first line of origin data.</span>

<span class="sd">        :type line: str</span>
<span class="sd">        :param line: Line to parse.</span>
<span class="sd">        :type event: :class:`~obspy.core.event.event.Event`</span>
<span class="sd">        :param event: Event of the origin.</span>
<span class="sd">        :type magnitudes: list of</span>
<span class="sd">            :class:`~obspy.core.event.magnitude.Magnitude`</span>
<span class="sd">        :param magnitudes: Store magnitudes in a list to keep</span>
<span class="sd">            their positions.</span>
<span class="sd">        :rtype: :class:`~obspy.core.event.origin.Origin`,</span>
<span class="sd">            :class:`~obspy.core.event.base.ResourceIdentifier`</span>
<span class="sd">        :returns: Parsed origin or None, resource identifier of the</span>
<span class="sd">            origin.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">magnitude_types</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">magnitude_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">magnitude_station_counts</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_1&#39;</span><span class="p">]</span>

        <span class="n">time_origin</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">time_fixed_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;time_fixf&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">latitude</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">longitude</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">epicenter_fixed_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;epicenter_fixf&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">depth_fixed_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;depth_fixf&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">phase_count</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;n_def&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">station_count</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;n_sta&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">azimuthal_gap</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;gap&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">magnitude_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_type_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_station_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_n_sta_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_type_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_station_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_n_sta_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_type_3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_station_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_n_sta_3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">author</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;author&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">origin_id</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">origin</span> <span class="o">=</span> <span class="n">Origin</span><span class="p">()</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">quality</span> <span class="o">=</span> <span class="n">OriginQuality</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">time_origin</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">))</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">longitude</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Missing origin data, skipping event&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

        <span class="n">origin</span><span class="o">.</span><span class="n">time_fixed</span> <span class="o">=</span> <span class="n">time_fixed_flag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">epicenter_fixed</span> <span class="o">=</span> <span class="n">epicenter_fixed_flag</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;f&#39;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Convert value from km to m</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="n">DEPTH_TYPES</span><span class="p">[</span><span class="n">depth_fixed_flag</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth_type</span> <span class="o">=</span> <span class="n">OriginDepthType</span><span class="p">(</span><span class="s1">&#39;from location&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_phase_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">phase_count</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_phase_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">phase_count</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">used_station_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">station_count</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">associated_station_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">station_count</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">azimuthal_gap</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">azimuthal_gap</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>

        <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;origin/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">origin_id</span>
        <span class="n">origin_res_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">magnitude</span> <span class="o">=</span> <span class="n">Magnitude</span><span class="p">()</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">magnitude_type</span> <span class="o">=</span> <span class="n">magnitude_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">magnitude_values</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">station_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">magnitude_station_counts</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">magnitude</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin_res_id</span>
                <span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">magnitude</span><span class="p">)</span>
                <span class="n">event</span><span class="o">.</span><span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">magnitude</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="c1"># Magnitude can be empty but we need to keep the</span>
                <span class="c1"># position between mag1, mag2 or mag3.</span>
                <span class="n">magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span></div>

<div class="viewcode-block" id="Unpickler._parse_second_line_origin"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_second_line_origin.html#obspy.io.gse2.bulletin.Unpickler._parse_second_line_origin">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_second_line_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">):</span>
        <span class="n">magnitude_errors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;line_2&#39;</span><span class="p">]</span>

        <span class="n">standard_error</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;rms&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">time_uncertainty</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;ot_error&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">max_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;s_major&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">min_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;s_minor&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">azimuth_max_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;az&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">depth_uncertainty</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;depth_err&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">min_distance</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;min_dist&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">max_distance</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;max_dist&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">magnitude_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_err_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_err_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">magnitude_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_err_3&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">analysis_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;antype&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">location_method</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;loctype&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">event_type</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;evtype&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">standard_error</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">standard_error</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">time_errors</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">time_uncertainty</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">uncertainty</span> <span class="o">=</span> <span class="n">OriginUncertainty</span><span class="p">()</span>
            <span class="c1"># Convert values from km to m</span>
            <span class="n">min_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">min_horizontal_uncertainty</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_horizontal_uncertainty</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
            <span class="n">azimuth_value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">azimuth_max_horizontal_uncertainty</span><span class="p">)</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">OriginUncertaintyDescription</span><span class="p">(</span><span class="s1">&#39;uncertainty ellipse&#39;</span><span class="p">)</span>

            <span class="n">uncertainty</span><span class="o">.</span><span class="n">min_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">min_value</span>
            <span class="n">uncertainty</span><span class="o">.</span><span class="n">max_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">max_value</span>
            <span class="n">uncertainty</span><span class="o">.</span><span class="n">azimuth_max_horizontal_uncertainty</span> <span class="o">=</span> <span class="n">azimuth_value</span>
            <span class="n">uncertainty</span><span class="o">.</span><span class="n">preferred_description</span> <span class="o">=</span> <span class="n">description</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">origin_uncertainty</span> <span class="o">=</span> <span class="n">uncertainty</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Convert value from km to m</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">depth_errors</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">depth_uncertainty</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">minimum_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">min_distance</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">quality</span><span class="o">.</span><span class="n">maximum_distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_distance</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Missing minimum/maximum distance&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">mag_errors</span> <span class="o">=</span> <span class="n">magnitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">mag_errors</span>
                <span class="n">mag_errors</span><span class="o">.</span><span class="n">uncertainty</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">magnitude_errors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="c1"># No match for &#39;g&#39; (guess)</span>
        <span class="c1"># We map &#39;g&#39; to &#39;manual&#39; and create a comment for origin</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">evaluation_mode</span> <span class="o">=</span> <span class="n">EVALUATION_MODES</span><span class="p">[</span><span class="n">analysis_type</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">analysis_type</span> <span class="o">==</span> <span class="s1">&#39;g&#39;</span><span class="p">:</span>
                <span class="c1"># comment: &#39;GSE2.0:antype=g&#39;</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;GSE2.0:antype=g&#39;</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="n">origin</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Wrong analysis type&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">location_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">LOCATION_METHODS</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">location_method</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">LOCATION_METHODS</span><span class="p">[</span><span class="n">location_method</span><span class="p">]</span>
        <span class="n">method_id</span> <span class="o">=</span> <span class="s2">&quot;method/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">method</span>
        <span class="n">origin</span><span class="o">.</span><span class="n">method_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">method_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">EVENT_TYPES</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">event_type</span> <span class="o">=</span> <span class="s1">&#39;uk&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Wrong or unknown event type&#39;</span><span class="p">)</span>
        <span class="n">event_data</span> <span class="o">=</span> <span class="n">EVENT_TYPES</span><span class="p">[</span><span class="n">event_type</span><span class="p">]</span>
        <span class="n">event</span><span class="o">.</span><span class="n">event_type_certainty</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">event_type</span> <span class="o">=</span> <span class="n">event_data</span>

        <span class="c1"># comment: &#39;GSE2.0:evtype=&lt;evtype&gt;&#39;</span>
        <span class="k">if</span> <span class="n">event_type</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;GSE2.0:evtype=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">event_type</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="n">event</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_region_name"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_region_name.html#obspy.io.gse2.bulletin.Unpickler._parse_region_name">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_region_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">event_description</span> <span class="o">=</span> <span class="n">EventDescription</span><span class="p">()</span>
        <span class="n">event_description</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">event_description</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">EventDescriptionType</span><span class="p">(</span><span class="s1">&#39;region name&#39;</span><span class="p">)</span>
        <span class="n">event</span><span class="o">.</span><span class="n">event_descriptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event_description</span><span class="p">)</span></div>

<div class="viewcode-block" id="Unpickler._parse_arrivals"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._parse_arrivals.html#obspy.io.gse2.bulletin.Unpickler._parse_arrivals">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_arrivals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">origin_res_id</span><span class="p">):</span>
        <span class="c1"># Skip header of arrivals</span>
        <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>

        <span class="c1"># Stop the loop after 2 empty lines (according to the standard).</span>
        <span class="n">previous_line_empty</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">line_empty</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">isspace</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_point_separator</span><span class="p">:</span>
                <span class="c1"># Event are separated by two empty lines</span>
                <span class="k">if</span> <span class="n">line_empty</span> <span class="ow">and</span> <span class="n">previous_line_empty</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Event are separated by &#39;.&#39;</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">):</span>
                    <span class="k">break</span>

            <span class="n">previous_line_empty</span> <span class="o">=</span> <span class="n">line_empty</span>

            <span class="k">if</span> <span class="n">line_empty</span><span class="p">:</span>
                <span class="c1"># Skip empty lines when the loop should be stopped by</span>
                <span class="c1"># point</span>
                <span class="k">continue</span>

            <span class="n">magnitude_types</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">magnitude_values</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;arrival&#39;</span><span class="p">]</span>

            <span class="n">station</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;sta&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;dist&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">event_azimuth</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;ev_az&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">evaluation_mode</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;picktype&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;direction&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">onset</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;detchar&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;phase&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
            <span class="n">time_residual</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;t_res&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">arrival_azimuth</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;azim&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">azimuth_residual</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;az_res&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">slowness</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;slow&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">slowness_residual</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;s_res&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">time_defining_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;t_def&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">azimuth_defining_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;a_def&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">slowness_defining_flag</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;s_def&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">snr</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;snr&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">amplitude_value</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;amp&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;per&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">magnitude_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_type_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">magnitude_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_1&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">magnitude_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_type_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">magnitude_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;mag_2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">line_id</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="n">fields</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="c1"># Don&#39;t take pick and arrival with wrong time residual</span>
            <span class="k">if</span> <span class="s1">&#39;*&#39;</span> <span class="ow">in</span> <span class="n">time_residual</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">pick</span> <span class="o">=</span> <span class="n">Pick</span><span class="p">()</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">WaveformStreamID</span><span class="p">()</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">station_code</span> <span class="o">=</span> <span class="n">station</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>

                <span class="n">network_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_network_code</span>
                <span class="n">location_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_location_code</span>
                <span class="n">channel_code</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_channel_code</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">network_code</span><span class="p">,</span> <span class="n">channel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_channel</span><span class="p">(</span><span class="n">station</span><span class="p">,</span>
                                                              <span class="n">pick</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">channel</span><span class="p">:</span>
                        <span class="n">channel_code</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">code</span>
                        <span class="n">location_code</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">location_code</span>
                <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">network_code</span> <span class="o">=</span> <span class="n">network_code</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">channel_code</span> <span class="o">=</span> <span class="n">channel_code</span>
                <span class="k">if</span> <span class="n">location_code</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span><span class="o">.</span><span class="n">location_code</span> <span class="o">=</span> <span class="n">location_code</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="n">ev_mode</span> <span class="o">=</span> <span class="n">EVALUATION_MODES</span><span class="p">[</span><span class="n">evaluation_mode</span><span class="p">]</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">evaluation_mode</span> <span class="o">=</span> <span class="n">ev_mode</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">polarity</span> <span class="o">=</span> <span class="n">PICK_POLARITIES</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="n">PICK_ONSETS</span><span class="p">[</span><span class="n">onset</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">phase_hint</span> <span class="o">=</span> <span class="n">phase</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">backazimuth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">arrival_azimuth</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">pick</span><span class="o">.</span><span class="n">horizontal_slowness</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">slowness</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;pick/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">line_id</span>
                <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span>
                <span class="n">event</span><span class="o">.</span><span class="n">picks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pick</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
                <span class="c1"># Can&#39;t parse pick, skip arrival and amplitude parsing</span>
                <span class="k">continue</span>

            <span class="n">arrival</span> <span class="o">=</span> <span class="n">Arrival</span><span class="p">()</span>
            <span class="n">arrival</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">id</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">arrival</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">azimuth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">event_azimuth</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">time_residual</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">time_residual</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">backazimuth_residual</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">azimuth_residual</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">horizontal_slowness_residual</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">slowness_residual</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>

            <span class="k">if</span> <span class="n">time_defining_flag</span> <span class="o">==</span> <span class="s1">&#39;T&#39;</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">time_weight</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">azimuth_defining_flag</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">backazimuth_weight</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="n">slowness_defining_flag</span> <span class="o">==</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span>
                <span class="n">arrival</span><span class="o">.</span><span class="n">horizontal_slowness_weight</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;arrival/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">line_id</span>
            <span class="n">arrival</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">,</span>
                                                   <span class="n">parent_res_id</span><span class="o">=</span><span class="n">origin_res_id</span><span class="p">)</span>
            <span class="n">origin</span><span class="o">.</span><span class="n">arrivals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrival</span><span class="p">)</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">amplitude</span> <span class="o">=</span> <span class="n">Amplitude</span><span class="p">()</span>
                <span class="n">amplitude</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>
                <span class="n">amplitude</span><span class="o">.</span><span class="n">generic_amplitude</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">amplitude_value</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">amplitude</span><span class="o">.</span><span class="n">pick_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">resource_id</span>
                    <span class="n">amplitude</span><span class="o">.</span><span class="n">waveform_id</span> <span class="o">=</span> <span class="n">pick</span><span class="o">.</span><span class="n">waveform_id</span>
                <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">amplitude</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">period</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">amplitude</span><span class="o">.</span><span class="n">snr</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">snr</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>

                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">magnitude_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">magnitude_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">isspace</span><span class="p">():</span>
                        <span class="n">amplitude</span><span class="o">.</span><span class="n">magnitude_hint</span> <span class="o">=</span> <span class="n">magnitude_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;amplitude/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">line_id</span>
                <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span>
                <span class="n">event</span><span class="o">.</span><span class="n">amplitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">amplitude</span><span class="p">)</span>

                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
                    <span class="n">sta_mag</span> <span class="o">=</span> <span class="n">StationMagnitude</span><span class="p">()</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">origin_id</span> <span class="o">=</span> <span class="n">origin_res_id</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">amplitude_id</span> <span class="o">=</span> <span class="n">amplitude</span><span class="o">.</span><span class="n">resource_id</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">station_magnitude_type</span> <span class="o">=</span> <span class="n">magnitude_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">mag</span> <span class="o">=</span> <span class="n">magnitude_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="n">public_id</span> <span class="o">=</span> <span class="s2">&quot;magnitude/station/</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">line_id</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">sta_mag</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="n">public_id</span><span class="p">)</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">station_magnitudes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sta_mag</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="Unpickler._deserialize"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin.Unpickler._deserialize.html#obspy.io.gse2.bulletin.Unpickler._deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">_deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">catalog</span> <span class="o">=</span> <span class="n">Catalog</span><span class="p">()</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Created from GSE2 format&#39;</span>
        <span class="n">catalog</span><span class="o">.</span><span class="n">creation_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_creation_info</span><span class="p">()</span>

        <span class="c1"># Flag used to ignore line which aren&#39;t in a BEGIN-STOP block</span>
        <span class="n">begin_block</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># Flag used to ignore line which aren&#39;t in a BULLETIN block</span>
        <span class="n">bulletin_block</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;BEGIN&#39;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">begin_block</span><span class="p">:</span>
                        <span class="c1"># 2 BEGIN without STOP</span>
                        <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_line_nb</span><span class="p">(</span><span class="s1">&#39;Missing STOP tag&#39;</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># Enter a BEGIN block</span>
                        <span class="n">begin_block</span> <span class="o">=</span> <span class="kc">True</span>

                    <span class="bp">self</span><span class="o">.</span><span class="n">_check_header</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;STOP&#39;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">begin_block</span><span class="p">:</span>
                        <span class="c1"># Exit a BEGIN-STOP block</span>
                        <span class="n">begin_block</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># STOP without BEGIN</span>
                        <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_line_nb</span><span class="p">(</span><span class="s1">&#39;Missing BEGIN tag&#39;</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;DATA_TYPE&#39;</span><span class="p">):</span>
                    <span class="n">bulletin_block</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">18</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;BULLETIN&#39;</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">begin_block</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">bulletin_block</span><span class="p">:</span>
                    <span class="c1"># Not in a BEGIN-STOP block, nor a DATA_TYPE BULLETIN</span>
                    <span class="c1"># block.</span>
                    <span class="k">continue</span>

                <span class="c1"># If a &quot;Reviewed Event Bulletin&quot; or &quot;Reviewed Bulletin&quot;</span>
                <span class="c1"># line exists, put it in comment</span>
                <span class="k">if</span> <span class="s1">&#39;Reviewed Event Bulletin&#39;</span> <span class="ow">in</span> <span class="n">line</span> \
                        <span class="ow">or</span> <span class="s1">&#39;Reviewed Bulletin&#39;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_comment</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">comment</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
                        <span class="n">catalog</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
                <span class="c1"># Detect start of an event</span>
                <span class="k">elif</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;EVENT&#39;</span><span class="p">):</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_event</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">event</span><span class="p">:</span>
                        <span class="n">catalog</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_line_nb</span><span class="p">(</span><span class="s1">&#39;Unexpected EOF while parsing&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_warn</span><span class="p">(</span><span class="s1">&#39;Unexpected error&#39;</span><span class="p">)</span>
            <span class="k">raise</span>

        <span class="k">if</span> <span class="n">begin_block</span><span class="p">:</span>
            <span class="c1"># BEGIN-STOP block not closed</span>
            <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Unexpected EOF while parsing, BEGIN-STOP block not closed&#39;</span>
            <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_line_nb</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">GSE2BulletinSyntaxError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">catalog</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_res_id</span><span class="p">(</span><span class="s1">&#39;event/evid&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">catalog</span></div></div>


<div class="viewcode-block" id="_read_gse2"><a class="viewcode-back" href="../../../../packages/autogen/obspy.io.gse2.bulletin._read_gse2.html#obspy.io.gse2.bulletin._read_gse2">[docs]</a><span class="k">def</span> <span class="nf">_read_gse2</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">inventory</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_network_code</span><span class="o">=</span><span class="s1">&#39;XX&#39;</span><span class="p">,</span>
               <span class="n">default_location_code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_channel_code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">res_id_prefix</span><span class="o">=</span><span class="s1">&#39;smi:local&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">event_point_separator</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">agency</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read a GSE2.0 bulletin file and returns an ObsPy Catalog object.</span>

<span class="sd">    .. warning::</span>
<span class="sd">        This function should NOT be called directly, it registers via the</span>
<span class="sd">        ObsPy :func:`~obspy.core.event.read_events` function, call this</span>
<span class="sd">        instead.</span>

<span class="sd">    :type filename: str</span>
<span class="sd">    :param filename: File or file-like object in text mode.</span>
<span class="sd">    :type inventory: :class:`~obspy.core.inventory.inventory.Inventory`</span>
<span class="sd">    :param inventory: Inventory used to retrieve network code, location code</span>
<span class="sd">        and channel code of stations.</span>
<span class="sd">    :type default_network_code: str</span>
<span class="sd">    :param default_network_code: Default network code used if stations</span>
<span class="sd">        are not found in the inventory.</span>
<span class="sd">    :type default_location_code: str</span>
<span class="sd">    :param default_location_code: Location code used if stations are</span>
<span class="sd">        not found in the inventory.</span>
<span class="sd">    :type default_channel_code: str</span>
<span class="sd">    :param default_channel_code: Default channel code used if stations</span>
<span class="sd">        are not found in the inventory.</span>
<span class="sd">    :type res_id_prefix: str</span>
<span class="sd">    :param res_id_prefix: Prefix used</span>
<span class="sd">        in :class:`~obspy.core.event.base.ResourceIdentifier` attributes.</span>
<span class="sd">    :type fields: dict</span>
<span class="sd">    :param fields: dictionary of positions of input fields, used if input file</span>
<span class="sd">        is non-standard</span>
<span class="sd">    :type event_point_separator: bool</span>
<span class="sd">    :param event_point_separator: ``True`` if events are separated by</span>
<span class="sd">        point rather than 2 empty lines.</span>
<span class="sd">    :type agency: str</span>
<span class="sd">    :param agency: Agency that generated the file.</span>
<span class="sd">    :rtype: :class:`~obspy.core.event.Catalog`</span>
<span class="sd">    :return: An ObsPy Catalog object.</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    &gt;&gt;&gt; from obspy import read_events</span>
<span class="sd">    &gt;&gt;&gt; default_fields = {</span>
<span class="sd">    ...     &#39;line_1&#39;: {</span>
<span class="sd">    ...         &#39;time&#39;: slice(0, 21),</span>
<span class="sd">    ...         &#39;time_fixf&#39;: slice(22, 23),</span>
<span class="sd">    ...         &#39;lat&#39;: slice(25, 33),</span>
<span class="sd">    ...         &#39;lon&#39;: slice(34, 43),</span>
<span class="sd">    ...         &#39;epicenter_fixf&#39;: slice(44, 45),</span>
<span class="sd">    ...         &#39;depth&#39;: slice(47, 52),</span>
<span class="sd">    ...         &#39;depth_fixf&#39;: slice(53, 54),</span>
<span class="sd">    ...         &#39;n_def&#39;: slice(56, 60),</span>
<span class="sd">    ...         &#39;n_sta&#39;: slice(61, 65),</span>
<span class="sd">    ...         &#39;gap&#39;: slice(66, 69),</span>
<span class="sd">    ...         &#39;mag_type_1&#39;: slice(71, 73),</span>
<span class="sd">    ...         &#39;mag_1&#39;: slice(73, 77),</span>
<span class="sd">    ...         &#39;mag_n_sta_1&#39;: slice(78, 80),</span>
<span class="sd">    ...         &#39;mag_type_2&#39;: slice(82, 84),</span>
<span class="sd">    ...         &#39;mag_2&#39;: slice(84, 88),</span>
<span class="sd">    ...         &#39;mag_n_sta_2&#39;: slice(89, 91),</span>
<span class="sd">    ...         &#39;mag_type_3&#39;: slice(93, 95),</span>
<span class="sd">    ...         &#39;mag_3&#39;: slice(95, 99),</span>
<span class="sd">    ...         &#39;mag_n_sta_3&#39;: slice(100, 102),</span>
<span class="sd">    ...         &#39;author&#39;: slice(104, 112),</span>
<span class="sd">    ...         &#39;id&#39;: slice(114, 122),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ...     &#39;line_2&#39;: {</span>
<span class="sd">    ...         &#39;rms&#39;: slice(5, 10),</span>
<span class="sd">    ...         &#39;ot_error&#39;: slice(15, 21),</span>
<span class="sd">    ...         &#39;s_major&#39;: slice(25, 31),</span>
<span class="sd">    ...         &#39;s_minor&#39;: slice(32, 38),</span>
<span class="sd">    ...         &#39;az&#39;: slice(40, 43),</span>
<span class="sd">    ...         &#39;depth_err&#39;: slice(49, 54),</span>
<span class="sd">    ...         &#39;min_dist&#39;: slice(56, 62),</span>
<span class="sd">    ...         &#39;max_dist&#39;: slice(63, 69),</span>
<span class="sd">    ...         &#39;mag_err_1&#39;: slice(74, 77),</span>
<span class="sd">    ...         &#39;mag_err_2&#39;: slice(85, 88),</span>
<span class="sd">    ...         &#39;mag_err_3&#39;: slice(96, 99),</span>
<span class="sd">    ...         &#39;antype&#39;: slice(104, 105),</span>
<span class="sd">    ...         &#39;loctype&#39;: slice(106, 107),</span>
<span class="sd">    ...         &#39;evtype&#39;: slice(108, 110),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ...     &#39;arrival&#39;: {</span>
<span class="sd">    ...         &#39;sta&#39;: slice(0, 5),</span>
<span class="sd">    ...         &#39;dist&#39;: slice(6, 12),</span>
<span class="sd">    ...         &#39;ev_az&#39;: slice(13, 18),</span>
<span class="sd">    ...         &#39;picktype&#39;: slice(19, 20),</span>
<span class="sd">    ...         &#39;direction&#39;: slice(20, 21),</span>
<span class="sd">    ...         &#39;detchar&#39;: slice(21, 22),</span>
<span class="sd">    ...         &#39;phase&#39;: slice(23, 30),</span>
<span class="sd">    ...         &#39;time&#39;: slice(31, 52),</span>
<span class="sd">    ...         &#39;t_res&#39;: slice(53, 58),</span>
<span class="sd">    ...         &#39;azim&#39;: slice(59, 64),</span>
<span class="sd">    ...         &#39;az_res&#39;: slice(65, 71),</span>
<span class="sd">    ...         &#39;slow&#39;: slice(72, 77),</span>
<span class="sd">    ...         &#39;s_res&#39;: slice(78, 83),</span>
<span class="sd">    ...         &#39;t_def&#39;: slice(84, 85),</span>
<span class="sd">    ...         &#39;a_def&#39;: slice(85, 86),</span>
<span class="sd">    ...         &#39;s_def&#39;: slice(86, 87),</span>
<span class="sd">    ...         &#39;snr&#39;: slice(88, 93),</span>
<span class="sd">    ...         &#39;amp&#39;: slice(94, 103),</span>
<span class="sd">    ...         &#39;per&#39;: slice(104, 109),</span>
<span class="sd">    ...         &#39;mag_type_1&#39;: slice(110, 112),</span>
<span class="sd">    ...         &#39;mag_1&#39;: slice(112, 116),</span>
<span class="sd">    ...         &#39;mag_type_2&#39;: slice(117, 119),</span>
<span class="sd">    ...         &#39;mag_2&#39;: slice(119, 123),</span>
<span class="sd">    ...         &#39;id&#39;: slice(124, 132),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ... }</span>
<span class="sd">    &gt;&gt;&gt; # Only non-standard field indexes are required</span>
<span class="sd">    &gt;&gt;&gt; fields = {</span>
<span class="sd">    ...     &#39;line_1&#39;: {</span>
<span class="sd">    ...         &#39;author&#39;: slice(105, 113),</span>
<span class="sd">    ...         &#39;id&#39;: slice(114, 123),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ...     &#39;line_2&#39;: {</span>
<span class="sd">    ...         &#39;az&#39;: slice(40, 46),</span>
<span class="sd">    ...         &#39;antype&#39;: slice(105, 106),</span>
<span class="sd">    ...         &#39;loctype&#39;: slice(107, 108),</span>
<span class="sd">    ...         &#39;evtype&#39;: slice(109, 111),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ...     &#39;arrival&#39;: {</span>
<span class="sd">    ...         &#39;amp&#39;: slice(94, 104),</span>
<span class="sd">    ...     },</span>
<span class="sd">    ... }</span>
<span class="sd">    &gt;&gt;&gt; catalog = read_events(&#39;/path/to/bulletin/gse_2.0_non_standard.txt&#39;,</span>
<span class="sd">    ... default_network_code=&#39;FR&#39;, res_id_prefix=&#39;quakeml:abc&#39;,</span>
<span class="sd">    ... fields=fields, event_point_separator=True)</span>
<span class="sd">    &gt;&gt;&gt; print(catalog)</span>
<span class="sd">    2 Event(s) in Catalog:</span>
<span class="sd">    1995-01-16T07:26:52.400000Z | +39.450,  +20.440 | 3.6 mb | manual</span>
<span class="sd">    1995-01-16T07:27:07.300000Z | +50.772, -129.760 | 1.2 Ml | manual</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">Unpickler</span><span class="p">(</span><span class="n">inventory</span><span class="p">,</span> <span class="n">default_network_code</span><span class="p">,</span> <span class="n">default_location_code</span><span class="p">,</span>
                     <span class="n">default_channel_code</span><span class="p">,</span> <span class="n">res_id_prefix</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span>
                     <span class="n">event_point_separator</span><span class="p">,</span> <span class="n">agency</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>