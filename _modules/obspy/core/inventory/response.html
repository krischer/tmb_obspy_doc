<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.core.inventory.response &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="http://docs.obspy.org/search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.core.inventory.response</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Classes related to instrument responses.</span>

<span class="sd">:copyright:</span>
<span class="sd">    Lion Krischer (krischer@geophysik.uni-muenchen.de), 2013</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA</span>

<span class="kn">import</span> <span class="nn">ctypes</span> <span class="k">as</span> <span class="nn">C</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">defaultdict</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="k">import</span> <span class="n">pi</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">obspy.core.util.base</span> <span class="k">import</span> <span class="n">ComparingObject</span>
<span class="kn">from</span> <span class="nn">obspy.core.util.obspy_types</span> <span class="k">import</span> <span class="p">(</span><span class="n">ComplexWithUncertainties</span><span class="p">,</span> <span class="n">CustomFloat</span><span class="p">,</span>
                                         <span class="n">FloatWithUncertainties</span><span class="p">,</span>
                                         <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">,</span>
                                         <span class="n">ObsPyException</span><span class="p">,</span>
                                         <span class="n">ZeroSamplingRate</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">.util</span> <span class="k">import</span> <span class="n">Angle</span><span class="p">,</span> <span class="n">Frequency</span>


<div class="viewcode-block" id="ResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseStage.html#obspy.core.inventory.response.ResponseStage">[docs]</a><span class="k">class</span> <span class="nc">ResponseStage</span><span class="p">(</span><span class="n">ComparingObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        This complex type represents channel response and covers SEED</span>
<span class="sd">        blockettes 53 to 56.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseStage.__init__.html#obspy.core.inventory.response.ResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type stage_sequence_number: int</span>
<span class="sd">        :param stage_sequence_number: Stage sequence number, greater or equal</span>
<span class="sd">            to zero. This is used in all the response SEED blockettes.</span>
<span class="sd">        :type stage_gain: float</span>
<span class="sd">        :param stage_gain: Value of stage gain.</span>
<span class="sd">        :type stage_gain_frequency: float</span>
<span class="sd">        :param stage_gain_frequency: Frequency of stage gain.</span>
<span class="sd">        :type input_units: str</span>
<span class="sd">        :param input_units: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :type output_units: str</span>
<span class="sd">        :param output_units: The units of the data as output from the</span>
<span class="sd">            perspective of data acquisition. These would be the units of the</span>
<span class="sd">            data prior to correcting for this response.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :type resource_id: str</span>
<span class="sd">        :param resource_id: This field contains a string that should serve as a</span>
<span class="sd">            unique resource identifier. This identifier can be interpreted</span>
<span class="sd">            differently depending on the data center/software that generated</span>
<span class="sd">            the document. Also, we recommend to use something like</span>
<span class="sd">            GENERATOR:Meaningful ID. As a common behavior equipment with the</span>
<span class="sd">            same ID should contains the same information/be derived from the</span>
<span class="sd">            same base instruments.</span>
<span class="sd">        :type resource_id2: str</span>
<span class="sd">        :param resource_id2: This field contains a string that should serve as</span>
<span class="sd">            a unique resource identifier. Resource identifier of the subgroup</span>
<span class="sd">            of the response stage that varies across different response stage</span>
<span class="sd">            types (e.g. the poles and zeros part or the FIR part).</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param name: A name given to the filter stage.</span>
<span class="sd">        :type input_units_description: str, optional</span>
<span class="sd">        :param input_units_description: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :type output_units_description: str, optional</span>
<span class="sd">        :param output_units_description: The units of the data as output from</span>
<span class="sd">            the perspective of data acquisition. These would be the units of</span>
<span class="sd">            the data prior to correcting for this response.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :type description: str, optional</span>
<span class="sd">        :param description: A short description of of the filter.</span>
<span class="sd">        :type decimation_input_sample_rate:  float, optional</span>
<span class="sd">        :param decimation_input_sample_rate: The sampling rate before the</span>
<span class="sd">            decimation in samples per second.</span>
<span class="sd">        :type decimation_factor: int, optional</span>
<span class="sd">        :param decimation_factor: The applied decimation factor.</span>
<span class="sd">        :type decimation_offset: int, optional</span>
<span class="sd">        :param decimation_offset: The sample chosen for use. 0 denotes the</span>
<span class="sd">            first sample, 1 the second, and so forth.</span>
<span class="sd">        :type decimation_delay: float, optional</span>
<span class="sd">        :param decimation_delay: The estimated pure delay from the decimation.</span>
<span class="sd">        :type decimation_correction: float, optional</span>
<span class="sd">        :param decimation_correction: The time shift applied to correct for the</span>
<span class="sd">            delay at this stage.</span>

<span class="sd">        .. note::</span>
<span class="sd">            The stage gain (or stage sensitivity) is the gain at the stage of</span>
<span class="sd">            the encapsulating response element and corresponds to SEED</span>
<span class="sd">            blockette 58. In the SEED convention, stage 0 gain represents the</span>
<span class="sd">            overall sensitivity of the channel.  In this schema, stage 0 gains</span>
<span class="sd">            are allowed but are considered deprecated.  Overall sensitivity</span>
<span class="sd">            should be specified in the InstrumentSensitivity element.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_sequence_number</span> <span class="o">=</span> <span class="n">stage_sequence_number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units</span> <span class="o">=</span> <span class="n">input_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units</span> <span class="o">=</span> <span class="n">output_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units_description</span> <span class="o">=</span> <span class="n">input_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units_description</span> <span class="o">=</span> <span class="n">output_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">resource_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_id2</span> <span class="o">=</span> <span class="n">resource_id2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_gain</span> <span class="o">=</span> <span class="n">stage_gain</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stage_gain_frequency</span> <span class="o">=</span> <span class="n">stage_gain_frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="o">=</span> <span class="n">decimation_input_sample_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation_factor</span> <span class="o">=</span> <span class="n">decimation_factor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation_offset</span> <span class="o">=</span> <span class="n">decimation_offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation_delay</span> <span class="o">=</span> <span class="n">decimation_delay</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation_correction</span> <span class="o">=</span> <span class="n">decimation_correction</span></div>

<div class="viewcode-block" id="ResponseStage.__str__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseStage.__str__.html#obspy.core.inventory.response.ResponseStage.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Response type: </span><span class="si">{response_type}</span><span class="s2">, Stage Sequence Number: &quot;</span>
            <span class="s2">&quot;</span><span class="si">{response_stage}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="si">{name_desc}</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="si">{resource_id}</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">From </span><span class="si">{input_units}{input_desc}</span><span class="s2"> to </span><span class="si">{output_units}{output_desc}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Stage gain: </span><span class="si">{gain}</span><span class="s2">, defined at </span><span class="si">{gain_freq:.2f}</span><span class="s2"> Hz</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="si">{decimation}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">response_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="n">response_stage</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">gain</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">gain_freq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">stage_gain_frequency</span><span class="p">,</span>
            <span class="n">name_desc</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\t</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Resource Id: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span>
                         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">input_units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">input_units</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_units</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
            <span class="n">input_desc</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot; (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_units_description</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_units_description</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">output_units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">output_units</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_units</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">,</span>
            <span class="n">output_desc</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot; (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_units_description</span>
                         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_units_description</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
            <span class="n">decimation</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Decimation:</span><span class="se">\n\t\t</span><span class="s2">Input Sample Rate: </span><span class="si">%.2f</span><span class="s2"> Hz</span><span class="se">\n\t\t</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Decimation Factor: </span><span class="si">%i</span><span class="se">\n\t\t</span><span class="s2">Decimation Offset: </span><span class="si">%i</span><span class="se">\n\t\t</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Decimation Delay: </span><span class="si">%.2f</span><span class="se">\n\t\t</span><span class="s2">Decimation Correction: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">decimation_factor</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">decimation_offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">decimation_delay</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">decimation_correction</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ret</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

<div class="viewcode-block" id="ResponseStage._repr_pretty_"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseStage._repr_pretty_.html#obspy.core.inventory.response.ResponseStage._repr_pretty_">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_pretty_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">cycle</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="PolesZerosResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolesZerosResponseStage.html#obspy.core.inventory.response.PolesZerosResponseStage">[docs]</a><span class="k">class</span> <span class="nc">PolesZerosResponseStage</span><span class="p">(</span><span class="n">ResponseStage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        Response: complex poles and zeros. Corresponds to SEED blockette 53.</span>

<span class="sd">    The response stage is used for the analog stages of the filter system and</span>
<span class="sd">    the description of infinite impulse response (IIR) digital filters.</span>

<span class="sd">    Has all the arguments of the parent class</span>
<span class="sd">    :class:`~obspy.core.inventory.response.ResponseStage` and the following:</span>

<span class="sd">    :type pz_transfer_function_type: str</span>
<span class="sd">    :param pz_transfer_function_type: A string describing the type of transfer</span>
<span class="sd">        function. Can be one of:</span>

<span class="sd">        * ``LAPLACE (RADIANS/SECOND)``</span>
<span class="sd">        * ``LAPLACE (HERTZ)``</span>
<span class="sd">        * ``DIGITAL (Z-TRANSFORM)``</span>

<span class="sd">        The function tries to match inputs to one of three types if it can.</span>
<span class="sd">    :type normalization_frequency: float</span>
<span class="sd">    :param normalization_frequency: The frequency at which the normalization</span>
<span class="sd">        factor is normalized.</span>
<span class="sd">    :type zeros: list of complex</span>
<span class="sd">    :param zeros: All zeros of the stage.</span>
<span class="sd">    :type poles: list of complex</span>
<span class="sd">    :param poles: All poles of the stage.</span>
<span class="sd">    :type normalization_factor: float, optional</span>
<span class="sd">    :param normalization_factor:</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="PolesZerosResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolesZerosResponseStage.__init__.html#obspy.core.inventory.response.PolesZerosResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">pz_transfer_function_type</span><span class="p">,</span>
                 <span class="n">normalization_frequency</span><span class="p">,</span> <span class="n">zeros</span><span class="p">,</span> <span class="n">poles</span><span class="p">,</span>
                 <span class="n">normalization_factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Set the Poles and Zeros specific attributes. Special cases are</span>
        <span class="c1"># handled by properties.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pz_transfer_function_type</span> <span class="o">=</span> <span class="n">pz_transfer_function_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalization_frequency</span> <span class="o">=</span> <span class="n">normalization_frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">normalization_factor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zeros</span> <span class="o">=</span> <span class="n">zeros</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">poles</span> <span class="o">=</span> <span class="n">poles</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PolesZerosResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="n">resource_id2</span><span class="p">,</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
            <span class="n">decimation_factor</span><span class="o">=</span><span class="n">decimation_factor</span><span class="p">,</span>
            <span class="n">decimation_offset</span><span class="o">=</span><span class="n">decimation_offset</span><span class="p">,</span>
            <span class="n">decimation_delay</span><span class="o">=</span><span class="n">decimation_delay</span><span class="p">,</span>
            <span class="n">decimation_correction</span><span class="o">=</span><span class="n">decimation_correction</span><span class="p">)</span></div>

<div class="viewcode-block" id="PolesZerosResponseStage.__str__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolesZerosResponseStage.__str__.html#obspy.core.inventory.response.PolesZerosResponseStage.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">PolesZerosResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Transfer function type: </span><span class="si">{transfer_fct_type}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Normalization factor: </span><span class="si">{norm_fact:g}</span><span class="s2">, &quot;</span>
            <span class="s2">&quot;Normalization frequency: </span><span class="si">{norm_freq:.2f}</span><span class="s2"> Hz</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Poles: </span><span class="si">{poles}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Zeros: </span><span class="si">{zeros}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">transfer_fct_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pz_transfer_function_type</span><span class="p">,</span>
            <span class="n">norm_fact</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">normalization_factor</span><span class="p">,</span>
            <span class="n">norm_freq</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">normalization_frequency</span><span class="p">,</span>
            <span class="n">poles</span><span class="o">=</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">poles</span><span class="p">)),</span>
            <span class="n">zeros</span><span class="o">=</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">zeros</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="PolesZerosResponseStage._repr_pretty_"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolesZerosResponseStage._repr_pretty_.html#obspy.core.inventory.response.PolesZerosResponseStage._repr_pretty_">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_pretty_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">cycle</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">zeros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zeros</span>

    <span class="nd">@zeros</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">zeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ComplexWithUncertainties</span><span class="p">):</span>
                <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ComplexWithUncertainties</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_zeros</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">poles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_poles</span>

    <span class="nd">@poles</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">poles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ComplexWithUncertainties</span><span class="p">):</span>
                <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">ComplexWithUncertainties</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_poles</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">normalization_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normalization_frequency</span>

    <span class="nd">@normalization_frequency</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">normalization_frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normalization_frequency</span> <span class="o">=</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pz_transfer_function_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pz_transfer_function_type</span>

    <span class="nd">@pz_transfer_function_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">pz_transfer_function_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the transfer function type.</span>

<span class="sd">        Rather permissive but should make it less awkward to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not a valid value for &#39;pz_transfer_function_type&#39;. &quot;</span>
               <span class="s2">&quot;Valid one are:</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">LAPLACE (RADIANS/SECOND)</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">LAPLACE (HERTZ)</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">DIGITAL (Z-TRANSFORM)&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">value</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;laplace&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;radian&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pz_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;LAPLACE (RADIANS/SECOND)&quot;</span>
            <span class="k">elif</span> <span class="s2">&quot;hertz&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">or</span> <span class="s2">&quot;hz&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pz_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;LAPLACE (HERTZ)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;digital&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pz_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;DIGITAL (Z-TRANSFORM)&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>


<div class="viewcode-block" id="CoefficientsTypeResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientsTypeResponseStage.html#obspy.core.inventory.response.CoefficientsTypeResponseStage">[docs]</a><span class="k">class</span> <span class="nc">CoefficientsTypeResponseStage</span><span class="p">(</span><span class="n">ResponseStage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This response type can describe coefficients for FIR filters. Laplace</span>
<span class="sd">    transforms and IIR filters can also be expressed using this type but should</span>
<span class="sd">    rather be described using the PolesZerosResponseStage class. Effectively</span>
<span class="sd">    corresponds to SEED blockette 54.</span>

<span class="sd">    Has all the arguments of the parent class</span>
<span class="sd">    :class:`~obspy.core.inventory.response.ResponseStage` and the following:</span>

<span class="sd">    :type cf_transfer_function_type: str</span>
<span class="sd">    :param cf_transfer_function_type: A string describing the type of transfer</span>
<span class="sd">        function. Can be one of:</span>

<span class="sd">        * ``ANALOG (RADIANS/SECOND)``</span>
<span class="sd">        * ``ANALOG (HERTZ)``</span>
<span class="sd">        * ``DIGITAL``</span>

<span class="sd">        The function tries to match inputs to one of three types if it can.</span>
<span class="sd">    :type numerator: list of</span>
<span class="sd">        :class:`~obspy.core.util.obspy_types.FloatWithUncertaintiesAndUnit`</span>
<span class="sd">    :param numerator: Numerator of the coefficient response stage.</span>
<span class="sd">    :type denominator: list of</span>
<span class="sd">        :class:`~obspy.core.util.obspy_types.FloatWithUncertaintiesAndUnit`</span>
<span class="sd">    :param denominator: Denominator of the coefficient response stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="CoefficientsTypeResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientsTypeResponseStage.__init__.html#obspy.core.inventory.response.CoefficientsTypeResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">cf_transfer_function_type</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">numerator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">denominator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Set the Coefficients type specific attributes. Special cases are</span>
        <span class="c1"># handled by properties.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cf_transfer_function_type</span> <span class="o">=</span> <span class="n">cf_transfer_function_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numerator</span> <span class="o">=</span> <span class="n">numerator</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">denominator</span> <span class="o">=</span> <span class="n">denominator</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoefficientsTypeResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="n">resource_id2</span><span class="p">,</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
            <span class="n">decimation_factor</span><span class="o">=</span><span class="n">decimation_factor</span><span class="p">,</span>
            <span class="n">decimation_offset</span><span class="o">=</span><span class="n">decimation_offset</span><span class="p">,</span>
            <span class="n">decimation_delay</span><span class="o">=</span><span class="n">decimation_delay</span><span class="p">,</span>
            <span class="n">decimation_correction</span><span class="o">=</span><span class="n">decimation_correction</span><span class="p">)</span></div>

<div class="viewcode-block" id="CoefficientsTypeResponseStage.__str__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientsTypeResponseStage.__str__.html#obspy.core.inventory.response.CoefficientsTypeResponseStage.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CoefficientsTypeResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="n">ret</span> <span class="o">+=</span> <span class="p">(</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Transfer function type: </span><span class="si">{transfer_fct_type}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Contains </span><span class="si">{num_count}</span><span class="s2"> numerators and </span><span class="si">{den_count}</span><span class="s2"> denominators&quot;</span><span class="p">)</span>\
            <span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">transfer_fct_type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cf_transfer_function_type</span><span class="p">,</span>
                <span class="n">num_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numerator</span><span class="p">),</span> <span class="n">den_count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">denominator</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="CoefficientsTypeResponseStage._repr_pretty_"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientsTypeResponseStage._repr_pretty_.html#obspy.core.inventory.response.CoefficientsTypeResponseStage._repr_pretty_">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_pretty_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">cycle</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">numerator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_numerator</span>

    <span class="nd">@numerator</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">numerator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Numerator elements must be of &quot;</span>
                       <span class="s2">&quot;FloatWithUncertaintiesAndUnit type.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_numerator</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">denominator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_denominator</span>

    <span class="nd">@denominator</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">denominator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Denominator elements must be of &quot;</span>
                       <span class="s2">&quot;FloatWithUncertaintiesAndUnit type.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_denominator</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cf_transfer_function_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cf_transfer_function_type</span>

    <span class="nd">@cf_transfer_function_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">cf_transfer_function_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Setter for the transfer function type.</span>

<span class="sd">        Rather permissive but should make it less awkward to use.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not a valid value for &#39;cf_transfer_function_type&#39;. &quot;</span>
               <span class="s2">&quot;Valid one are:</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">ANALOG (RADIANS/SECOND)</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">ANALOG (HERTZ)</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">DIGITAL&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">value</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;analog&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;rad&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cf_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;ANALOG (RADIANS/SECOND)&quot;</span>
            <span class="k">elif</span> <span class="s2">&quot;hertz&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">or</span> <span class="s2">&quot;hz&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cf_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;ANALOG (HERTZ)&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s2">&quot;digital&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_cf_transfer_function_type</span> <span class="o">=</span> <span class="s2">&quot;DIGITAL&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>


<div class="viewcode-block" id="ResponseListResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseListResponseStage.html#obspy.core.inventory.response.ResponseListResponseStage">[docs]</a><span class="k">class</span> <span class="nc">ResponseListResponseStage</span><span class="p">(</span><span class="n">ResponseStage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This response type gives a list of frequency, amplitude and phase value</span>
<span class="sd">    pairs. Effectively corresponds to SEED blockette 55.</span>

<span class="sd">    Has all the arguments of the parent class</span>
<span class="sd">    :class:`~obspy.core.inventory.response.ResponseStage` and the following:</span>

<span class="sd">    :type response_list_elements: list of</span>
<span class="sd">        :class:`~obspy.core.inventory.response.ResponseListElement`</span>
<span class="sd">    :param response_list_elements: A list of single discrete frequency,</span>
<span class="sd">        amplitude and phase response values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ResponseListResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseListResponseStage.__init__.html#obspy.core.inventory.response.ResponseListResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">response_list_elements</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">response_list_elements</span> <span class="o">=</span> <span class="n">response_list_elements</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ResponseListResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="n">resource_id2</span><span class="p">,</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
            <span class="n">decimation_factor</span><span class="o">=</span><span class="n">decimation_factor</span><span class="p">,</span>
            <span class="n">decimation_offset</span><span class="o">=</span><span class="n">decimation_offset</span><span class="p">,</span>
            <span class="n">decimation_delay</span><span class="o">=</span><span class="n">decimation_delay</span><span class="p">,</span>
            <span class="n">decimation_correction</span><span class="o">=</span><span class="n">decimation_correction</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ResponseListElement"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseListElement.html#obspy.core.inventory.response.ResponseListElement">[docs]</a><span class="k">class</span> <span class="nc">ResponseListElement</span><span class="p">(</span><span class="n">ComparingObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Describes the amplitude and phase response value for a discrete frequency</span>
<span class="sd">    value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="ResponseListElement.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.ResponseListElement.__init__.html#obspy.core.inventory.response.ResponseListElement.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">amplitude</span><span class="p">,</span> <span class="n">phase</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type frequency: float</span>
<span class="sd">        :param frequency: The frequency for which the response is valid.</span>
<span class="sd">        :type amplitude: float</span>
<span class="sd">        :param amplitude: The value for the amplitude response at this</span>
<span class="sd">            frequency.</span>
<span class="sd">        :type phase: float</span>
<span class="sd">        :param phase: The value for the phase response at this frequency.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">=</span> <span class="n">amplitude</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span>

    <span class="nd">@frequency</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">frequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Frequency</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Frequency</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frequency</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_amplitude</span>

    <span class="nd">@amplitude</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">amplitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">FloatWithUncertaintiesAndUnit</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_amplitude</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">phase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span>

    <span class="nd">@phase</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Angle</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_phase</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="FIRResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.FIRResponseStage.html#obspy.core.inventory.response.FIRResponseStage">[docs]</a><span class="k">class</span> <span class="nc">FIRResponseStage</span><span class="p">(</span><span class="n">ResponseStage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        Response: FIR filter. Corresponds to SEED blockette 61. FIR filters are</span>
<span class="sd">        also commonly documented using the CoefficientsType element.</span>

<span class="sd">    Has all the arguments of the parent class</span>
<span class="sd">    :class:`~obspy.core.inventory.response.ResponseStage` and the following:</span>

<span class="sd">    :type symmetry: str</span>
<span class="sd">    :param symmetry: A string describing the symmetry. Can be one of:</span>

<span class="sd">            * ``NONE``</span>
<span class="sd">            * ``EVEN``</span>
<span class="sd">            * ``ODD``</span>

<span class="sd">    :type coefficients: list of floats</span>
<span class="sd">    :param coefficients: List of FIR coefficients.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="FIRResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.FIRResponseStage.__init__.html#obspy.core.inventory.response.FIRResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">symmetry</span><span class="o">=</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">coefficients</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_symmetry</span> <span class="o">=</span> <span class="n">symmetry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">coefficients</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FIRResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="n">resource_id2</span><span class="p">,</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
            <span class="n">decimation_factor</span><span class="o">=</span><span class="n">decimation_factor</span><span class="p">,</span>
            <span class="n">decimation_offset</span><span class="o">=</span><span class="n">decimation_offset</span><span class="p">,</span>
            <span class="n">decimation_delay</span><span class="o">=</span><span class="n">decimation_delay</span><span class="p">,</span>
            <span class="n">decimation_correction</span><span class="o">=</span><span class="n">decimation_correction</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">symmetry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_symmetry</span>

    <span class="nd">@symmetry</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">symmetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;NONE&quot;</span><span class="p">,</span> <span class="s2">&quot;EVEN&quot;</span><span class="p">,</span> <span class="s2">&quot;ODD&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Value &#39;</span><span class="si">%s</span><span class="s2">&#39; for FIR Response symmetry not allowed. &quot;</span>
                   <span class="s2">&quot;Possible values are: &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_symmetry</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">coefficients</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficients</span>

    <span class="nd">@coefficients</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">coefficients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">new_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">FilterCoefficient</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">FilterCoefficient</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">new_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficients</span> <span class="o">=</span> <span class="n">new_values</span></div>


<div class="viewcode-block" id="PolynomialResponseStage"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolynomialResponseStage.html#obspy.core.inventory.response.PolynomialResponseStage">[docs]</a><span class="k">class</span> <span class="nc">PolynomialResponseStage</span><span class="p">(</span><span class="n">ResponseStage</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        Response: expressed as a polynomial (allows non-linear sensors to be</span>
<span class="sd">        described). Corresponds to SEED blockette 62. Can be used to describe a</span>
<span class="sd">        stage of acquisition or a complete system.</span>

<span class="sd">    Has all the arguments of the parent class</span>
<span class="sd">    :class:`~obspy.core.inventory.response.ResponseStage` and the following:</span>

<span class="sd">    :type approximation_type: str</span>
<span class="sd">    :param approximation_type: Approximation type. Currently restricted to</span>
<span class="sd">        &#39;MACLAURIN&#39; by StationXML definition.</span>
<span class="sd">    :type frequency_lower_bound: float</span>
<span class="sd">    :param frequency_lower_bound: Lower frequency bound.</span>
<span class="sd">    :type frequency_upper_bound: float</span>
<span class="sd">    :param frequency_upper_bound: Upper frequency bound.</span>
<span class="sd">    :type approximation_lower_bound: float</span>
<span class="sd">    :param approximation_lower_bound: Lower bound of approximation.</span>
<span class="sd">    :type approximation_upper_bound: float</span>
<span class="sd">    :param approximation_upper_bound: Upper bound of approximation.</span>
<span class="sd">    :type maximum_error: float</span>
<span class="sd">    :param maximum_error: Maximum error.</span>
<span class="sd">    :type coefficients: list of floats</span>
<span class="sd">    :param coefficients: List of polynomial coefficients.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="PolynomialResponseStage.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.PolynomialResponseStage.__init__.html#obspy.core.inventory.response.PolynomialResponseStage.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">stage_gain</span><span class="p">,</span>
                 <span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">frequency_lower_bound</span><span class="p">,</span>
                 <span class="n">frequency_upper_bound</span><span class="p">,</span> <span class="n">approximation_lower_bound</span><span class="p">,</span>
                 <span class="n">approximation_upper_bound</span><span class="p">,</span> <span class="n">maximum_error</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span>
                 <span class="n">approximation_type</span><span class="o">=</span><span class="s1">&#39;MACLAURIN&#39;</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">resource_id2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_factor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">decimation_delay</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">decimation_correction</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span> <span class="o">=</span> <span class="n">approximation_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_lower_bound</span> <span class="o">=</span> <span class="n">frequency_lower_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_upper_bound</span> <span class="o">=</span> <span class="n">frequency_upper_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approximation_lower_bound</span> <span class="o">=</span> <span class="n">approximation_lower_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approximation_upper_bound</span> <span class="o">=</span> <span class="n">approximation_upper_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_error</span> <span class="o">=</span> <span class="n">maximum_error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">coefficients</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">PolynomialResponseStage</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">stage_sequence_number</span><span class="o">=</span><span class="n">stage_sequence_number</span><span class="p">,</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">resource_id</span><span class="o">=</span><span class="n">resource_id</span><span class="p">,</span> <span class="n">resource_id2</span><span class="o">=</span><span class="n">resource_id2</span><span class="p">,</span>
            <span class="n">stage_gain</span><span class="o">=</span><span class="n">stage_gain</span><span class="p">,</span>
            <span class="n">stage_gain_frequency</span><span class="o">=</span><span class="n">stage_gain_frequency</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">decimation_input_sample_rate</span><span class="o">=</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
            <span class="n">decimation_factor</span><span class="o">=</span><span class="n">decimation_factor</span><span class="p">,</span>
            <span class="n">decimation_offset</span><span class="o">=</span><span class="n">decimation_offset</span><span class="p">,</span>
            <span class="n">decimation_delay</span><span class="o">=</span><span class="n">decimation_delay</span><span class="p">,</span>
            <span class="n">decimation_correction</span><span class="o">=</span><span class="n">decimation_correction</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">approximation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span>

    <span class="nd">@approximation_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">approximation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;MACLAURIN&quot;</span><span class="p">,)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Value &#39;</span><span class="si">%s</span><span class="s2">&#39; for polynomial response approximation type not &quot;</span>
                   <span class="s2">&quot;allowed. Possible values are: &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">coefficients</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficients</span>

    <span class="nd">@coefficients</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">coefficients</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">new_values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">CoefficientWithUncertainties</span><span class="p">):</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">CoefficientWithUncertainties</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">new_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficients</span> <span class="o">=</span> <span class="n">new_values</span></div>


<div class="viewcode-block" id="Response"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.html#obspy.core.inventory.response.Response">[docs]</a><span class="k">class</span> <span class="nc">Response</span><span class="p">(</span><span class="n">ComparingObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The root response object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Response.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.__init__.html#obspy.core.inventory.response.Response.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instrument_sensitivity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">instrument_polynomial</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">response_stages</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type resource_id: str</span>
<span class="sd">        :param resource_id: This field contains a string that should serve as a</span>
<span class="sd">            unique resource identifier. This identifier can be interpreted</span>
<span class="sd">            differently depending on the data center/software that generated</span>
<span class="sd">            the document. Also, we recommend to use something like</span>
<span class="sd">            GENERATOR:Meaningful ID. As a common behavior equipment with the</span>
<span class="sd">            same ID should contains the same information/be derived from the</span>
<span class="sd">            same base instruments.</span>
<span class="sd">        :type instrument_sensitivity:</span>
<span class="sd">            :class:`~obspy.core.inventory.response.InstrumentSensitivity`</span>
<span class="sd">        :param instrument_sensitivity: The total sensitivity for the given</span>
<span class="sd">            channel, representing the complete acquisition system expressed as</span>
<span class="sd">            a scalar.</span>
<span class="sd">        :type instrument_polynomial:</span>
<span class="sd">            :class:`~obspy.core.inventory.response.InstrumentPolynomial`</span>
<span class="sd">        :param instrument_polynomial: The total sensitivity for the given</span>
<span class="sd">            channel, representing the complete acquisition system expressed as</span>
<span class="sd">            a polynomial.</span>
<span class="sd">        :type response_stages: list of</span>
<span class="sd">            :class:`~obspy.core.inventory.response.ResponseStage` objects</span>
<span class="sd">        :param response_stages: A list of the response stages. Covers SEED</span>
<span class="sd">            blockettes 53 to 56.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">resource_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span> <span class="o">=</span> <span class="n">instrument_sensitivity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instrument_polynomial</span> <span class="o">=</span> <span class="n">instrument_polynomial</span>
        <span class="k">if</span> <span class="n">response_stages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">response_stages</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span> <span class="o">=</span> <span class="n">response_stages</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;response_stages must be an iterable.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></div>

<div class="viewcode-block" id="Response.get_evalresp_response"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.get_evalresp_response.html#obspy.core.inventory.response.Response.get_evalresp_response">[docs]</a>    <span class="k">def</span> <span class="nf">get_evalresp_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t_samp</span><span class="p">,</span> <span class="n">nfft</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">&quot;VEL&quot;</span><span class="p">,</span>
                              <span class="n">start_stage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">end_stage</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns frequency response and corresponding frequencies using</span>
<span class="sd">        evalresp.</span>

<span class="sd">        :type t_samp: float</span>
<span class="sd">        :param t_samp: time resolution (inverse frequency resolution)</span>
<span class="sd">        :type nfft: int</span>
<span class="sd">        :param nfft: Number of FFT points to use</span>
<span class="sd">        :type output: str</span>
<span class="sd">        :param output: Output units. One of:</span>

<span class="sd">            ``&quot;DISP&quot;``</span>
<span class="sd">                displacement, output unit is meters</span>
<span class="sd">            ``&quot;VEL&quot;``</span>
<span class="sd">                velocity, output unit is meters/second</span>
<span class="sd">            ``&quot;ACC&quot;``</span>
<span class="sd">                acceleration, output unit is meters/second**2</span>

<span class="sd">        :type start_stage: int, optional</span>
<span class="sd">        :param start_stage: Stage sequence number of first stage that will be</span>
<span class="sd">            used (disregarding all earlier stages).</span>
<span class="sd">        :type end_stage: int, optional</span>
<span class="sd">        :param end_stage: Stage sequence number of last stage that will be</span>
<span class="sd">            used (disregarding all later stages).</span>
<span class="sd">        :rtype: tuple of two arrays</span>
<span class="sd">        :returns: frequency response and corresponding frequencies</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Can not use evalresp on response with no response &quot;</span>
                   <span class="s2">&quot;stages.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ObsPyException</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="kn">import</span> <span class="nn">obspy.signal.evrespwrapper</span> <span class="k">as</span> <span class="nn">ew</span>
        <span class="kn">from</span> <span class="nn">obspy.signal.headers</span> <span class="k">import</span> <span class="n">clibevresp</span>

        <span class="n">out_units</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">out_units</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;DISP&quot;</span><span class="p">,</span> <span class="s2">&quot;VEL&quot;</span><span class="p">,</span> <span class="s2">&quot;ACC&quot;</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;requested output is &#39;</span><span class="si">%s</span><span class="s2">&#39; but must be one of &#39;DISP&#39;, &#39;VEL&#39; &quot;</span>
                   <span class="s2">&quot;or &#39;ACC&#39;&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">output</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Whacky. Evalresp uses a global variable and uses that to scale the</span>
        <span class="c1"># response if it encounters any unit that is not SI.</span>
        <span class="n">scale_factor</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">get_unit_mapping</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">units_mapping</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;DIS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;DIS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;DIS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;DIS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/S&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/SEC&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/S&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/SEC&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/S&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/SEC&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/S&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/SEC&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VEL&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/S**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/(S**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/SEC**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;M/(SEC**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/S**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/(S**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/SEC**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;NM/(SEC**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/S**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/(S**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/SEC**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;CM/(SEC**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/S**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/(S**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/SEC**2&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MM/(SEC**2)&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;ACC&quot;</span><span class="p">],</span>
                <span class="s2">&quot;V&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VOLTS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;VOLT&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VOLTS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;VOLTS&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VOLTS&quot;</span><span class="p">],</span>
                <span class="c1"># This is weird, but evalresp appears to do the same.</span>
                <span class="s2">&quot;V/M&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;VOLTS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;COUNT&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;COUNTS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;COUNTS&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;COUNTS&quot;</span><span class="p">],</span>
                <span class="s2">&quot;T&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;TESLA&quot;</span><span class="p">],</span>
                <span class="s2">&quot;PA&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;PRESSURE&quot;</span><span class="p">],</span>
                <span class="s2">&quot;MBAR&quot;</span><span class="p">:</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;PRESSURE&quot;</span><span class="p">]}</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">units_mapping</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;The unit &#39;</span><span class="si">%s</span><span class="s2">&#39; is not known to ObsPy. Raw evalresp &quot;</span>
                           <span class="s2">&quot;would refuse to calculate a response for this &quot;</span>
                           <span class="s2">&quot;channel. Proceed with caution.&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="n">key</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_UNITS</span><span class="p">[</span><span class="s2">&quot;UNDEF_UNITS&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">units_mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

            <span class="c1"># Scale factor with the same logic as evalresp.</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;CM/S**2&quot;</span><span class="p">,</span> <span class="s2">&quot;CM/S&quot;</span><span class="p">,</span> <span class="s2">&quot;CM/SEC&quot;</span><span class="p">,</span> <span class="s2">&quot;CM&quot;</span><span class="p">]:</span>
                <span class="n">scale_factor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0E2</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;MM/S**2&quot;</span><span class="p">,</span> <span class="s2">&quot;MM/S&quot;</span><span class="p">,</span> <span class="s2">&quot;MM/SEC&quot;</span><span class="p">,</span> <span class="s2">&quot;MM&quot;</span><span class="p">]:</span>
                <span class="n">scale_factor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0E3</span>
            <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;NM/S**2&quot;</span><span class="p">,</span> <span class="s2">&quot;NM/S&quot;</span><span class="p">,</span> <span class="s2">&quot;NM/SEC&quot;</span><span class="p">,</span> <span class="s2">&quot;NM&quot;</span><span class="p">]:</span>
                <span class="n">scale_factor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0E9</span>

            <span class="k">return</span> <span class="n">value</span>

        <span class="n">all_stages</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span><span class="p">:</span>
            <span class="c1"># optionally select only stages as requested by user</span>
            <span class="k">if</span> <span class="n">start_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">stage_sequence_number</span> <span class="o">&lt;</span> <span class="n">start_stage</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="k">if</span> <span class="n">end_stage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">stage</span><span class="o">.</span><span class="n">stage_sequence_number</span> <span class="o">&gt;</span> <span class="n">end_stage</span><span class="p">:</span>
                    <span class="k">continue</span>
            <span class="n">all_stages</span><span class="p">[</span><span class="n">stage</span><span class="o">.</span><span class="n">stage_sequence_number</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span>

        <span class="n">stage_lengths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="n">all_stages</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">stage_lengths</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">stage_lengths</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Each stage can only appear once.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">stage_list</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">all_stages</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">stage_objects</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">stage_number</span> <span class="ow">in</span> <span class="n">stage_list</span><span class="p">:</span>
            <span class="n">st</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Stage</span><span class="p">()</span>
            <span class="n">st</span><span class="o">.</span><span class="n">sequence_no</span> <span class="o">=</span> <span class="n">stage_number</span>

            <span class="n">stage_blkts</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">blockette</span> <span class="o">=</span> <span class="n">all_stages</span><span class="p">[</span><span class="n">stage_number</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># Write the input and output units.</span>
            <span class="n">st</span><span class="o">.</span><span class="n">input_units</span> <span class="o">=</span> <span class="n">get_unit_mapping</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">input_units</span><span class="p">)</span>
            <span class="n">st</span><span class="o">.</span><span class="n">output_units</span> <span class="o">=</span> <span class="n">get_unit_mapping</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">output_units</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blockette</span><span class="p">,</span> <span class="n">PolesZerosResponseStage</span><span class="p">):</span>
                <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>
                <span class="c1"># Map the transfer function type.</span>
                <span class="n">transfer_fct_mapping</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;LAPLACE (RADIANS/SECOND)&quot;</span><span class="p">:</span> <span class="s2">&quot;LAPLACE_PZ&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;LAPLACE (HERTZ)&quot;</span><span class="p">:</span> <span class="s2">&quot;ANALOG_PZ&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;DIGITAL (Z-TRANSFORM)&quot;</span><span class="p">:</span> <span class="s2">&quot;IIR_PZ&quot;</span><span class="p">}</span>
                <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="n">transfer_fct_mapping</span><span class="p">[</span>
                    <span class="n">blockette</span><span class="o">.</span><span class="n">pz_transfer_function_type</span><span class="p">]]</span>

                <span class="c1"># The blockette is a pole zero blockette.</span>
                <span class="n">pz</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">pole_zero</span>

                <span class="n">pz</span><span class="o">.</span><span class="n">nzeros</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">zeros</span><span class="p">)</span>
                <span class="n">pz</span><span class="o">.</span><span class="n">npoles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">poles</span><span class="p">)</span>
                <span class="n">pz</span><span class="o">.</span><span class="n">a0</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">normalization_factor</span>
                <span class="n">pz</span><span class="o">.</span><span class="n">a0_freq</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">normalization_frequency</span>

                <span class="c1"># XXX: Find a better way to do this.</span>
                <span class="n">poles</span> <span class="o">=</span> <span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">ComplexNumber</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">poles</span><span class="p">))()</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">poles</span><span class="p">):</span>
                    <span class="n">poles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">real</span>
                    <span class="n">poles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">imag</span>

                <span class="n">zeros</span> <span class="o">=</span> <span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">ComplexNumber</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">zeros</span><span class="p">))()</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">zeros</span><span class="p">):</span>
                    <span class="n">zeros</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">real</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">real</span>
                    <span class="n">zeros</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">imag</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">imag</span>

                <span class="n">pz</span><span class="o">.</span><span class="n">poles</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">poles</span><span class="p">),</span>
                                  <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">ComplexNumber</span><span class="p">))</span>
                <span class="n">pz</span><span class="o">.</span><span class="n">zeros</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">zeros</span><span class="p">),</span>
                                  <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ew</span><span class="o">.</span><span class="n">ComplexNumber</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blockette</span><span class="p">,</span> <span class="n">CoefficientsTypeResponseStage</span><span class="p">):</span>
                <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>
                <span class="c1"># This type can have either an FIR or an IIR response. If</span>
                <span class="c1"># the number of denominators is 0, it is a FIR. Otherwise</span>
                <span class="c1"># an IIR.</span>

                <span class="c1"># FIR</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">denominator</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">cf_transfer_function_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> \
                            <span class="o">!=</span> <span class="s2">&quot;digital&quot;</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;When no denominators are given it must &quot;</span>
                               <span class="s2">&quot;be a digital FIR filter.&quot;</span><span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="c1"># Set the type to an asymmetric FIR blockette.</span>
                    <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;FIR_ASYM&quot;</span><span class="p">]</span>
                    <span class="n">fir</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">fir</span>
                    <span class="n">fir</span><span class="o">.</span><span class="n">h0</span> <span class="o">=</span> <span class="mf">1.0</span>
                    <span class="n">fir</span><span class="o">.</span><span class="n">ncoeffs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">)</span>
                    <span class="c1"># XXX: Find a better way to do this.</span>
                    <span class="n">coeffs</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">))()</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">):</span>
                        <span class="n">coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">fir</span><span class="o">.</span><span class="n">coeffs</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">coeffs</span><span class="p">),</span>
                                        <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span><span class="p">))</span>
                <span class="c1"># IIR</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;IIR_COEFFS&quot;</span><span class="p">]</span>
                    <span class="n">coeff</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">coeff</span>

                    <span class="n">coeff</span><span class="o">.</span><span class="n">h0</span> <span class="o">=</span> <span class="mf">1.0</span>
                    <span class="n">coeff</span><span class="o">.</span><span class="n">nnumer</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">)</span>
                    <span class="n">coeff</span><span class="o">.</span><span class="n">ndenom</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">denominator</span><span class="p">)</span>

                    <span class="c1"># XXX: Find a better way to do this.</span>
                    <span class="n">coeffs</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">))()</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">numerator</span><span class="p">):</span>
                        <span class="n">coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">coeff</span><span class="o">.</span><span class="n">numer</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">coeffs</span><span class="p">),</span>
                                         <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span><span class="p">))</span>
                    <span class="n">coeffs</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">denominator</span><span class="p">))()</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">denominator</span><span class="p">):</span>
                        <span class="n">coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">coeff</span><span class="o">.</span><span class="n">denom</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">coeffs</span><span class="p">),</span>
                                         <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blockette</span><span class="p">,</span> <span class="n">ResponseListResponseStage</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ResponseListResponseStage not yet implemented due to &quot;</span>
                       <span class="s2">&quot;missing example data. Please contact the developers &quot;</span>
                       <span class="s2">&quot;with a test data set (waveforms and StationXML &quot;</span>
                       <span class="s2">&quot;metadata).&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blockette</span><span class="p">,</span> <span class="n">FIRResponseStage</span><span class="p">):</span>
                <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">symmetry</span> <span class="o">==</span> <span class="s2">&quot;NONE&quot;</span><span class="p">:</span>
                    <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;FIR_ASYM&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">symmetry</span> <span class="o">==</span> <span class="s2">&quot;ODD&quot;</span><span class="p">:</span>
                    <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;FIR_SYM_1&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">symmetry</span> <span class="o">==</span> <span class="s2">&quot;EVEN&quot;</span><span class="p">:</span>
                    <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;FIR_SYM_2&quot;</span><span class="p">]</span>

                <span class="c1"># The blockette is a fir blockette</span>
                <span class="n">fir</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">fir</span>
                <span class="n">fir</span><span class="o">.</span><span class="n">h0</span> <span class="o">=</span> <span class="mf">1.0</span>
                <span class="n">fir</span><span class="o">.</span><span class="n">ncoeffs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">coefficients</span><span class="p">)</span>

                <span class="c1"># XXX: Find a better way to do this.</span>
                <span class="n">coeffs</span> <span class="o">=</span> <span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">coefficients</span><span class="p">))()</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">blockette</span><span class="o">.</span><span class="n">coefficients</span><span class="p">):</span>
                    <span class="n">coeffs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="n">fir</span><span class="o">.</span><span class="n">coeffs</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">coeffs</span><span class="p">),</span>
                                    <span class="n">C</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">c_double</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">blockette</span><span class="p">,</span> <span class="n">PolynomialResponseStage</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;PolynomialResponseStage not yet implemented. &quot;</span>
                       <span class="s2">&quot;Please contact the developers.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Otherwise it could be a gain only stage.</span>
                <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                        <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">blkt</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Type: </span><span class="si">%s</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">blockette</span><span class="p">))</span>
                    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">blkt</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stage_blkts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blkt</span><span class="p">)</span>

            <span class="c1"># Parse the decimation if is given.</span>
            <span class="n">decimation_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span>
                <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_correction</span><span class="p">,</span>
                <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_delay</span><span class="p">,</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_factor</span><span class="p">,</span>
                <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span><span class="p">,</span>
                <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_offset</span><span class="p">])</span>
            <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">decimation_values</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">decimation_values</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;If a decimation is given, all values must &quot;</span>
                           <span class="s2">&quot;be specified.&quot;</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>
                <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;DECIMATION&quot;</span><span class="p">]</span>
                <span class="n">decimation_blkt</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">decimation</span>

                <span class="c1"># Evalresp does the same!</span>
                <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">sample_int</span> <span class="o">=</span> <span class="mf">0.0</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">sample_int</span> <span class="o">=</span> \
                        <span class="mf">1.0</span> <span class="o">/</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span>

                <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">deci_fact</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_factor</span>
                <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">deci_offset</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_offset</span>
                <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">estim_delay</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_delay</span>
                <span class="n">decimation_blkt</span><span class="o">.</span><span class="n">applied_corr</span> <span class="o">=</span> \
                    <span class="n">blockette</span><span class="o">.</span><span class="n">decimation_correction</span>
                <span class="n">stage_blkts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blkt</span><span class="p">)</span>

            <span class="c1"># Add the gain if it is available.</span>
            <span class="k">if</span> <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> \
                    <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain_frequency</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>
                <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;GAIN&quot;</span><span class="p">]</span>
                <span class="n">gain_blkt</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">gain</span>
                <span class="n">gain_blkt</span><span class="o">.</span><span class="n">gain</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain</span>
                <span class="n">gain_blkt</span><span class="o">.</span><span class="n">gain_freq</span> <span class="o">=</span> <span class="n">blockette</span><span class="o">.</span><span class="n">stage_gain_frequency</span>
                <span class="n">stage_blkts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blkt</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">stage_blkts</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one blockette is needed for the stage.&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

            <span class="c1"># Attach the blockette chain to the stage.</span>
            <span class="n">st</span><span class="o">.</span><span class="n">first_blkt</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">stage_blkts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">stage_blkts</span><span class="p">)):</span>
                <span class="n">stage_blkts</span><span class="p">[</span><span class="n">_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">next_blkt</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">stage_blkts</span><span class="p">[</span><span class="n">_i</span><span class="p">])</span>

            <span class="n">stage_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>

        <span class="c1"># Attach the instrument sensitivity as stage 0 at the end.</span>
        <span class="n">st</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Stage</span><span class="p">()</span>
        <span class="n">st</span><span class="o">.</span><span class="n">sequence_no</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">st</span><span class="o">.</span><span class="n">input_units</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">st</span><span class="o">.</span><span class="n">output_units</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">blkt</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Blkt</span><span class="p">()</span>
        <span class="n">blkt</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_FILT_TYPES</span><span class="p">[</span><span class="s2">&quot;GAIN&quot;</span><span class="p">]</span>
        <span class="n">gain_blkt</span> <span class="o">=</span> <span class="n">blkt</span><span class="o">.</span><span class="n">blkt_info</span><span class="o">.</span><span class="n">gain</span>
        <span class="n">gain_blkt</span><span class="o">.</span><span class="n">gain</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span>
        <span class="n">gain_blkt</span><span class="o">.</span><span class="n">gain_freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">frequency</span>
        <span class="n">st</span><span class="o">.</span><span class="n">first_blkt</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">blkt</span><span class="p">)</span>
        <span class="n">stage_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>

        <span class="n">chan</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">Channel</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">stage_objects</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;At least one stage is needed.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="c1"># Attach the stage chain to the channel.</span>
        <span class="n">chan</span><span class="o">.</span><span class="n">first_stage</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">stage_objects</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">stage_objects</span><span class="p">)):</span>
            <span class="n">stage_objects</span><span class="p">[</span><span class="n">_i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">next_stage</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">stage_objects</span><span class="p">[</span><span class="n">_i</span><span class="p">])</span>

        <span class="n">chan</span><span class="o">.</span><span class="n">nstages</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">stage_objects</span><span class="p">)</span>

        <span class="c1"># Evalresp will take care of setting it to the overall sensitivity.</span>
        <span class="n">chan</span><span class="o">.</span><span class="n">sensit</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">chan</span><span class="o">.</span><span class="n">sensfreq</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">fy</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="n">t_samp</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="c1"># start at zero to get zero for offset/ DC of fft</span>
        <span class="n">freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">fy</span><span class="p">,</span> <span class="n">nfft</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">freqs</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">complex128</span><span class="p">)</span>
        <span class="n">out_units</span> <span class="o">=</span> <span class="n">C</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">(</span><span class="n">out_units</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;strict&#39;</span><span class="p">))</span>

        <span class="c1"># Set global variables</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="p">:</span>
            <span class="n">clibevresp</span><span class="o">.</span><span class="n">curr_file</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">clibevresp</span><span class="o">.</span><span class="n">curr_file</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">rc</span> <span class="o">=</span> <span class="n">clibevresp</span><span class="o">.</span><span class="n">_obspy_check_channel</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">chan</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">rc</span><span class="p">:</span>
                <span class="n">e</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_ERROR_CODES</span><span class="p">[</span><span class="n">rc</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">e</span><span class="p">(</span><span class="s1">&#39;check_channel: &#39;</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span>

            <span class="n">rc</span> <span class="o">=</span> <span class="n">clibevresp</span><span class="o">.</span><span class="n">_obspy_norm_resp</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">chan</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rc</span><span class="p">:</span>
                <span class="n">e</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_ERROR_CODES</span><span class="p">[</span><span class="n">rc</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">e</span><span class="p">(</span><span class="s1">&#39;norm_resp: &#39;</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span>

            <span class="n">rc</span> <span class="o">=</span> <span class="n">clibevresp</span><span class="o">.</span><span class="n">_obspy_calc_resp</span><span class="p">(</span><span class="n">C</span><span class="o">.</span><span class="n">byref</span><span class="p">(</span><span class="n">chan</span><span class="p">),</span> <span class="n">freqs</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">freqs</span><span class="p">),</span>
                                             <span class="n">output</span><span class="p">,</span> <span class="n">out_units</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">rc</span><span class="p">:</span>
                <span class="n">e</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">ew</span><span class="o">.</span><span class="n">ENUM_ERROR_CODES</span><span class="p">[</span><span class="n">rc</span><span class="p">]</span>
                <span class="k">raise</span> <span class="n">e</span><span class="p">(</span><span class="s1">&#39;calc_resp: &#39;</span> <span class="o">+</span> <span class="n">m</span><span class="p">)</span>

            <span class="c1"># XXX: Check if this is really not needed.</span>
            <span class="c1"># output *= scale_factor[0]</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">clibevresp</span><span class="o">.</span><span class="n">curr_file</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">freqs</span></div>

<div class="viewcode-block" id="Response.__str__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.__str__.html#obspy.core.inventory.response.Response.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">i_s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span>
        <span class="k">if</span> <span class="n">i_s</span><span class="p">:</span>
            <span class="n">input_units</span> <span class="o">=</span> <span class="n">i_s</span><span class="o">.</span><span class="n">input_units</span> \
                <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">input_units</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">input_units_description</span> <span class="o">=</span> <span class="n">i_s</span><span class="o">.</span><span class="n">input_units_description</span> \
                <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">input_units_description</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">output_units</span> <span class="o">=</span> <span class="n">i_s</span><span class="o">.</span><span class="n">output_units</span> \
                <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">output_units</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">output_units_description</span> <span class="o">=</span> <span class="n">i_s</span><span class="o">.</span><span class="n">output_units_description</span> \
                <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">output_units_description</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">sensitivity</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i_s</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i_s</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span> <span class="k">if</span> <span class="n">i_s</span><span class="o">.</span><span class="n">frequency</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">input_units</span> <span class="o">=</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">input_units_description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">output_units</span> <span class="o">=</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">output_units_description</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">sensitivity</span> <span class="o">=</span> <span class="s2">&quot;UNKNOWN&quot;</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="s2">&quot;UNKNOWN&quot;</span>

        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Channel Response</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">From </span><span class="si">{input_units}</span><span class="s2"> (</span><span class="si">{input_units_description}</span><span class="s2">) to &quot;</span>
            <span class="s2">&quot;</span><span class="si">{output_units}</span><span class="s2"> (</span><span class="si">{output_units_description}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Overall Sensitivity: </span><span class="si">{sensitivity}</span><span class="s2"> defined at </span><span class="si">{freq}</span><span class="s2"> Hz</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="s2">&quot;</span><span class="se">\t</span><span class="si">{stages}</span><span class="s2"> stages:</span><span class="se">\n</span><span class="si">{stage_desc}</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">input_units</span><span class="o">=</span><span class="n">input_units</span><span class="p">,</span>
            <span class="n">input_units_description</span><span class="o">=</span><span class="n">input_units_description</span><span class="p">,</span>
            <span class="n">output_units</span><span class="o">=</span><span class="n">output_units</span><span class="p">,</span>
            <span class="n">output_units_description</span><span class="o">=</span><span class="n">output_units_description</span><span class="p">,</span>
            <span class="n">sensitivity</span><span class="o">=</span><span class="n">sensitivity</span><span class="p">,</span>
            <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span>
            <span class="n">stages</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span><span class="p">),</span>
            <span class="n">stage_desc</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">Stage </span><span class="si">%i</span><span class="s2">: </span><span class="si">%s</span><span class="s2"> from </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">,&quot;</span>
                 <span class="s2">&quot; gain: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                     <span class="n">i</span><span class="o">.</span><span class="n">stage_sequence_number</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                     <span class="n">i</span><span class="o">.</span><span class="n">input_units</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">output_units</span><span class="p">,</span>
                     <span class="p">(</span><span class="s2">&quot;</span><span class="si">%g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="o">.</span><span class="n">stage_gain</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">stage_gain</span> <span class="k">else</span> <span class="s2">&quot;UNKNOWN&quot;</span><span class="p">)</span>
                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="Response._repr_pretty_"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response._repr_pretty_.html#obspy.core.inventory.response.Response._repr_pretty_">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_pretty_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">cycle</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div>

<div class="viewcode-block" id="Response.plot"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.plot.html#obspy.core.inventory.response.Response.plot">[docs]</a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_freq</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="s2">&quot;VEL&quot;</span><span class="p">,</span> <span class="n">start_stage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">end_stage</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
             <span class="n">unwrap_phase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show bode plot of instrument response.</span>

<span class="sd">        :type min_freq: float</span>
<span class="sd">        :param min_freq: Lowest frequency to plot.</span>
<span class="sd">        :type output: str</span>
<span class="sd">        :param output: Output units. One of:</span>

<span class="sd">                ``&quot;DISP&quot;``</span>
<span class="sd">                    displacement</span>
<span class="sd">                ``&quot;VEL&quot;``</span>
<span class="sd">                    velocity</span>
<span class="sd">                ``&quot;ACC&quot;``</span>
<span class="sd">                    acceleration</span>

<span class="sd">        :type start_stage: int, optional</span>
<span class="sd">        :param start_stage: Stage sequence number of first stage that will be</span>
<span class="sd">            used (disregarding all earlier stages).</span>
<span class="sd">        :type end_stage: int, optional</span>
<span class="sd">        :param end_stage: Stage sequence number of last stage that will be</span>
<span class="sd">            used (disregarding all later stages).</span>
<span class="sd">        :type label: str</span>
<span class="sd">        :param label: Label string for legend.</span>
<span class="sd">        :type axes: list of 2 :class:`matplotlib.axes.Axes`</span>
<span class="sd">        :param axes: List/tuple of two axes instances to plot the</span>
<span class="sd">            amplitude/phase spectrum into. If not specified, a new figure is</span>
<span class="sd">            opened.</span>
<span class="sd">        :type sampling_rate: float</span>
<span class="sd">        :param sampling_rate: Manually specify sampling rate of time series.</span>
<span class="sd">            If not given it is attempted to determine it from the information</span>
<span class="sd">            in the individual response stages.  Does not influence the spectra</span>
<span class="sd">            calculation, if it is not known, just provide the highest frequency</span>
<span class="sd">            that should be plotted times two.</span>
<span class="sd">        :type unwrap_phase: bool</span>
<span class="sd">        :param unwrap_phase: Set optional phase unwrapping using NumPy.</span>
<span class="sd">        :type show: bool</span>
<span class="sd">        :param show: Whether to show the figure after plotting or not. Can be</span>
<span class="sd">            used to do further customization of the plot before showing it.</span>
<span class="sd">        :type outfile: str</span>
<span class="sd">        :param outfile: Output file path to directly save the resulting image</span>
<span class="sd">            (e.g. ``&quot;/tmp/image.png&quot;``). Overrides the ``show`` option, image</span>
<span class="sd">            will not be displayed interactively. The given path/filename is</span>
<span class="sd">            also used to automatically determine the output format. Supported</span>
<span class="sd">            file formats depend on your matplotlib backend.  Most backends</span>
<span class="sd">            support png, pdf, ps, eps and svg. Defaults to ``None``.</span>

<span class="sd">        .. rubric:: Basic Usage</span>

<span class="sd">        &gt;&gt;&gt; from obspy import read_inventory</span>
<span class="sd">        &gt;&gt;&gt; resp = read_inventory()[0][0][0].response</span>
<span class="sd">        &gt;&gt;&gt; resp.plot(0.001, output=&quot;VEL&quot;)  # doctest: +SKIP</span>

<span class="sd">        .. plot::</span>

<span class="sd">            from obspy import read_inventory</span>
<span class="sd">            resp = read_inventory()[0][0][0].response</span>
<span class="sd">            resp.plot(0.001, output=&quot;VEL&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
        <span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="k">import</span> <span class="n">blended_transform_factory</span>

        <span class="c1"># detect sampling rate from response stages</span>
        <span class="k">if</span> <span class="n">sampling_rate</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                        <span class="n">stage</span><span class="o">.</span><span class="n">decimation_factor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">sampling_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">stage</span><span class="o">.</span><span class="n">decimation_input_sample_rate</span> <span class="o">/</span>
                                     <span class="n">stage</span><span class="o">.</span><span class="n">decimation_factor</span><span class="p">)</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Failed to autodetect sampling rate of channel from &quot;</span>
                       <span class="s2">&quot;response stages. Please manually specify parameter &quot;</span>
                       <span class="s2">&quot;`sampling_rate`&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sampling_rate</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Can not plot response for channel with sampling rate `0`.&quot;</span>
            <span class="k">raise</span> <span class="n">ZeroSamplingRate</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">t_samp</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">sampling_rate</span>
        <span class="n">nyquist</span> <span class="o">=</span> <span class="n">sampling_rate</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">nfft</span> <span class="o">=</span> <span class="n">sampling_rate</span> <span class="o">/</span> <span class="n">min_freq</span>

        <span class="n">cpx_response</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_evalresp_response</span><span class="p">(</span>
            <span class="n">t_samp</span><span class="o">=</span><span class="n">t_samp</span><span class="p">,</span> <span class="n">nfft</span><span class="o">=</span><span class="n">nfft</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">start_stage</span><span class="o">=</span><span class="n">start_stage</span><span class="p">,</span>
            <span class="n">end_stage</span><span class="o">=</span><span class="n">end_stage</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">axes</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">figure</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
            <span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
            <span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

        <span class="n">label_kwarg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">label_kwarg</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>

        <span class="c1"># plot amplitude response</span>
        <span class="n">lw</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">cpx_response</span><span class="p">),</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">,</span> <span class="o">**</span><span class="n">label_kwarg</span><span class="p">)</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="p">:</span>
            <span class="n">trans_above</span> <span class="o">=</span> <span class="n">blended_transform_factory</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span>
                                                    <span class="n">ax1</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
            <span class="n">trans_right</span> <span class="o">=</span> <span class="n">blended_transform_factory</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span>
                                                    <span class="n">ax1</span><span class="o">.</span><span class="n">transData</span><span class="p">)</span>
            <span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
                <span class="n">arrowstyle</span><span class="o">=</span><span class="s2">&quot;wedge,tail_width=1.4,shrink_factor=0.8&quot;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="n">bbox</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span><span class="o">=</span><span class="s2">&quot;round&quot;</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">frequency</span><span class="p">:</span>
                <span class="n">ax1</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%.1g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span>
                             <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>
                             <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span>
                                     <span class="mf">1.1</span><span class="p">),</span>
                             <span class="n">xycoords</span><span class="o">=</span><span class="n">trans_above</span><span class="p">,</span> <span class="n">textcoords</span><span class="o">=</span><span class="n">trans_above</span><span class="p">,</span>
                             <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span>
                             <span class="n">arrowprops</span><span class="o">=</span><span class="n">arrowprops</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="n">ax1</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%.1e</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                             <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                             <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                             <span class="n">xycoords</span><span class="o">=</span><span class="n">trans_right</span><span class="p">,</span> <span class="n">textcoords</span><span class="o">=</span><span class="n">trans_right</span><span class="p">,</span>
                             <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
                             <span class="n">arrowprops</span><span class="o">=</span><span class="n">arrowprops</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">)</span>

        <span class="c1"># plot phase response</span>
        <span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">cpx_response</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">unwrap_phase</span><span class="p">:</span>
            <span class="n">phase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">phase</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>

        <span class="c1"># plot nyquist frequency</span>
        <span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">nyquist</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="n">lw</span><span class="p">)</span>

        <span class="c1"># only do adjustments if we initialized the figure in here</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">axes</span><span class="p">:</span>
            <span class="n">_adjust_bode_plot_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">outfile</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">fig</span></div>

<div class="viewcode-block" id="Response.get_paz"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.get_paz.html#obspy.core.inventory.response.Response.get_paz">[docs]</a>    <span class="k">def</span> <span class="nf">get_paz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get Poles and Zeros stage.</span>

<span class="sd">        Prints a warning if more than one poles and zeros stage is found.</span>
<span class="sd">        Raises if no poles and zeros stage is found.</span>

<span class="sd">        :rtype: :class:`PolesZerosResponseStage`</span>
<span class="sd">        :returns: Poles and Zeros response stage.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">paz</span> <span class="o">=</span> <span class="p">[</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">stage</span><span class="p">)</span> <span class="k">for</span> <span class="n">stage</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_stages</span>
               <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">PolesZerosResponseStage</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">paz</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;No PolesZerosResponseStage found.&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">paz</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;More than one PolesZerosResponseStage encountered. &quot;</span>
                   <span class="s2">&quot;Returning first one found.&quot;</span><span class="p">)</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">paz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Response.get_sacpz"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.Response.get_sacpz.html#obspy.core.inventory.response.Response.get_sacpz">[docs]</a>    <span class="k">def</span> <span class="nf">get_sacpz</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns SACPZ ASCII text representation of Response.</span>

<span class="sd">        :rtype: str</span>
<span class="sd">        :returns: Textual SACPZ representation of response.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># extract paz</span>
        <span class="n">paz</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paz</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">paz_to_sacpz_string</span><span class="p">(</span><span class="n">paz</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instrument_sensitivity</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="paz_to_sacpz_string"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.paz_to_sacpz_string.html#obspy.core.inventory.response.paz_to_sacpz_string">[docs]</a><span class="k">def</span> <span class="nf">paz_to_sacpz_string</span><span class="p">(</span><span class="n">paz</span><span class="p">,</span> <span class="n">instrument_sensitivity</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns SACPZ ASCII text representation of Response.</span>

<span class="sd">    :type paz: :class:`PolesZerosResponseStage`</span>
<span class="sd">    :param paz: Poles and Zeros response information</span>
<span class="sd">    :type instrument_sensitivity: :class:`InstrumentSensitivity`</span>
<span class="sd">    :param paz: Overall instrument sensitivity of response</span>
<span class="sd">    :rtype: str</span>
<span class="sd">    :returns: Textual SACPZ representation of poles and zeros response stage.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># assemble output string</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ZEROS </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">paz</span><span class="o">.</span><span class="n">zeros</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">paz</span><span class="o">.</span><span class="n">zeros</span><span class="p">:</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; </span><span class="si">%+.6e</span><span class="s2"> </span><span class="si">%+.6e</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span><span class="p">))</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;POLES </span><span class="si">%i</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">paz</span><span class="o">.</span><span class="n">poles</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">paz</span><span class="o">.</span><span class="n">poles</span><span class="p">:</span>
        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; </span><span class="si">%+.6e</span><span class="s2"> </span><span class="si">%+.6e</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">imag</span><span class="p">))</span>
    <span class="n">constant</span> <span class="o">=</span> <span class="n">paz</span><span class="o">.</span><span class="n">normalization_factor</span> <span class="o">*</span> <span class="n">instrument_sensitivity</span><span class="o">.</span><span class="n">value</span>
    <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;CONSTANT </span><span class="si">%.6e</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">constant</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">)</span></div>


<div class="viewcode-block" id="InstrumentSensitivity"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentSensitivity.html#obspy.core.inventory.response.InstrumentSensitivity">[docs]</a><span class="k">class</span> <span class="nc">InstrumentSensitivity</span><span class="p">(</span><span class="n">ComparingObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        The total sensitivity for a channel, representing the complete</span>
<span class="sd">        acquisition system expressed as a scalar. Equivalent to SEED stage 0</span>
<span class="sd">        gain with (blockette 58) with the ability to specify a frequency range.</span>

<span class="sd">    Sensitivity and frequency ranges. The FrequencyRangeGroup is an optional</span>
<span class="sd">    construct that defines a pass band in Hertz (FrequencyStart and</span>
<span class="sd">    FrequencyEnd) in which the SensitivityValue is valid within the number of</span>
<span class="sd">    decibels specified in FrequencyDBVariation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="InstrumentSensitivity.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentSensitivity.__init__.html#obspy.core.inventory.response.InstrumentSensitivity.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span>
                 <span class="n">output_units</span><span class="p">,</span> <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency_range_start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">frequency_range_end</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">frequency_range_db_variation</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :param value: Complex type for sensitivity and frequency ranges.</span>
<span class="sd">            This complex type can be used to represent both overall</span>
<span class="sd">            sensitivities and individual stage gains. The FrequencyRangeGroup</span>
<span class="sd">            is an optional construct that defines a pass band in Hertz (</span>
<span class="sd">            FrequencyStart and FrequencyEnd) in which the SensitivityValue is</span>
<span class="sd">            valid within the number of decibels specified in</span>
<span class="sd">            FrequencyDBVariation.</span>
<span class="sd">        :type frequency: float</span>
<span class="sd">        :param frequency: Complex type for sensitivity and frequency</span>
<span class="sd">            ranges.  This complex type can be used to represent both overall</span>
<span class="sd">            sensitivities and individual stage gains. The FrequencyRangeGroup</span>
<span class="sd">            is an optional construct that defines a pass band in Hertz (</span>
<span class="sd">            FrequencyStart and FrequencyEnd) in which the SensitivityValue is</span>
<span class="sd">            valid within the number of decibels specified in</span>
<span class="sd">            FrequencyDBVariation.</span>
<span class="sd">        :param input_units: string</span>
<span class="sd">        :param input_units: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :param input_units_description: string, optional</span>
<span class="sd">        :param input_units_description: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :param output_units: string</span>
<span class="sd">        :param output_units: The units of the data as output from the</span>
<span class="sd">            perspective of data acquisition. These would be the units of the</span>
<span class="sd">            data prior to correcting for this response.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :type output_units_description: str, optional</span>
<span class="sd">        :param output_units_description: The units of the data as output from</span>
<span class="sd">            the perspective of data acquisition. These would be the units of</span>
<span class="sd">            the data prior to correcting for this response.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :type frequency_range_start: float, optional</span>
<span class="sd">        :param frequency_range_start: Start of the frequency range for which</span>
<span class="sd">            the SensitivityValue is valid within the dB variation specified.</span>
<span class="sd">        :type frequency_range_end: float, optional</span>
<span class="sd">        :param frequency_range_end: End of the frequency range for which the</span>
<span class="sd">            SensitivityValue is valid within the dB variation specified.</span>
<span class="sd">        :type frequency_range_db_variation: float, optional</span>
<span class="sd">        :param frequency_range_db_variation: Variation in decibels within the</span>
<span class="sd">            specified range.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="n">frequency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units</span> <span class="o">=</span> <span class="n">input_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units_description</span> <span class="o">=</span> <span class="n">input_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units</span> <span class="o">=</span> <span class="n">output_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units_description</span> <span class="o">=</span> <span class="n">output_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_range_start</span> <span class="o">=</span> <span class="n">frequency_range_start</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_range_end</span> <span class="o">=</span> <span class="n">frequency_range_end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_range_db_variation</span> <span class="o">=</span> <span class="n">frequency_range_db_variation</span></div>

<div class="viewcode-block" id="InstrumentSensitivity.__str__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentSensitivity.__str__.html#obspy.core.inventory.response.InstrumentSensitivity.__str__">[docs]</a>    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Instrument Sensitivity:</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Value: </span><span class="si">{value}</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Frequency: </span><span class="si">{frequency}</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Input units: </span><span class="si">{input_units}</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Input units description: </span><span class="si">{input_units_description}</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Output units: </span><span class="si">{output_units}</span><span class="se">\n</span><span class="s2">&quot;</span>
               <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">Output units description: </span><span class="si">{output_units_description}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="InstrumentSensitivity._repr_pretty_"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentSensitivity._repr_pretty_.html#obspy.core.inventory.response.InstrumentSensitivity._repr_pretty_">[docs]</a>    <span class="k">def</span> <span class="nf">_repr_pretty_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">cycle</span><span class="p">):</span>
        <span class="n">p</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span></div></div>


<span class="c1"># XXX duplicated code, PolynomialResponseStage could probably be implemented by</span>
<span class="c1"># XXX inheriting from both InstrumentPolynomial and ResponseStage</span>
<div class="viewcode-block" id="InstrumentPolynomial"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentPolynomial.html#obspy.core.inventory.response.InstrumentPolynomial">[docs]</a><span class="k">class</span> <span class="nc">InstrumentPolynomial</span><span class="p">(</span><span class="n">ComparingObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    From the StationXML Definition:</span>
<span class="sd">        The total sensitivity for a channel, representing the complete</span>
<span class="sd">        acquisition system expressed as a polynomial. Equivalent to SEED stage</span>
<span class="sd">        0 polynomial (blockette 62).</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="InstrumentPolynomial.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.InstrumentPolynomial.__init__.html#obspy.core.inventory.response.InstrumentPolynomial.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_units</span><span class="p">,</span> <span class="n">output_units</span><span class="p">,</span>
                 <span class="n">frequency_lower_bound</span><span class="p">,</span>
                 <span class="n">frequency_upper_bound</span><span class="p">,</span> <span class="n">approximation_lower_bound</span><span class="p">,</span>
                 <span class="n">approximation_upper_bound</span><span class="p">,</span> <span class="n">maximum_error</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span>
                 <span class="n">approximation_type</span><span class="o">=</span><span class="s1">&#39;MACLAURIN&#39;</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">input_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">output_units_description</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type approximation_type: str</span>
<span class="sd">        :param approximation_type: Approximation type. Currently restricted to</span>
<span class="sd">            &#39;MACLAURIN&#39; by StationXML definition.</span>
<span class="sd">        :type frequency_lower_bound: float</span>
<span class="sd">        :param frequency_lower_bound: Lower frequency bound.</span>
<span class="sd">        :type frequency_upper_bound: float</span>
<span class="sd">        :param frequency_upper_bound: Upper frequency bound.</span>
<span class="sd">        :type approximation_lower_bound: float</span>
<span class="sd">        :param approximation_lower_bound: Lower bound of approximation.</span>
<span class="sd">        :type approximation_upper_bound: float</span>
<span class="sd">        :param approximation_upper_bound: Upper bound of approximation.</span>
<span class="sd">        :type maximum_error: float</span>
<span class="sd">        :param maximum_error: Maximum error.</span>
<span class="sd">        :type coefficients: list of floats</span>
<span class="sd">        :param coefficients: List of polynomial coefficients.</span>
<span class="sd">        :param input_units: string</span>
<span class="sd">        :param input_units: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :param output_units: string</span>
<span class="sd">        :param output_units: The units of the data as output from the</span>
<span class="sd">            perspective of data acquisition. These would be the units of the</span>
<span class="sd">            data prior to correcting for this response.</span>
<span class="sd">            Name of units, e.g. &quot;M/S&quot;, &quot;V&quot;, &quot;PA&quot;.</span>
<span class="sd">        :type resource_id: str</span>
<span class="sd">        :param resource_id: This field contains a string that should serve as a</span>
<span class="sd">            unique resource identifier. This identifier can be interpreted</span>
<span class="sd">            differently depending on the data center/software that generated</span>
<span class="sd">            the document. Also, we recommend to use something like</span>
<span class="sd">            GENERATOR:Meaningful ID. As a common behavior equipment with the</span>
<span class="sd">            same ID should contains the same information/be derived from the</span>
<span class="sd">            same base instruments.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param name: A name given to the filter stage.</span>
<span class="sd">        :param input_units_description: string, optional</span>
<span class="sd">        :param input_units_description: The units of the data as input from the</span>
<span class="sd">            perspective of data acquisition. After correcting data for this</span>
<span class="sd">            response, these would be the resulting units.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :type output_units_description: str, optional</span>
<span class="sd">        :param output_units_description: The units of the data as output from</span>
<span class="sd">            the perspective of data acquisition. These would be the units of</span>
<span class="sd">            the data prior to correcting for this response.</span>
<span class="sd">            Description of units, e.g. &quot;Velocity in meters per second&quot;,</span>
<span class="sd">            &quot;Volts&quot;, &quot;Pascals&quot;.</span>
<span class="sd">        :type description: str, optional</span>
<span class="sd">        :param description: A short description of of the filter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units</span> <span class="o">=</span> <span class="n">input_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units</span> <span class="o">=</span> <span class="n">output_units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_units_description</span> <span class="o">=</span> <span class="n">input_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_units_description</span> <span class="o">=</span> <span class="n">output_units_description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_id</span> <span class="o">=</span> <span class="n">resource_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span> <span class="o">=</span> <span class="n">approximation_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_lower_bound</span> <span class="o">=</span> <span class="n">frequency_lower_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frequency_upper_bound</span> <span class="o">=</span> <span class="n">frequency_upper_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approximation_lower_bound</span> <span class="o">=</span> <span class="n">approximation_lower_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">approximation_upper_bound</span> <span class="o">=</span> <span class="n">approximation_upper_bound</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maximum_error</span> <span class="o">=</span> <span class="n">maximum_error</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">coefficients</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">approximation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span>

    <span class="nd">@approximation_type</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">approximation_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;MACLAURIN&quot;</span><span class="p">,)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Value &#39;</span><span class="si">%s</span><span class="s2">&#39; for polynomial response approximation type not &quot;</span>
                   <span class="s2">&quot;allowed. Possible values are: &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_approximation_type</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="FilterCoefficient"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.FilterCoefficient.html#obspy.core.inventory.response.FilterCoefficient">[docs]</a><span class="k">class</span> <span class="nc">FilterCoefficient</span><span class="p">(</span><span class="n">CustomFloat</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A filter coefficient.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="FilterCoefficient.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.FilterCoefficient.__init__.html#obspy.core.inventory.response.FilterCoefficient.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :param value: The actual value of the coefficient</span>
<span class="sd">        :type number: int, optional</span>
<span class="sd">        :param number: Number to indicate the position of the coefficient.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FilterCoefficient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>

    <span class="nd">@number</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="CoefficientWithUncertainties"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientWithUncertainties.html#obspy.core.inventory.response.CoefficientWithUncertainties">[docs]</a><span class="k">class</span> <span class="nc">CoefficientWithUncertainties</span><span class="p">(</span><span class="n">FloatWithUncertainties</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A coefficient with optional uncertainties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="CoefficientWithUncertainties.__init__"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response.CoefficientWithUncertainties.__init__.html#obspy.core.inventory.response.CoefficientWithUncertainties.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lower_uncertainty</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">upper_uncertainty</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :type value: float</span>
<span class="sd">        :param value: The actual value of the coefficient</span>
<span class="sd">        :type number: int, optional</span>
<span class="sd">        :param number: Number to indicate the position of the coefficient.</span>
<span class="sd">        :type lower_uncertainty: float</span>
<span class="sd">        :param lower_uncertainty: Lower uncertainty (aka minusError)</span>
<span class="sd">        :type upper_uncertainty: float</span>
<span class="sd">        :param upper_uncertainty: Upper uncertainty (aka plusError)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CoefficientWithUncertainties</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="n">lower_uncertainty</span><span class="o">=</span><span class="n">lower_uncertainty</span><span class="p">,</span>
            <span class="n">upper_uncertainty</span><span class="o">=</span><span class="n">upper_uncertainty</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="n">number</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_number</span>

    <span class="nd">@number</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_number</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="_adjust_bode_plot_figure"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response._adjust_bode_plot_figure.html#obspy.core.inventory.response._adjust_bode_plot_figure">[docs]</a><span class="k">def</span> <span class="nf">_adjust_bode_plot_figure</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function to do final adjustments to Bode plot figure.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
    <span class="c1"># make more room in between subplots for the ylabel of right plot</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.87</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.82</span><span class="p">)</span>
    <span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="c1"># workaround for older matplotlib versions</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower center&quot;</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s1">&#39;small&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="n">leg_</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower center&quot;</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">leg_</span><span class="o">.</span><span class="n">prop</span><span class="o">.</span><span class="n">set_size</span><span class="p">(</span><span class="s2">&quot;small&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax1</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax2</span><span class="o">.</span><span class="n">get_yticklabels</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">visible</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Amplitude&#39;</span><span class="p">)</span>
    <span class="n">minmax1</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="n">minmax1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">ax1</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency [Hz]&#39;</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Phase [rad]&#39;</span><span class="p">)</span>
    <span class="n">minmax2</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_data_interval</span><span class="p">()</span>
    <span class="n">yticks2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">minmax2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">minmax2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                        <span class="n">minmax2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">minmax2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">pi</span><span class="p">,</span> <span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks2</span><span class="p">)</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">_pitick2latex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">yticks2</span><span class="p">])</span>
    <span class="n">ax2</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>


<div class="viewcode-block" id="_pitick2latex"><a class="viewcode-back" href="../../../../packages/autogen/obspy.core.inventory.response._pitick2latex.html#obspy.core.inventory.response._pitick2latex">[docs]</a><span class="k">def</span> <span class="nf">_pitick2latex</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function to convert a float that is a multiple of pi/2</span>
<span class="sd">    to a latex string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># safety check, if no multiple of pi/2 return normal representation</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="p">(</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%#.3g</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">x</span>
    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;$&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot;-&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">/</span> <span class="n">pi</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">pi</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;$0$&quot;</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">\pi$&quot;</span> <span class="o">%</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">x</span> <span class="o">/</span> <span class="n">pi</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">string</span> <span class="o">+=</span> <span class="sa">r</span><span class="s2">&quot;\frac{</span><span class="si">%s</span><span class="s2">\pi}</span><span class="si">{2}</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">string</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">(</span><span class="n">exclude_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>