<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>obspy.clients.base &#8212; ObsPy Documentation (1.0.3)</title>
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/font.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/base.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript">
  var shiftWindow = function() { scrollBy(0, -70) };
  if (location.hash) shiftWindow();
  window.addEventListener("hashchange", shiftWindow);
</script>

  </head>
  <body>
<div id="wrapper">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
<div class="container-fluid">
<div class="navbar-header">
<button data-target=".navbar-collapse" data-toggle="collapse" class="navbar-toggle" type="button">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a href="/" class="navbar-brand" title="Home"><span class="icon-obspy"></span>&nbsp;ObsPy</a>
</div>
<div class="navbar-collapse collapse">
<form class="navbar-form navbar-right" role="search" method="get" action="http://docs.obspy.org/search.html">
<div class="form-group">
<input type="text" class="form-control" placeholder="Search Docs" name="q">
</div>
</form>
<ul class="nav navbar-nav navbar-right">
<li><a href="https://github.com/obspy/obspy/" title="GitHub"><span class="icon-github iconx2"></span><span class="hidden-sm">&nbsp;GitHub</span></a></li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Documentation"><span class="glyphicon glyphicon-book iconx2"></span><span class="hidden-sm">&nbsp;Documentation</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Getting&nbsp;Started</li>
<li><a href="https://github.com/obspy/obspy/wiki#installation">Installation</a></li>
<li><a href="https://tutorial.obspy.org/">Tutorial</a></li>
<li><a href="http://gallery.obspy.org/">Gallery</a></li>
<li><a href="https://docs.obspy.org/">API&nbsp;Documentation&nbsp;(latest&nbsp;release)</a></li>
<li><a href="https://docs.obspy.org/master/">API&nbsp;Documentation&nbsp;(current&nbsp;master)</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Mailing&nbsp;Lists"><span class="glyphicon glyphicon-envelope iconx2"></span><span class="hidden-sm">&nbsp;Mailing&nbsp;Lists</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li class="dropdown-header">Announcements&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-announcements"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-announcements/"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archive</a></li>
<li class="divider"></li>
<li class="dropdown-header">Users&nbsp;Mailing&nbsp;List&nbsp;(public)</li>
<li><a href="http://lists.swapbytes.de/mailman/listinfo/obspy-users"><span class="glyphicon glyphicon-user"></span>&nbsp;Subscribe</a></li>
<li><a href="http://lists.swapbytes.de/archives/obspy-users"><span class="glyphicon glyphicon-inbox"></span>&nbsp;Archives</a></li>
<li><a href="mailto:users@obspy.org"><span class="glyphicon glyphicon-envelope"></span>&nbsp;Post&nbsp;a&nbsp;message</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" title="Developer&nbsp;Resources"><span class="glyphicon glyphicon-cog iconx2"></span><span class="hidden-sm">&nbsp;Developer&nbsp;Resources</span>&nbsp;<b class="caret"></b></a>
<ul class="dropdown-menu">
<li><a href="https://gitter.im/obspy/obspy">Gitter</a></li>
<li><a href="https://github.com/obspy/obspy/blob/master/.github/CONTRIBUTING.md">How&nbsp;to&nbsp;contribute</a></li>
<li><a href="http://docs.obspy.org/coding_style.html">Coding&nbsp;Style&nbsp;Guide</a></li>
<li><a href="https://github.com/obspy/obspy/releases/">All&nbsp;Releases</a></li>
<li class="divider"></li>
<li class="dropdown-header">Code&nbsp;Analysis</li>
<li><a href="http://docs.obspy.org/master/pep8/index.html">PEP8</a></li>
<li><a href="http://docs.obspy.org/master/coverage/index.html">Python&nbsp;Coverage</a></li>
<li><a href="http://docs.obspy.org/master/c_coverage/index.html">C&nbsp;Coverage</a></li>
<li><a href="https://coveralls.io/r/obspy/obspy?branch=master">Coveralls</a></li>
<li class="divider"></li>
<li class="dropdown-header">Continuous&nbsp;Integration</li>
<li><a href="http://tests.obspy.org/">Test&nbsp;Reports</a></li>
<li><a href="https://travis-ci.org/obspy/obspy/"><span class="icon-travis"></span>&nbsp;Travis&nbsp;CI</a></li>
<li><a href="https://ci.appveyor.com/project/obspy/obspy"><span class="icon-appveyor"></span>&nbsp;AppVeyor</a></li>
</ul>
</li>
</ul>
</div>
</div>
</nav>

<div id="content" class="container">
  
    <div class="breadcrumb pull-right"><a href="../../../genindex.html" title="General Index"
         accesskey="I">index</a><span style="color: #ccc; padding: 0 5px;">| </span><a href="../../../py-modindex.html" title="Python Module Index"
         >modules</a>
    </div>
    <ol class="breadcrumb">
        <li><a href="../../../contents.html">ObsPy Documentation (1.0.3)</a></li>
        <li><a href="../../index.html" accesskey="U">Module code</a></li> 
    </ol>
  
  <h1>Source code for obspy.clients.base</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Base classes for uniform Client interfaces.</span>

<span class="sd">:copyright:</span>
<span class="sd">    The ObsPy Development Team (devs@obspy.org)</span>
<span class="sd">:license:</span>
<span class="sd">    GNU Lesser General Public License, Version 3</span>
<span class="sd">    (https://www.gnu.org/copyleft/lesser.html)</span>


<span class="sd">This module defines common interfaces for ObsPy client classes, using Abstract</span>
<span class="sd">Base Classes.  These common interfaces are a place to explicitly declare the</span>
<span class="sd">intent for any Client, regardless of its origin, and to return a Stream from</span>
<span class="sd">a get_waveforms method, a Catalog from a get_events method, and an Inventory</span>
<span class="sd">from a get_stations method. This encourages Client writers to connect their</span>
<span class="sd">data sources to Stream, Inventory, and Catalog types, and encourage users to</span>
<span class="sd">rely on them in their applications.  Four base classes are provided: one for</span>
<span class="sd">clients that return waveforms, one for those that return events, and one for</span>
<span class="sd">those that return stations.  Each inherits from a common base class, which</span>
<span class="sd">contains methods common to all.</span>

<span class="sd">Individual client classes inherit from one or more of WaveformClient,</span>
<span class="sd">EventClient, and StationClient, and re-program the get_waveforms, get_events,</span>
<span class="sd">and/or get_stations methods, like in the example below.</span>


<span class="sd">.. rubric:: Example</span>

<span class="sd">class MyNewClient(WaveformClient, StationClient):</span>
<span class="sd">    def __init__(self, url=None):</span>
<span class="sd">        self._version = &#39;1.0&#39;</span>
<span class="sd">        if url:</span>
<span class="sd">            self.conn = open(url)</span>

<span class="sd">    def get_service_version(self):</span>
<span class="sd">        self.conn.get_version()</span>

<span class="sd">    def get_waveforms(self, network, station, location, channel, starttime,</span>
<span class="sd">                      endtime):</span>
<span class="sd">        return self.conn.fetch_mseed(network, station, location, channel,</span>
<span class="sd">                                     starttime, endtime)</span>

<span class="sd">    def get_stations(self, network, station, location, channel, starttime,</span>
<span class="sd">                     endtime):</span>
<span class="sd">        return self.conn.fetch_inventory(network, station, location, channel,</span>
<span class="sd">                                         starttime, endtime)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">future.builtins</span> <span class="k">import</span> <span class="o">*</span>  <span class="c1"># NOQA @UnusedWildImport</span>
<span class="kn">from</span> <span class="nn">future.utils</span> <span class="k">import</span> <span class="n">PY2</span><span class="p">,</span> <span class="n">with_metaclass</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="k">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">platform</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">import</span> <span class="nn">obspy</span>


<span class="c1"># Default user agents all HTTP clients should utilize.</span>
<span class="k">if</span> <span class="n">PY2</span><span class="p">:</span>
    <span class="n">platform_</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span> <span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">encoding</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getdefaultencoding</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;UTF-8&quot;</span>
    <span class="n">platform_</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">,</span> <span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="c1"># The default User Agent that will be sent with every request.</span>
<span class="n">DEFAULT_USER_AGENT</span> <span class="o">=</span> <span class="s2">&quot;ObsPy/</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">, Python </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
    <span class="n">obspy</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span> <span class="n">platform_</span><span class="p">,</span> <span class="n">platform</span><span class="o">.</span><span class="n">python_version</span><span class="p">())</span>
<span class="c1"># The user agent tests should use by default.</span>
<span class="n">DEFAULT_TESTING_USER_AGENT</span> <span class="o">=</span> <span class="s2">&quot;ObsPy/</span><span class="si">%s</span><span class="s2"> (test suite) (</span><span class="si">%s</span><span class="s2">, Python </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
    <span class="n">obspy</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span> <span class="n">platform_</span><span class="p">,</span> <span class="n">platform</span><span class="o">.</span><span class="n">python_version</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">ClientException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base exception for Client classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">ClientHTTPException</span><span class="p">(</span><span class="n">ClientException</span><span class="p">,</span>
                          <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Exception that should be raised for all HTTP exceptions.</span>

<span class="sd">    Inherits from :class:`requests.exceptions.Request.Exception` so catching</span>
<span class="sd">    the main requests exception catches this one as well.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">BaseClient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for common methods.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span> <span class="o">=</span> <span class="n">debug</span>


<span class="k">class</span> <span class="nc">RemoteBaseClient</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">120</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Base class for all remote mixin classes.</span>

<span class="sd">        :param debug: Passed on to the :class:`BaseClient` constructor.</span>
<span class="sd">        :type debug: bool</span>
<span class="sd">        :param timeout: The network timeout in seconds.</span>
<span class="sd">        :type timeout: float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timeout</span> <span class="o">=</span> <span class="n">timeout</span>
        <span class="n">BaseClient</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_service_version</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a semantic version number of the remote service as a string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">HTTPClient</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">,</span> <span class="n">RemoteBaseClient</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mix-in class to add HTTP capabilities.</span>

<span class="sd">    :param debug: Passed on to the :class:`BaseClient` constructor.</span>
<span class="sd">    :type debug: bool</span>
<span class="sd">    :param timeout: Passed on to the :class:`RemoteBaseClient` constructor.</span>
<span class="sd">    :type timeout: float</span>

<span class="sd">    .. rubric:: Example</span>

<span class="sd">    from obspy.clients.base import (WaveformClient, HTTPClient,</span>
<span class="sd">                                    DEFAULT_USER_AGENT)</span>

<span class="sd">    class NewClient(WaveformClient, HTTPClient):</span>
<span class="sd">        def __init__(self, user_agent=DEFAULT_USER_AGENT, debug=False,</span>
<span class="sd">                     timeout=20):</span>
<span class="sd">            HTTPClient.__init__(self, user_agent=user_agent, debug=debug,</span>
<span class="sd">                                timeout=timeout)</span>

<span class="sd">        def _handle_requests_http_error(self, r):</span>
<span class="sd">            r.raise_for_status()</span>

<span class="sd">        def get_service_version(self):</span>
<span class="sd">            ...</span>

<span class="sd">        def get_waveforms(...):</span>
<span class="sd">            ...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span>
                 <span class="n">user_agent</span><span class="o">=</span><span class="n">DEFAULT_USER_AGENT</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_user_agent</span> <span class="o">=</span> <span class="n">user_agent</span>
        <span class="n">RemoteBaseClient</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">)</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_handle_requests_http_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Error handling for the HTTP errors.</span>

<span class="sd">        Method called when the _download() method downloads something with a</span>
<span class="sd">        status code different than 200.</span>

<span class="sd">        The error codes mean different things for different web services</span>
<span class="sd">        thus this needs to be implemented by every HTTPClient.</span>

<span class="sd">        :param r: The response object resulting in the error.</span>
<span class="sd">        :type r: :class:`requests.Response`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_download</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Download the URL with GET or POST and the chosen parameters.</span>

<span class="sd">        Will call the ``_handle_requests_http_error()`` method if the response</span>
<span class="sd">        comes back with an HTTP code other than 200. Returns the response</span>
<span class="sd">        object if successful and ``filename`` is not given - if given it will</span>
<span class="sd">        save the response to the specified file and return ``None``.</span>

<span class="sd">        By default it will send a GET request - if data is given it will</span>
<span class="sd">        send a POST request.</span>

<span class="sd">        :param url: The URL to download from.</span>
<span class="sd">        :type url: str</span>
<span class="sd">        :param params: Additional URL parameters.</span>
<span class="sd">        :type params: dict</span>
<span class="sd">        :param filename: String or file like object. Will download directly</span>
<span class="sd">            to the file. If specified, this function will return nothing.</span>
<span class="sd">        :type filename: str or file-like object</span>
<span class="sd">        :param data: If specified, a POST request will be sent with the data in</span>
<span class="sd">            the body of the request.</span>
<span class="sd">        :type data: dictionary, bytes, or file-like object</span>
<span class="sd">        :return: The response object assuming ``filename`` is ``None``.</span>
<span class="sd">        :rtype: :class:`requests.Response`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_request_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
                         <span class="s2">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_agent</span><span class="p">},</span>
                         <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="n">params</span><span class="p">}</span>

        <span class="c1"># Stream to file - no need to keep it in memory for large files.</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">_request_args</span><span class="p">[</span><span class="s2">&quot;stream&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug</span><span class="p">:</span>
            <span class="c1"># Construct the same URL requests would construct.</span>
            <span class="kn">from</span> <span class="nn">requests</span> <span class="k">import</span> <span class="n">PreparedRequest</span>  <span class="c1"># noqa</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">PreparedRequest</span><span class="p">()</span>
            <span class="n">p</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">_request_args</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Downloading </span><span class="si">%s</span><span class="s2"> ...&quot;</span> <span class="o">%</span> <span class="n">p</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>

        <span class="c1"># Workaround for old request versions.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">_request_args</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Compatibility with old request versions.</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;read&quot;</span><span class="p">):</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">_request_args</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="o">**</span><span class="n">_request_args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;stream&quot;</span> <span class="ow">in</span> <span class="n">_request_args</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">_request_args</span><span class="p">[</span><span class="s2">&quot;stream&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">_request_args</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_request_args</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="o">**</span><span class="n">_request_args</span><span class="p">)</span>

        <span class="c1"># Only accept code 200.</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle_requests_http_error</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

        <span class="c1"># Return if nothing else happens.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">r</span>

        <span class="n">_chunk_size</span> <span class="o">=</span> <span class="mi">1024</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;write&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="n">_chunk_size</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">filename</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">io</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fh</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">iter_content</span><span class="p">(</span><span class="n">chunk_size</span><span class="o">=</span><span class="n">_chunk_size</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WaveformClient</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for Clients supporting Stream objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_waveforms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a Stream.</span>

<span class="sd">        Keyword arguments are passed to the underlying concrete class.</span>

<span class="sd">        :type network: str</span>
<span class="sd">        :param network: Select one or more network codes. Can be SEED network</span>
<span class="sd">            codes or data center defined codes. Multiple codes are</span>
<span class="sd">            comma-separated. Wildcards are allowed.</span>
<span class="sd">        :type station: str</span>
<span class="sd">        :param station: Select one or more SEED station codes. Multiple codes</span>
<span class="sd">            are comma-separated. Wildcards are allowed.</span>
<span class="sd">        :type location: str</span>
<span class="sd">        :param location: Select one or more SEED location identifiers. Multiple</span>
<span class="sd">            identifiers are comma-separated. Wildcards are allowed.</span>
<span class="sd">        :type channel: str</span>
<span class="sd">        :param channel: Select one or more SEED channel codes. Multiple codes</span>
<span class="sd">            are comma-separated.</span>
<span class="sd">        :type starttime: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param starttime: Limit results to time series samples on or after the</span>
<span class="sd">            specified start time</span>
<span class="sd">        :type endtime: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param endtime: Limit results to time series samples on or before the</span>
<span class="sd">            specified end time</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">EventClient</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for Clients supporting Catalog objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_events</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a Catalog.</span>

<span class="sd">        Keyword arguments are passed to the underlying concrete class.</span>

<span class="sd">        :type starttime: :class:`~obspy.core.utcdatetime.UTCDateTime`, optional</span>
<span class="sd">        :param starttime: Limit to events on or after the specified start time.</span>
<span class="sd">        :type endtime: :class:`~obspy.core.utcdatetime.UTCDateTime`, optional</span>
<span class="sd">        :param endtime: Limit to events on or before the specified end time.</span>
<span class="sd">        :type minlatitude: float, optional</span>
<span class="sd">        :param minlatitude: Limit to events with a latitude larger than the</span>
<span class="sd">            specified minimum.</span>
<span class="sd">        :type maxlatitude: float, optional</span>
<span class="sd">        :param maxlatitude: Limit to events with a latitude smaller than the</span>
<span class="sd">            specified maximum.</span>
<span class="sd">        :type minlongitude: float, optional</span>
<span class="sd">        :param minlongitude: Limit to events with a longitude larger than the</span>
<span class="sd">            specified minimum.</span>
<span class="sd">        :type maxlongitude: float, optional</span>
<span class="sd">        :param maxlongitude: Limit to events with a longitude smaller than the</span>
<span class="sd">            specified maximum.</span>
<span class="sd">        :type latitude: float, optional</span>
<span class="sd">        :param latitude: Specify the latitude to be used for a radius search.</span>
<span class="sd">        :type longitude: float, optional</span>
<span class="sd">        :param longitude: Specify the longitude to the used for a radius</span>
<span class="sd">            search.</span>
<span class="sd">        :type minradius: float, optional</span>
<span class="sd">        :param minradius: Limit to events within the specified minimum number</span>
<span class="sd">            of degrees from the geographic point defined by the latitude and</span>
<span class="sd">            longitude parameters.</span>
<span class="sd">        :type maxradius: float, optional</span>
<span class="sd">        :param maxradius: Limit to events within the specified maximum number</span>
<span class="sd">            of degrees from the geographic point defined by the latitude and</span>
<span class="sd">            longitude parameters.</span>
<span class="sd">        :type mindepth: float, optional</span>
<span class="sd">        :param mindepth: Limit to events with depth more than the specified</span>
<span class="sd">            minimum.</span>
<span class="sd">        :type maxdepth: float, optional</span>
<span class="sd">        :param maxdepth: Limit to events with depth less than the specified</span>
<span class="sd">            maximum.</span>
<span class="sd">        :type minmagnitude: float, optional</span>
<span class="sd">        :param minmagnitude: Limit to events with a magnitude larger than the</span>
<span class="sd">            specified minimum.</span>
<span class="sd">        :type maxmagnitude: float, optional</span>
<span class="sd">        :param maxmagnitude: Limit to events with a magnitude smaller than the</span>
<span class="sd">            specified maximum.</span>
<span class="sd">        :type magnitudetype: str, optional</span>
<span class="sd">        :param magnitudetype: Specify a magnitude type to use for testing the</span>
<span class="sd">            minimum and maximum limits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">StationClient</span><span class="p">(</span><span class="n">with_metaclass</span><span class="p">(</span><span class="n">ABCMeta</span><span class="p">,</span> <span class="n">BaseClient</span><span class="p">)):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for Clients supporting Inventory objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_stations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns an Inventory.</span>

<span class="sd">        Keyword arguments are passed to the underlying concrete class.</span>

<span class="sd">        :type starttime: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param starttime: Limit to metadata epochs starting on or after the</span>
<span class="sd">            specified start time.</span>
<span class="sd">        :type endtime: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param endtime: Limit to metadata epochs ending on or before the</span>
<span class="sd">            specified end time.</span>
<span class="sd">        :type startbefore: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param startbefore: Limit to metadata epochs starting before specified</span>
<span class="sd">            time.</span>
<span class="sd">        :type startafter: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param startafter: Limit to metadata epochs starting after specified</span>
<span class="sd">            time.</span>
<span class="sd">        :type endbefore: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param endbefore: Limit to metadata epochs ending before specified</span>
<span class="sd">            time.</span>
<span class="sd">        :type endafter: :class:`~obspy.core.utcdatetime.UTCDateTime`</span>
<span class="sd">        :param endafter: Limit to metadata epochs ending after specified time.</span>
<span class="sd">        :type network: str</span>
<span class="sd">        :param network: Select one or more network codes. Can be SEED network</span>
<span class="sd">            codes or data center defined codes. Multiple codes are</span>
<span class="sd">            comma-separated.</span>
<span class="sd">        :type station: str</span>
<span class="sd">        :param station: Select one or more SEED station codes. Multiple codes</span>
<span class="sd">            are comma-separated.</span>
<span class="sd">        :type location: str</span>
<span class="sd">        :param location: Select one or more SEED location identifiers. Multiple</span>
<span class="sd">            identifiers are comma-separated. As a special case ``“--“`` (two</span>
<span class="sd">            dashes) will be translated to a string of two space characters to</span>
<span class="sd">            match blank location IDs.</span>
<span class="sd">        :type channel: str</span>
<span class="sd">        :param channel: Select one or more SEED channel codes. Multiple codes</span>
<span class="sd">            are comma-separated.</span>
<span class="sd">        :type minlatitude: float</span>
<span class="sd">        :param minlatitude: Limit to stations with a latitude larger than the</span>
<span class="sd">            specified minimum.</span>
<span class="sd">        :type maxlatitude: float</span>
<span class="sd">        :param maxlatitude: Limit to stations with a latitude smaller than the</span>
<span class="sd">            specified maximum.</span>
<span class="sd">        :type minlongitude: float</span>
<span class="sd">        :param minlongitude: Limit to stations with a longitude larger than the</span>
<span class="sd">            specified minimum.</span>
<span class="sd">        :type maxlongitude: float</span>
<span class="sd">        :param maxlongitude: Limit to stations with a longitude smaller than</span>
<span class="sd">            the specified maximum.</span>
<span class="sd">        :type latitude: float</span>
<span class="sd">        :param latitude: Specify the latitude to be used for a radius search.</span>
<span class="sd">        :type longitude: float</span>
<span class="sd">        :param longitude: Specify the longitude to the used for a radius</span>
<span class="sd">            search.</span>
<span class="sd">        :type minradius: float</span>
<span class="sd">        :param minradius: Limit results to stations within the specified</span>
<span class="sd">            minimum number of degrees from the geographic point defined by the</span>
<span class="sd">            latitude and longitude parameters.</span>
<span class="sd">        :type maxradius: float</span>
<span class="sd">        :param maxradius: Limit results to stations within the specified</span>
<span class="sd">            maximum number of degrees from the geographic point defined by the</span>
<span class="sd">            latitude and longitude parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</pre></div>

</div>

<footer>
<p class="text-muted small">
By the <a href="https://github.com/orgs/obspy/people">ObsPy
Development Team</a> and many <a href="#contributers" role="button"
data-toggle="modal" data-target="#contributers">Awesome Contributors</a>™ &nbsp;|&nbsp; Built with
<a href="http://getbootstrap.com/">Bootstrap</a> and
<a href="http://glyphicons.com//">Glyphicons</a> &nbsp;|&nbsp; Copyright 2008-2016
</p>
</footer>
<div id="contributers" class="modal fade" tabindex="-1"
role="dialog" aria-labelledby="contributersLabel" aria-hidden="true">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal"
aria-hidden="true">&times;</button>
<h3 class="modal-title" id="contributersLabel">Thank you!</h3>
</div>
<div class="modal-body">
<p>We would like to thank our contributors, whose efforts make
this software what it is. These people have helped by writing code
and documentation, and by testing. They have created and
maintained this product, its associated libraries and
applications, our build tools and our web sites.</p>
<h4>Contributors</h4>
<div class="container-fluid">
<div class="row">
<div class="col-md-6">
<ul>
<li>Ammon, Charles J.</li>
<li>Arnarsson, Ólafur St.</li>
<li>Barsch, Robert</li>
<li>Bernardi, Fabrizio</li>
<li>Beyreuther, Moritz</li>
<li>Carothers, Lloyd</li>
<li>Egdorf, Sven</li>
<li>Ermert, Laura</li>
<li>Fabbri, Tommaso</li>
<li>Grunberg, Marc</li>
<li>Heimann, Sebastian</li>
<li>Hope, Gaute</li>
<li>Inza, Adolfo</li>
<li>Ketchum, David</li>
<li>Kremers, Simon</li>
<li>Krieger, Lars</li>
<li>Käufl, Paul</li>
<li>Lecocq, Thomas</li>
<li>Lesage, Philippe</li>
<li>Lopes, Rui L.</li>
<li>Maggi, Alessia</li>
<li>Megies, Tobias</li>
<li>Michelini, Alberto</li>
<li>Morgenstern, Bernhard</li>
<li>Panning, Mark P.</li>
<li>Reyes, Celso</li>
<li>Rothenhäusler, Nicolas</li>
<li>Sales de Andrade, Elliott</li>
<li>Saul, Joachim</li>
<li>Sippl, Christian</li>
<li>Stange, Stefan</li>
<li>Trabant, Chad</li>
<li>Walker, Andrew</li>
<li>Wassermann, Joachim</li>
<li>Winkelman, Andrew</li>
<li>van Driel, Martin</li>
</ul>
</div>
<div class="col-md-6">
<ul>
<li>Antunes, Emanuel</li>
<li>Bank, Markus</li>
<li>Behr, Yannik</li>
<li>Bernauer, Felix</li>
<li>Bonaimé, Sébastien</li>
<li>Danecek, Peter</li>
<li>Engels, Fabian</li>
<li>Eulenfeld, Tom</li>
<li>Grellier, Clément</li>
<li>Hammer, Conny</li>
<li>Heiniger, Lukas</li>
<li>Igel, Heiner</li>
<li>Isken, Marius</li>
<li>Koymans, Mathijs</li>
<li>Kress, Victor</li>
<li>Krischer, Lion</li>
<li>Köhler, Andreas</li>
<li>Leeman, John</li>
<li>Lomax, Anthony</li>
<li>MacCarthy, Jonathan</li>
<li>Martin, Henri</li>
<li>Meschede, Matthias</li>
<li>Miller, Nathaniel C.</li>
<li>Nof, Ran Novitsky</li>
<li>Rapagnani, Giovanni</li>
<li>Ringler, Adam</li>
<li>Russo, Emiliano</li>
<li>Satriano, Claudio</li>
<li>Scheingraber, Chris</li>
<li>Snoke, Arthur</li>
<li>Sullivan, Benjamin</li>
<li>Uieda, Leonardo</li>
<li>Walther, Marcus</li>
<li>Williams, Mark C.</li>
<li>Zad, Seyed Kasra Hosseini</li>
</ul>
</div>
</div>
</div>
<h4>Funds</h4>
<p>ObsPy was partially funded by the</p>
<ul>
<li>German Science Foundation (DFG) via grant DFG IG 16/9-1</li>
<li>German Ministry for Education and Research (BMBF), GEOTECHNOLOGIEN grant 03G0646H.</li>
<li>NERA project (Network of European Research Infrastructures for Earthquake Risk Assessment and Mitigation) under the European Community&#39;s Seventh Framework Programme (FP7/2007-2013) grant agreement n° 262330</li>
<li>Leibniz Institute for Applied Geophysics (LIAG)</li>
<li>VERCE EU-FP7 project (no. 283543)</li>
</ul>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
</div>
</div>
</div>
</div>

</div>


  </body>
</html>